/*! For license information please see main.d9ac8058.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},64:(e,t,n)=>{n.d(t,{initializeApp:()=>r.Wp});var r=n(150);(0,r.KO)("firebase","10.14.1","app")},150:(e,t,n)=>{n.d(t,{MF:()=>de,j6:()=>ae,xZ:()=>oe,om:()=>ie,Sx:()=>fe,Wp:()=>he,KO:()=>me});var r=n(812),s=n(443),i=n(700),a=n(555);let o,l;const c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap;let m={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return x(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(v(this),n),x(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return x(e.apply(v(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(v(this),t,...r);return d.set(i,t.sort?t.sort():[t]),x(i)}}function g(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});u.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,m):e);var t}function x(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(x(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),f.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),f.set(t,e)),t}const v=e=>f.get(e);const b=["get","getKey","getAll","getAllKeys","count"],y=["put","add","delete","clear"],w=new Map;function N(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=y.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!b.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return w.set(t,i),i}m=(e=>(0,a.A)((0,a.A)({},e),{},{get:(t,n,r)=>N(t,n)||e.get(t,n,r),has:(t,n)=>!!N(t,n)||e.has(t,n)}))(m);class j{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const k="@firebase/app",S="0.10.13",E=new s.Vy("@firebase/app"),C="@firebase/app-compat",_="@firebase/analytics-compat",T="@firebase/analytics",I="@firebase/app-check-compat",A="@firebase/app-check",D="@firebase/auth",P="@firebase/auth-compat",L="@firebase/database",R="@firebase/data-connect",O="@firebase/database-compat",M="@firebase/functions",F="@firebase/functions-compat",U="@firebase/installations",V="@firebase/installations-compat",z="@firebase/messaging",B="@firebase/messaging-compat",q="@firebase/performance",W="@firebase/performance-compat",H="@firebase/remote-config",K="@firebase/remote-config-compat",G="@firebase/storage",Q="@firebase/storage-compat",J="@firebase/firestore",Y="@firebase/vertexai-preview",$="@firebase/firestore-compat",X="firebase",Z="[DEFAULT]",ee={[k]:"fire-core",[C]:"fire-core-compat",[T]:"fire-analytics",[_]:"fire-analytics-compat",[A]:"fire-app-check",[I]:"fire-app-check-compat",[D]:"fire-auth",[P]:"fire-auth-compat",[L]:"fire-rtdb",[R]:"fire-data-connect",[O]:"fire-rtdb-compat",[M]:"fire-fn",[F]:"fire-fn-compat",[U]:"fire-iid",[V]:"fire-iid-compat",[z]:"fire-fcm",[B]:"fire-fcm-compat",[q]:"fire-perf",[W]:"fire-perf-compat",[H]:"fire-rc",[K]:"fire-rc-compat",[G]:"fire-gcs",[Q]:"fire-gcs-compat",[J]:"fire-fst",[$]:"fire-fst-compat",[Y]:"fire-vertex","fire-js":"fire-js",[X]:"fire-js-all"},te=new Map,ne=new Map,re=new Map;function se(e,t){try{e.container.addComponent(t)}catch(n){E.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ie(e){const t=e.name;if(re.has(t))return E.debug("There were multiple attempts to register component ".concat(t,".")),!1;re.set(t,e);for(const n of te.values())se(n,e);for(const n of ne.values())se(n,e);return!0}function ae(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e){return void 0!==e.settings}const le={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ce=new i.FA("app","Firebase",le);class ue{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ce.create("app-deleted",{appName:this._name})}}const de="10.14.1";function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=Object.assign({name:Z,automaticDataCollectionEnabled:!1},t),a=s.name;if("string"!==typeof a||!a)throw ce.create("bad-app-name",{appName:String(a)});if(n||(n=(0,i.T9)()),!n)throw ce.create("no-options");const o=te.get(a);if(o){if((0,i.bD)(n,o.options)&&(0,i.bD)(s,o.config))return o;throw ce.create("duplicate-app",{appName:a})}const l=new r.h1(a);for(const r of re.values())l.addComponent(r);const c=new ue(n,s,l);return te.set(a,c),c}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;const t=te.get(e);if(!t&&e===Z&&(0,i.T9)())return he();if(!t)throw ce.create("no-app",{appName:e});return t}function me(e,t,n){var s;let i=null!==(s=ee[e])&&void 0!==s?s:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void E.warn(e.join(" "))}ie(new r.uA("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const pe="firebase-heartbeat-store";let ge=null;function xe(){return ge||(ge=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=x(a);return r&&a.addEventListener("upgradeneeded",e=>{r(x(a.result),e.oldVersion,e.newVersion,x(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pe)}catch(n){console.warn(n)}}}).catch(e=>{throw ce.create("idb-open",{originalErrorMessage:e.message})})),ge}async function ve(e,t){try{const n=(await xe()).transaction(pe,"readwrite"),r=n.objectStore(pe);await r.put(t,be(e)),await n.done}catch(n){if(n instanceof i.g)E.warn(n.message);else{const e=ce.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});E.warn(e.message)}}}function be(e){return"".concat(e.name,"!").concat(e.options.appId)}class ye{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ne(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=we();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){E.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=we(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),je(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),je(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=(0,i.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return E.warn(t),""}}}function we(){return(new Date).toISOString().substring(0,10)}class Ne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.zW)()&&(0,i.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await xe()).transaction(pe),n=await t.objectStore(pe).get(be(e));return await t.done,n}catch(t){if(t instanceof i.g)E.warn(t.message);else{const e=ce.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});E.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ve(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ve(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function je(e){return(0,i.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ke;ke="",ie(new r.uA("platform-logger",e=>new j(e),"PRIVATE")),ie(new r.uA("heartbeat",e=>new ye(e),"PRIVATE")),me(k,S,ke),me(k,S,"esm2017"),me("fire-js","")},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=x.prototype;var y=b.prototype=new v;y.constructor=b,p(y,x.prototype),y.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,j={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,s)&&!k.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:j.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+_(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),T(a,t,s,"",function(e){return e})):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+_(o=e[c],c);l+=T(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,s,u=i+_(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},L={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:j};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=j.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,y(e),!p)if(null!==r(c))p=!0,P(N);else{var t=r(u);null!==t&&L(w,t.startTime-e)}}function N(e,n){p=!1,g&&(g=!1,v(E),E=-1),m=!0;var i=f;try{for(y(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),y(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&L(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,k=!1,S=null,E=-1,C=5,_=-1;function T(){return!(t.unstable_now()-_<C)}function I(){if(null!==S){var e=t.unstable_now();_=e;var n=!0;try{n=S(!0,e)}finally{n?j():(k=!1,S=null)}}else k=!1}if("function"===typeof b)j=function(){b(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=I,j=function(){D.postMessage(null)}}else j=function(){x(I,0)};function P(e){S=e,k||(k=!0,j())}function L(e,n){E=x(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,P(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(E),E=-1):g=!0,L(w,i-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,P(N))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},330:(e,t,n)=>{var r=n(43);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,a=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),s=r[0].inst,u=r[1];return o(function(){s.value=n,s.getSnapshot=t,c(s)&&u({inst:s})},[e,n,t]),a(function(){return c(s)&&u({inst:s}),e(function(){c(s)&&u({inst:s})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},443:(e,t,n)=>{n.d(t,{$b:()=>s,Vy:()=>c});const r=[];var s;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));const i={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},a=s.INFO,o={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}},461:(e,t,n)=>{e.exports=n(330)},472:(e,t,n)=>{n.d(t,{Timestamp:()=>Q,addDoc:()=>Go,collection:()=>Ma,kd:()=>Ko,H9:()=>Fa,x7:()=>Vo,getDocs:()=>Bo,kU:()=>qo,getFirestore:()=>Ba,aQ:()=>Qo,My:()=>To,query:()=>ko,BN:()=>Wo,mZ:()=>Ho,where:()=>Eo});var r,s,i=n(150),a=n(812),o=n(443),l=n(700),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function i(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function o(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],0>e?-1:0)}):new i([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return p(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var c=o(0),d=o(1),h=o(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function m(e){return-1==e.h}function p(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(d)}function g(e,t){return e.add(p(t))}function x(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function b(e,t){if(f(t))throw Error("division by zero");if(f(e))return new v(c,c);if(m(e))return t=b(p(e),t),new v(p(t.g),p(t.h));if(m(t))return t=b(e,p(t)),new v(p(t.g),t.h);if(30<e.g.length){if(m(e)||m(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=w(n,1),i=w(r,1);for(r=w(r,2),n=w(n,2);!f(r);){var a=i.add(r);0>=a.l(e)&&(s=s.add(n),i=a),r=w(r,1),n=w(n,1)}return t=g(e,s.j(t)),new v(s,t)}for(s=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(i=l(n)).j(t);m(a)||0<a.l(e);)a=(i=l(n-=r)).j(t);f(i)&&(i=d),s=s.add(i),e=g(e,a)}return new v(s,e)}function y(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function w(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],a=0;a<r;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(m(this))return-p(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(m(this))return"-"+p(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var s=b(n,t).g,i=((0<(n=g(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return m(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return m(this)?p(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var a=r+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(m(this))return m(e)?p(this).j(p(e)):p(p(this).j(e));if(m(e))return p(this.j(p(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var a=this.i(r)>>>16,o=65535&this.i(r),u=e.i(s)>>>16,d=65535&e.i(s);n[2*r+2*s]+=o*d,x(n,2*r+2*s),n[2*r+2*s+1]+=a*d,x(n,2*r+2*s+1),n[2*r+2*s+1]+=o*u,x(n,2*r+2*s+1),n[2*r+2*s+2]+=a*u,x(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,s=u.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return p(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),s=c,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+a),n);8>a?(a=l(Math.pow(n,a)),s=s.j(a).add(l(o))):s=(s=s.j(r)).add(l(o))}return s},r=u.Integer=i}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,f,m,p,g,x,v,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},y={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function N(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function j(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function E(e){return/^[\s\xa0]*$/.test(e)}function C(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function _(e){return _[" "](e),e}_[" "]=function(){};var T=-1!=C().indexOf("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&-1==C().indexOf("Edge"))&&!(-1!=C().indexOf("Trident")||-1!=C().indexOf("MSIE"))&&-1==C().indexOf("Edge");function I(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function A(e){const t={};for(const n in e)t[n]=e[n];return t}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<D.length;t++)n=D[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function R(e){s.setTimeout(()=>{throw e},0)}function O(){var e=z;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var M=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new F,e=>e.reset());class F{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let U,V=!1,z=new class{constructor(){this.h=this.g=null}add(e,t){const n=M.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},B=()=>{const e=s.Promise.resolve(void 0);U=()=>{e.then(q)}};var q=()=>{for(var e;e=O();){try{e.h.call(e.g)}catch(n){R(n)}var t=M;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}V=!1};function W(){this.s=this.s,this.C=this.C}function H(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},H.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function G(e,t){if(H.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(T){e:{try{_(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Q[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&G.aa.h.call(this)}}N(G,H);var Q={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),Y=0;function $(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++Y,this.da=this.fa=!1}function X(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Z(e){this.src=e,this.g={},this.h=0}function ee(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(X(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function te(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}Z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=te(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new $(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var ne="closure_lm_"+(1e6*Math.random()|0),re={};function se(e,t,n,r,s){if(r&&r.once)return ae(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)se(e,t[i],n,r,s);return null}return n=fe(n),e&&e[J]?e.K(t,n,a(r)?!!r.capture:!!r,s):ie(e,t,n,!1,r,s)}function ie(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=de(e);if(l||(e[ne]=l=new Z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ue;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)K||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(ce(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ae(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)ae(e,t[i],n,r,s);return null}return n=fe(n),e&&e[J]?e.L(t,n,a(r)?!!r.capture:!!r,s):ie(e,t,n,!0,r,s)}function oe(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)oe(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=fe(n),e&&e[J]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=te(i=e.g[t],n,r,s))&&(X(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=de(e))&&(t=e.g[t.toString()],e=-1,t&&(e=te(t,n,r,s)),(n=-1<e?t[e]:null)&&le(n))}function le(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[J])ee(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ce(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=de(t))?(ee(n,e),0==n.h&&(n.src=null,t[ne]=null)):X(e)}}}function ce(e){return e in re?re[e]:re[e]="on"+e}function ue(e,t){if(e.da)e=!0;else{t=new G(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&le(e),e=n.call(r,t)}return e}function de(e){return(e=e[ne])instanceof Z?e:null}var he="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(e){return"function"===typeof e?e:(e[he]||(e[he]=function(t){return e.handleEvent(t)}),e[he])}function me(){W.call(this),this.i=new Z(this),this.M=this,this.F=null}function pe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new H(t,e);else if(t instanceof H)t.target=t.target||e;else{var s=t;P(t=new H(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=ge(a,r,!0,t)&&s}if(s=ge(a=t.g=e,r,!0,t)&&s,s=ge(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=ge(a=t.g=n[i],r,!1,t)&&s}function ge(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&ee(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function xe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ve(e){e.g=xe(()=>{e.g=null,e.i&&(e.i=!1,ve(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}N(me,W),me.prototype[J]=!0,me.prototype.removeEventListener=function(e,t,n,r){oe(this,e,t,n,r)},me.prototype.N=function(){if(me.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)X(n[r]);delete t.g[e],t.h--}}this.F=null},me.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},me.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class be extends W{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(e){W.call(this),this.h=e,this.g={}}N(ye,W);var we=[];function Ne(e){I(e.g,function(e,t){this.g.hasOwnProperty(t)&&le(e)},e),e.g={}}ye.prototype.N=function(){ye.aa.N.call(this),Ne(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var je=s.JSON.stringify,ke=s.JSON.parse,Se=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function Ee(){}function Ce(e){return e.h||(e.h=e.i())}function _e(){}Ee.prototype.h=null;var Te={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ie(){H.call(this,"d")}function Ae(){H.call(this,"c")}N(Ie,H),N(Ae,H);var De={},Pe=null;function Le(){return Pe=Pe||new me}function Re(e){H.call(this,De.La,e)}function Oe(e){const t=Le();pe(t,new Re(t))}function Me(e,t){H.call(this,De.STAT_EVENT,e),this.stat=t}function Fe(e){const t=Le();pe(t,new Me(t,e))}function Ue(e,t){H.call(this,De.Ma,e),this.size=t}function Ve(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function ze(){this.g=!0}function Be(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return je(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}De.La="serverreachability",N(Re,H),De.STAT_EVENT="statevent",N(Me,H),De.Ma="timingevent",N(Ue,H),ze.prototype.xa=function(){this.g=!1},ze.prototype.info=function(){};var qe,We={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},He={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ke(){}function Ge(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}N(Ke,Ee),Ke.prototype.g=function(){return new XMLHttpRequest},Ke.prototype.i=function(){return{}},qe=new Ke;var Je={},Ye={};function $e(e,t,n){e.L=1,e.v=jt(vt(t)),e.m=n,e.P=!0,Xe(e,null)}function Xe(e,t){e.F=Date.now(),tt(e),e.A=vt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Mt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Qe,e.g=Sn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new be(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(we[0]=s.toString()),s=we);for(var i=0;i<s.length;i++){var a=se(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?A(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Oe(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function et(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ye:(n=Number(t.substring(n,r)),isNaN(n)?Je:(r+=1)+n>t.length?Ye:(t=t.slice(r,r+n),e.C=r+n,t))}function tt(e){e.S=Date.now()+e.I,nt(e,e.I)}function nt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ve(c(e.ba,e),t)}function rt(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function st(e){0==e.j.G||e.J||yn(e.j,e)}function it(e){rt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,Ne(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function at(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||dt(n.h,e)))if(!e.K&&dt(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bn(n),cn(n)}gn(n),Fe(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ve(c(n.Za,n),6e3));if(1>=ut(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else Nn(n,11)}else if((e.K||n.g==e)&&bn(n),!E(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(ht(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,Nt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=kn(r,r.J?r.ia:null,r.W),a.K){ft(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(rt(o),tt(o)),r.g=a}else pn(r);0<n.i.length&&dn(n)}else"stop"!=c[0]&&"close"!=c[0]||Nn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Nn(n,7):ln(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Oe()}catch(u){}}Ge.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==rn(e)?t.j():this.Y(e)},Ge.prototype.Y=function(e){try{if(e==this.g)e:{const h=rn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=h||7==t||Oe(),rt(this);var n=this.g.Z();this.X=n;t:if(Ze(this)){var r=sn(this.g);e="";var i=r.length,a=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){it(this),st(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Fe(12),it(this),st(this);break e}Be(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,at(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=et(this,o),e==Ye){4==h&&(this.s=4,Fe(14),n=!1),Be(this.i,this.l,null,"[Incomplete Response]");break}if(e==Je){this.s=4,Fe(15),Be(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Be(this.i,this.l,e,null),at(this,e)}if(Ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Fe(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),xn(d),d.M=!0,Fe(11))}}else Be(this.i,this.l,o,"[Invalid Chunked Response]"),it(this),st(this)}else Be(this.i,this.l,o,null),at(this,o);4==h&&it(this),this.o&&!this.J&&(4==h?yn(this.j,this):(this.o=!1,tt(this)))}else(function(e){const t={};e=(e.g&&2<=rn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(E(e[r]))continue;var n=L(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Fe(12)):(this.s=0,Fe(13)),it(this),st(this)}}}catch(w){}},Ge.prototype.cancel=function(){this.J=!0,it(this)},Ge.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Oe(),Fe(17)),it(this),this.s=2,st(this)):nt(this,this.S-e)};var ot=class{constructor(e,t){this.g=e,this.map=t}};function lt(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ct(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ut(e){return e.h?1:e.g?e.g.size:0}function dt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ht(e,t){e.g?e.g.add(t):e.h=t}function ft(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function mt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return j(e.i)}function pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}lt.prototype.cancel=function(){if(this.i=mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof xt){this.h=e.h,bt(this,e.j),this.o=e.o,this.g=e.g,yt(this,e.s),this.l=e.l;var t=e.i,n=new Pt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wt(this,n),this.m=e.m}else e&&(t=String(e).match(gt))?(this.h=!1,bt(this,t[1]||"",!0),this.o=kt(t[2]||""),this.g=kt(t[3]||"",!0),yt(this,t[4]),this.l=kt(t[5]||"",!0),wt(this,t[6]||"",!0),this.m=kt(t[7]||"")):(this.h=!1,this.i=new Pt(null,this.h))}function vt(e){return new xt(e)}function bt(e,t,n){e.j=n?kt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function wt(e,t,n){t instanceof Pt?(e.i=t,function(e,t){t&&!e.j&&(Lt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Rt(this,t),Mt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=St(t,At)),e.i=new Pt(t,e.h))}function Nt(e,t,n){e.i.set(t,n)}function jt(e){return Nt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function kt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function St(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Et),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Et(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}xt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(St(t,_t,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(St(t,_t,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(St(n,"/"==n.charAt(0)?It:Tt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",St(n,Dt)),e.join("")};var Ct,_t=/[#\/\?@]/g,Tt=/[#\?:]/g,It=/[#\?]/g,At=/[#\?@]/g,Dt=/#/g;function Pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Lt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Rt(e,t){Lt(e),t=Ft(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ot(e,t){return Lt(e),t=Ft(e,t),e.g.has(t)}function Mt(e,t,n){Rt(e,t),0<n.length&&(e.i=null,e.g.set(Ft(e,t),j(n)),e.h+=n.length)}function Ft(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ut(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Vt(){this.g=new Se}function zt(e,t,n){const r=n||"";try{pt(e,function(e,n){let s=e;a(e)&&(s=je(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Bt(e){this.l=e.Ub||null,this.j=e.eb||!1}function qt(e,t){me.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Wt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ht(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Kt(e)}function Kt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Gt(e){let t="";return I(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Nt(e,t,n))}function Jt(e){me.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Pt.prototype).add=function(e,t){Lt(this),this.i=null,e=Ft(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Lt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Lt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Lt(this);let t=[];if("string"===typeof e)Ot(this,e)&&(t=t.concat(this.g.get(Ft(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Lt(this),this.i=null,Ot(this,e=Ft(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},N(Bt,Ee),Bt.prototype.g=function(){return new qt(this.l,this.j)},Bt.prototype.i=(Ct={},function(){return Ct}),N(qt,me),(e=qt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Kt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ht(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kt(this)),this.g&&(this.readyState=3,Kt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ht(this):Kt(this),3==this.readyState&&Wt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ht(this))},e.Qa=function(e){this.g&&(this.response=e,Ht(this))},e.ga=function(){this.g&&Ht(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(qt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),N(Jt,me);var Yt=/^https?$/i,$t=["POST","PUT"];function Xt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Zt(e),tn(e)}function Zt(e){e.A||(e.A=!0,pe(e,"complete"),pe(e,"error"))}function en(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=rn(e)||2!=e.Z()))if(e.u&&4==rn(e))xe(e.Ea,0,e);else if(pe(e,"readystatechange"),4==rn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(gt)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Yt.test(a?a.toLowerCase():"")}n=i}if(n)pe(e,"complete"),pe(e,"success");else{e.m=6;try{var o=2<rn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Zt(e)}}finally{tn(e)}}}function tn(e,t){if(e.g){nn(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||pe(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function nn(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function rn(e){return e.g?e.g.readyState:0}function sn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(k){return null}}function an(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function on(e){this.Aa=0,this.i=[],this.j=new ze,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=an("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=an("baseRetryDelayMs",5e3,e),this.cb=an("retryDelaySeedMs",1e4,e),this.Wa=an("forwardChannelMaxRetries",2,e),this.wa=an("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new lt(e&&e.concurrentRequestLimit),this.Da=new Vt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function ln(e){if(un(e),3==e.G){var t=e.U++,n=vt(e.I);if(Nt(n,"SID",e.K),Nt(n,"RID",t),Nt(n,"TYPE","terminate"),fn(e,n),(t=new Ge(e,e.j,t)).L=2,t.v=jt(vt(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),tt(t)}jn(e)}function cn(e){e.g&&(xn(e),e.g.cancel(),e.g=null)}function un(e){cn(e),e.u&&(s.clearTimeout(e.u),e.u=null),bn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function dn(e){if(!ct(e.h)&&!e.s){e.s=!0;var t=e.Ga;U||B(),V||(U(),V=!0),z.add(t,e),e.B=0}}function hn(e,t){var n;n=t?t.l:e.U++;const r=vt(e.I);Nt(r,"SID",e.K),Nt(r,"RID",n),Nt(r,"AID",e.T),fn(e,r),e.m&&e.o&&Qt(r,e.m,e.o),n=new Ge(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=mn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ht(e.h,n),$e(n,r,t)}function fn(e,t){e.H&&I(e.H,function(e,n){Nt(t,n,e)}),e.l&&pt({},function(e,n){Nt(t,n,e)})}function mn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{zt(o,e,"req"+n+"_")}catch(w){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;U||B(),V||(U(),V=!0),z.add(t,e),e.v=0}}function gn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ve(c(e.Fa,e),wn(e,e.v)),e.v++,!0)}function xn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function vn(e){e.g=new Ge(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=vt(e.qa);Nt(t,"RID","rpc"),Nt(t,"SID",e.K),Nt(t,"AID",e.T),Nt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&Nt(t,"TO",e.ja),Nt(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=jt(vt(t)),n.m=null,n.P=!0,Xe(n,e)}function bn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function yn(e,t){var n=null;if(e.g==t){bn(e),xn(e),e.g=null;var r=2}else{if(!dt(e.h,t))return;n=t.D,ft(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;pe(r=Le(),new Ue(r,n)),dn(e)}else pn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(ut(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ve(c(e.Ga,e,t),wn(e,e.B)),e.B++,!0))}(e,t)||2==r&&gn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:Nn(e,5);break;case 4:Nn(e,10);break;case 3:Nn(e,6);break;default:Nn(e,2)}}function wn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function Nn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new xt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||bt(r,"https"),jt(r),t?function(e,t){const n=new ze;if(s.Image){const r=new Image;r.onload=u(Ut,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ut,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ut,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ut,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ze;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ut(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ut(0,0,!0,t):Ut(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ut(0,0,!1,t)})}(r.toString(),n)}else Fe(2);e.G=0,e.l&&e.l.sa(t),jn(e),un(e)}function jn(e){if(e.G=0,e.ka=[],e.l){const t=mt(e.h);0==t.length&&0==e.i.length||(S(e.ka,t),S(e.ka,e.i),e.h.i.length=0,j(e.i),e.i.length=0),e.l.ra()}}function kn(e,t,n){var r=n instanceof xt?vt(n):new xt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),yt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new xt(null);r&&bt(a,r),t&&(a.g=t),i&&yt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&Nt(r,n,t),Nt(r,"VER",e.la),fn(e,r),r}function Sn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Jt(new Bt({eb:n})):new Jt(e.pa)).Ha(e.J),t}function En(){}function Cn(){}function _n(e,t){me.call(this),this.g=new on(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!E(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new An(this)}function Tn(e){Ie.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function In(){Ae.call(this),this.status=1}function An(e){this.g=e}(e=Jt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qe.g(),this.v=this.o?Ce(this.o):Ce(qe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Xt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call($t,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Xt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,pe(this,"complete"),pe(this,"abort"),tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Jt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?en(this):this.bb())},e.bb=function(){en(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(Ct){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Ct){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ke(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=on.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Fe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=kn(this,null,this.W),dn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Ge(this,this.j,e);let i=this.o;if(this.S&&(i?(i=A(i),P(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=mn(this,s,t),Nt(n=vt(this.I),"RID",e),Nt(n,"CVER",22),this.D&&Nt(n,"X-HTTP-Session-Id",this.D),fn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Gt(i)))+"&"+t:this.m&&Qt(n,this.m,i)),ht(this.h,s),this.Ua&&Nt(n,"TYPE","init"),this.P?(Nt(n,"$req",t),Nt(n,"SID","null"),s.T=!0,$e(s,n,null)):$e(s,n,t),this.G=2}}else 3==this.G&&(e?hn(this,e):0==this.i.length||ct(this.h)||hn(this))},e.Fa=function(){if(this.u=null,vn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ve(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fe(10),cn(this),vn(this))},e.Za=function(){null!=this.C&&(this.C=null,cn(this),gn(this),Fe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=En.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Cn.prototype.g=function(e,t){return new _n(e,t)},N(_n,me),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){ln(this.g)},_n.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=je(e),e=n);t.i.push(new ot(t.Ya++,e)),3==t.G&&dn(t)},_n.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,_n.aa.N.call(this)},N(Tn,Ie),N(In,Ae),N(An,En),An.prototype.ua=function(){pe(this.g,"a")},An.prototype.ta=function(e){pe(this.g,new Tn(e))},An.prototype.sa=function(e){pe(this.g,new In)},An.prototype.ra=function(){pe(this.g,"b")},Cn.prototype.createWebChannel=Cn.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,v=y.createWebChannelTransport=function(){return new Cn},x=y.getStatEventTarget=function(){return Le()},g=y.Event=De,p=y.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},We.NO_ERROR=0,We.TIMEOUT=8,We.HTTP_ERROR=6,m=y.ErrorCode=We,He.COMPLETE="complete",f=y.EventType=He,_e.EventType=Te,Te.OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",me.prototype.listen=me.prototype.K,h=y.WebChannel=_e,y.FetchXmlHttpFactory=Bt,Jt.prototype.listenOnce=Jt.prototype.L,Jt.prototype.getLastError=Jt.prototype.Ka,Jt.prototype.getLastErrorCode=Jt.prototype.Ba,Jt.prototype.getStatus=Jt.prototype.Z,Jt.prototype.getResponseJson=Jt.prototype.Oa,Jt.prototype.getResponseText=Jt.prototype.oa,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Ha,d=y.XhrIo=Jt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const w="@firebase/firestore";class N{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}N.UNAUTHENTICATED=new N(null),N.GOOGLE_CREDENTIALS=new N("google-credentials-uid"),N.FIRST_PARTY=new N("first-party-uid"),N.MOCK_USER=new N("mock-user");let j="10.14.0";const k=new o.Vy("@firebase/firestore");function S(){return k.logLevel}function E(e){if(k.logLevel<=o.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(T);k.debug("Firestore (".concat(j,"): ").concat(e),...s)}}function C(e){if(k.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(T);k.error("Firestore (".concat(j,"): ").concat(e),...s)}}function _(e){if(k.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(T);k.warn("Firestore (".concat(j,"): ").concat(e),...s)}}function T(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(j,") INTERNAL ASSERTION FAILED: ")+e;throw C(t),new Error(t)}function A(e,t){e||I()}function D(e,t){return e}const P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class R{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class O{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class M{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(N.UNAUTHENTICATED))}shutdown(){}}class F{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class U{constructor(e){this.t=e,this.currentUser=N.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){A(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new R;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new R,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new R)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(A("string"==typeof t.accessToken),new O(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return A(null===e||"string"==typeof e),new N(e)}}class V{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=N.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new V(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(N.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){A(void 0===this.o);const n=e=>{null!=e.error&&E("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,E("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(A("string"==typeof e.token),this.R=e.token,new B(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function W(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class H{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=W(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function K(e,t){return e<t?-1:e>t?1:0}function G(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Q{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new L(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Q.fromMillis(Date.now())}static fromDate(e){return Q.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Q(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Q(0,0))}static max(){return new J(new Q(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Y{constructor(e,t,n){void 0===t?t=0:t>e.length&&I(),void 0===n?n=e.length-t:n>e.length-t&&I(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Y.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Y?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $ extends Y{construct(e,t,n){return new $(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new L(P.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new $(e)}static emptyPath(){return new $([])}}const X=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Z extends Y{construct(e,t,n){return new Z(e,t,n)}static isValidIdentifier(e){return X.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Z.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Z(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new L(P.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new L(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new L(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new L(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Z(t)}static emptyPath(){return new Z([])}}class ee{constructor(e){this.path=e}static fromPath(e){return new ee($.fromString(e))}static fromName(e){return new ee($.fromString(e).popFirst(5))}static empty(){return new ee($.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new $(e.slice()))}}class te{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}te.UNKNOWN_ID=-1;function ne(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=J.fromTimestamp(1e9===r?new Q(n+1,0):new Q(n,r));return new se(s,ee.empty(),t)}function re(e){return new se(e.readTime,e.key,-1)}class se{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new se(J.min(),ee.empty(),-1)}static max(){return new se(J.max(),ee.empty(),-1)}}function ie(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ee.comparator(e.documentKey,t.documentKey),0!==n?n:K(e.largestBatchId,t.largestBatchId))}const ae="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function le(e){if(e.code!==P.FAILED_PRECONDITION||e.message!==ae)throw e;E("LocalStore","Unexpectedly lost primary lease")}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&I(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(e){return ce.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,n)=>{t(e)})}static reject(e){return new ce((t,n)=>{n(e)})}static waitFor(e){return new ce((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=ce.resolve(!1);for(const n of e)t=t.next(e=>e?ce.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ce((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new ce((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function ue(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function de(e){return"IndexedDbTransactionError"===e.name}class he{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function fe(e){return null==e}function me(e){return 0===e&&1/e==-1/0}function pe(e){return"number"==typeof e&&Number.isInteger(e)&&!me(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}he.oe=-1;const ge=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xe=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ve=xe,be=[...ve,"indexConfiguration","indexState","indexEntries"];function ye(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function we(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ne(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class je{constructor(e,t){this.comparator=e,this.root=t||Se.EMPTY}insert(e,t){return new je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Se.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Se.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ke(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ke(this.root,e,this.comparator,!1)}getReverseIterator(){return new ke(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ke(this.root,e,this.comparator,!0)}}class ke{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Se{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Se.RED,this.left=null!=r?r:Se.EMPTY,this.right=null!=s?s:Se.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Se(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Se.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Se.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Se.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Se.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw I();if(this.right.isRed())throw I();const e=this.left.check();if(e!==this.right.check())throw I();return e+(this.isRed()?0:1)}}Se.EMPTY=null,Se.RED=!0,Se.BLACK=!1,Se.EMPTY=new class{constructor(){this.size=0}get key(){throw I()}get value(){throw I()}get color(){throw I()}get left(){throw I()}get right(){throw I()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Se(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ee{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ce(this.data.getIterator())}getIteratorFrom(e){return new Ce(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ee))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ee(this.comparator);return t.data=e,t}}class Ce{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _e{constructor(e){this.fields=e,e.sort(Z.comparator)}static empty(){return new _e([])}unionWith(e){let t=new Ee(Z.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _e(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return G(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Te extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ie{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Te("Invalid base64 string: "+e):e}}(e);return new Ie(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ie(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ie.EMPTY_BYTE_STRING=new Ie("");const Ae=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function De(e){if(A(!!e),"string"==typeof e){let t=0;const n=Ae.exec(e);if(A(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pe(e.seconds),nanos:Pe(e.nanos)}}function Pe(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Le(e){return"string"==typeof e?Ie.fromBase64String(e):Ie.fromUint8Array(e)}function Re(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Oe(e){const t=e.mapValue.fields.__previous_value__;return Re(t)?Oe(t):t}function Me(e){const t=De(e.mapValue.fields.__local_write_time__.timestampValue);return new Q(t.seconds,t.nanos)}class Fe{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class Ue{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ue("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ue&&e.projectId===this.projectId&&e.database===this.database}}const Ve={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ze(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Re(e)?4:rt(e)?9007199254740991:tt(e)?10:11:I()}function Be(e,t){if(e===t)return!0;const n=ze(e);if(n!==ze(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Me(e).isEqual(Me(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=De(e.timestampValue),r=De(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Le(e.bytesValue).isEqual(Le(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Pe(e.geoPointValue.latitude)===Pe(t.geoPointValue.latitude)&&Pe(e.geoPointValue.longitude)===Pe(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Pe(e.integerValue)===Pe(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Pe(e.doubleValue),r=Pe(t.doubleValue);return n===r?me(n)===me(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return G(e.arrayValue.values||[],t.arrayValue.values||[],Be);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ye(n)!==ye(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Be(n[s],r[s])))return!1;return!0}(e,t);default:return I()}}function qe(e,t){return void 0!==(e.values||[]).find(e=>Be(e,t))}function We(e,t){if(e===t)return 0;const n=ze(e),r=ze(t);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Pe(e.integerValue||e.doubleValue),r=Pe(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return He(e.timestampValue,t.timestampValue);case 4:return He(Me(e),Me(t));case 5:return K(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Le(e),r=Le(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=K(n[s],r[s]);if(0!==e)return e}return K(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=K(Pe(e.latitude),Pe(t.latitude));return 0!==n?n:K(Pe(e.longitude),Pe(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ke(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=K((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Ke(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ve.mapValue&&t===Ve.mapValue)return 0;if(e===Ve.mapValue)return 1;if(t===Ve.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=K(r[a],i[a]);if(0!==e)return e;const t=We(n[r[a]],s[i[a]]);if(0!==t)return t}return K(r.length,i.length)}(e.mapValue,t.mapValue);default:throw I()}}function He(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return K(e,t);const n=De(e),r=De(t),s=K(n.seconds,r.seconds);return 0!==s?s:K(n.nanos,r.nanos)}function Ke(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=We(n[s],r[s]);if(e)return e}return K(n.length,r.length)}function Ge(e){return Qe(e)}function Qe(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=De(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Le(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ee.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Qe(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Qe(e.fields[s]));return n+"}"}(e.mapValue):I()}function Je(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ye(e){return!!e&&"integerValue"in e}function $e(e){return!!e&&"arrayValue"in e}function Xe(e){return!!e&&"nullValue"in e}function Ze(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function et(e){return!!e&&"mapValue"in e}function tt(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nt(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return we(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=nt(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nt(e.arrayValue.values[n]);return t}return Object.assign({},e)}function rt(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class st{constructor(e){this.value=e}static empty(){return new st({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!et(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nt(t)}setAll(e){let t=Z.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=nt(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());et(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Be(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];et(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){we(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new st(nt(this.value))}}function it(e){const t=[];return we(e.fields,(e,n)=>{const r=new Z([e]);if(et(n)){const e=it(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new _e(t)}class at{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new at(e,0,J.min(),J.min(),J.min(),st.empty(),0)}static newFoundDocument(e,t,n,r){return new at(e,1,t,J.min(),n,r,0)}static newNoDocument(e,t){return new at(e,2,t,J.min(),J.min(),st.empty(),0)}static newUnknownDocument(e,t){return new at(e,3,t,J.min(),J.min(),st.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=st.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=st.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ot{constructor(e,t){this.position=e,this.inclusive=t}}function lt(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?ee.comparator(ee.fromName(a.referenceValue),n.key):We(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function ct(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Be(e.position[n],t.position[n]))return!1;return!0}class ut{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function dt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ht{}class ft extends ht{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new wt(e,t,n):"array-contains"===t?new St(e,n):"in"===t?new Et(e,n):"not-in"===t?new Ct(e,n):"array-contains-any"===t?new _t(e,n):new ft(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Nt(e,n):new jt(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(We(t,this.value)):null!==t&&ze(this.value)===ze(t)&&this.matchesComparison(We(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return I()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mt extends ht{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new mt(e,t)}matches(e){return pt(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pt(e){return"and"===e.op}function gt(e){return xt(e)&&pt(e)}function xt(e){for(const t of e.filters)if(t instanceof mt)return!1;return!0}function vt(e){if(e instanceof ft)return e.field.canonicalString()+e.op.toString()+Ge(e.value);if(gt(e))return e.filters.map(e=>vt(e)).join(",");{const t=e.filters.map(e=>vt(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function bt(e,t){return e instanceof ft?function(e,t){return t instanceof ft&&e.op===t.op&&e.field.isEqual(t.field)&&Be(e.value,t.value)}(e,t):e instanceof mt?function(e,t){return t instanceof mt&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&bt(n,t.filters[r]),!0)}(e,t):void I()}function yt(e){return e instanceof ft?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ge(e.value))}(e):e instanceof mt?function(e){return e.op.toString()+" {"+e.getFilters().map(yt).join(" ,")+"}"}(e):"Filter"}class wt extends ft{constructor(e,t,n){super(e,t,n),this.key=ee.fromName(n.referenceValue)}matches(e){const t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nt extends ft{constructor(e,t){super(e,"in",t),this.keys=kt("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jt extends ft{constructor(e,t){super(e,"not-in",t),this.keys=kt("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function kt(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ee.fromName(e.referenceValue))}class St extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $e(t)&&qe(t.arrayValue,this.value)}}class Et extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qe(this.value.arrayValue,t)}}class Ct extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(qe(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qe(this.value.arrayValue,t)}}class _t extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$e(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>qe(this.value.arrayValue,e))}}class Tt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function It(e){return new Tt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function At(e){const t=D(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>vt(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),fe(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ge(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ge(e)).join(",")),t.ue=e}return t.ue}function Dt(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bt(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ct(e.startAt,t.startAt)&&ct(e.endAt,t.endAt)}function Pt(e){return ee.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Lt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Rt(e,t,n,r,s,i,a,o){return new Lt(e,t,n,r,s,i,a,o)}function Ot(e){return new Lt(e)}function Mt(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ft(e){return null!==e.collectionGroup}function Ut(e){const t=D(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ee(Z.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new ut(r,n))}),e.has(Z.keyField().canonicalString())||t.ce.push(new ut(Z.keyField(),n))}return t.ce}function Vt(e){const t=D(e);return t.le||(t.le=zt(t,Ut(e))),t.le}function zt(e,t){if("F"===e.limitType)return It(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ut(e.field,t)});const n=e.endAt?new ot(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ot(e.startAt.position,e.startAt.inclusive):null;return It(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Bt(e,t){const n=e.filters.concat([t]);return new Lt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function qt(e,t,n){return new Lt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wt(e,t){return Dt(Vt(e),Vt(t))&&e.limitType===t.limitType}function Ht(e){return"".concat(At(Vt(e)),"|lt:").concat(e.limitType)}function Kt(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>yt(e)).join(", "),"]")),fe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ge(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ge(e)).join(",")),"Target(".concat(t,")")}(Vt(e)),"; limitType=").concat(e.limitType,")")}function Gt(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ee.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ut(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=lt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ut(e),t))&&!(e.endAt&&!function(e,t,n){const r=lt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ut(e),t))}(e,t)}function Qt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jt(e){return(t,n)=>{let r=!1;for(const s of Ut(e)){const e=Yt(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Yt(e,t,n){const r=e.field.isKeyField()?ee.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?We(r,s):I()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return I()}}class $t{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){we(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Ne(this.inner)}size(){return this.innerSize}}const Xt=new je(ee.comparator);function Zt(){return Xt}const en=new je(ee.comparator);function tn(){let e=en;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function nn(e){let t=en;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function rn(){return an()}function sn(){return an()}function an(){return new $t(e=>e.toString(),(e,t)=>e.isEqual(t))}const on=new je(ee.comparator),ln=new Ee(ee.comparator);function cn(){let e=ln;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const un=new Ee(K);function dn(){return un}function hn(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:me(t)?"-0":t}}function fn(e){return{integerValue:""+e}}function mn(e,t){return pe(t)?fn(t):hn(e,t)}class pn{constructor(){this._=void 0}}function gn(e,t,n){return e instanceof bn?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Re(t)&&(t=Oe(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof yn?wn(e,t):e instanceof Nn?jn(e,t):function(e,t){const n=vn(e,t),r=Sn(n)+Sn(e.Pe);return Ye(n)&&Ye(e.Pe)?fn(r):hn(e.serializer,r)}(e,t)}function xn(e,t,n){return e instanceof yn?wn(e,t):e instanceof Nn?jn(e,t):n}function vn(e,t){return e instanceof kn?function(e){return Ye(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class bn extends pn{}class yn extends pn{constructor(e){super(),this.elements=e}}function wn(e,t){const n=En(t);for(const r of e.elements)n.some(e=>Be(e,r))||n.push(r);return{arrayValue:{values:n}}}class Nn extends pn{constructor(e){super(),this.elements=e}}function jn(e,t){let n=En(t);for(const r of e.elements)n=n.filter(e=>!Be(e,r));return{arrayValue:{values:n}}}class kn extends pn{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Sn(e){return Pe(e.integerValue||e.doubleValue)}function En(e){return $e(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cn{constructor(e,t){this.version=e,this.transformResults=t}}class _n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tn(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class In{}function An(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new zn(e.key,_n.none()):new On(e.key,e.data,_n.none());{const n=e.data,r=st.empty();let s=new Ee(Z.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Mn(e.key,r,new _e(s.toArray()),_n.none())}}function Dn(e,t,n){e instanceof On?function(e,t,n){const r=e.value.clone(),s=Un(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Mn?function(e,t,n){if(!Tn(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Un(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Fn(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Pn(e,t,n,r){return e instanceof On?function(e,t,n,r){if(!Tn(e.precondition,t))return n;const s=e.value.clone(),i=Vn(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Mn?function(e,t,n,r){if(!Tn(e.precondition,t))return n;const s=Vn(e.fieldTransforms,r,t),i=t.data;return i.setAll(Fn(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Tn(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ln(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=vn(r.transform,e||null);null!=s&&(null===n&&(n=st.empty()),n.set(r.field,s))}return n||null}function Rn(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&G(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof yn&&t instanceof yn||e instanceof Nn&&t instanceof Nn?G(e.elements,t.elements,Be):e instanceof kn&&t instanceof kn?Be(e.Pe,t.Pe):e instanceof bn&&t instanceof bn}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class On extends In{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Mn extends In{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Fn(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Un(e,t,n){const r=new Map;A(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,xn(a,o,n[s]))}return r}function Vn(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,gn(e,i,t))}return r}class zn extends In{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bn extends In{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qn{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Dn(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Pn(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Pn(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=sn();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=An(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(J.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cn())}isEqual(e){return this.batchId===e.batchId&&G(this.mutations,e.mutations,(e,t)=>Rn(e,t))&&G(this.baseMutations,e.baseMutations,(e,t)=>Rn(e,t))}}class Wn{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){A(e.mutations.length===n.length);let r=on;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Wn(e,t,n,r)}}class Hn{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Kn{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gn,Qn;function Jn(e){switch(e){default:return I();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function Yn(e){if(void 0===e)return C("GRPC error has no .code"),P.UNKNOWN;switch(e){case Gn.OK:return P.OK;case Gn.CANCELLED:return P.CANCELLED;case Gn.UNKNOWN:return P.UNKNOWN;case Gn.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Gn.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Gn.INTERNAL:return P.INTERNAL;case Gn.UNAVAILABLE:return P.UNAVAILABLE;case Gn.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Gn.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Gn.NOT_FOUND:return P.NOT_FOUND;case Gn.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Gn.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Gn.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Gn.ABORTED:return P.ABORTED;case Gn.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Gn.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Gn.DATA_LOSS:return P.DATA_LOSS;default:return I()}}(Qn=Gn||(Gn={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";let $n=null;function Xn(){return new TextEncoder}const Zn=new r([4294967295,4294967295],0);function er(e){const t=Xn().encode(e),n=new s;return n.update(t),new Uint8Array(n.digest())}function tr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,s],0),new r([i,a],0)]}class nr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new rr("Invalid padding: ".concat(t));if(n<0)throw new rr("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new rr("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new rr("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=r.fromNumber(this.Ie)}Ee(e,t,n){let s=e.add(t.multiply(r.fromNumber(n)));return 1===s.compare(Zn)&&(s=new r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=er(e),[n,r]=tr(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new nr(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=er(e),[n,r]=tr(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class rr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sr{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ir.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new sr(J.min(),r,new je(K),Zt(),cn())}}class ir{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ir(n,t,cn(),cn(),cn())}}class ar{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class or{constructor(e,t){this.targetId=e,this.me=t}}class lr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ie.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class cr{constructor(){this.fe=0,this.ge=hr(),this.pe=Ie.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=cn(),t=cn(),n=cn();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:I()}}),new ir(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=hr()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,A(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ur{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zt(),this.qe=dr(),this.Qe=new je(K)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:I()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(Pt(s))if(0===n){const e=new ee(s.path);this.Ue(t,e,at.newNoDocument(e,J.min()))}else A(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==$n||$n.et(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Le(n).toUint8Array()}catch(e){if(e instanceof Te)return _("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new nr(i,r,s)}catch(e){return _(e instanceof rr?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&Pt(s.target)){const t=new ee(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,at.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=cn();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new sr(e,t,this.Qe,this.ke,n);return this.ke=Zt(),this.qe=dr(),this.Qe=new je(K),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new cr,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ee(K),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||E("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cr),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function dr(){return new je(ee.comparator)}function hr(){return new je(ee.comparator)}const fr={asc:"ASCENDING",desc:"DESCENDING"},mr={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pr={and:"AND",or:"OR"};class gr{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xr(e,t){return e.useProto3Json||fe(t)?t:{value:t}}function vr(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function br(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function yr(e,t){return vr(e,t.toTimestamp())}function wr(e){return A(!!e),J.fromTimestamp(function(e){const t=De(e);return new Q(t.seconds,t.nanos)}(e))}function Nr(e,t){return jr(e,t).canonicalString()}function jr(e,t){const n=function(e){return new $(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function kr(e){const t=$.fromString(e);return A(Wr(t)),t}function Sr(e,t){return Nr(e.databaseId,t.path)}function Er(e,t){const n=kr(t);if(n.get(1)!==e.databaseId.projectId)throw new L(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new L(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ee(Ir(n))}function Cr(e,t){return Nr(e.databaseId,t)}function _r(e){const t=kr(e);return 4===t.length?$.emptyPath():Ir(t)}function Tr(e){return new $(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ir(e){return A(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ar(e,t,n){return{name:Sr(e,t),fields:n.value.mapValue.fields}}function Dr(e,t){let n;if(t instanceof On)n={update:Ar(e,t.key,t.value)};else if(t instanceof zn)n={delete:Sr(e,t.key)};else if(t instanceof Mn)n={update:Ar(e,t.key,t.data),updateMask:qr(t.fieldMask)};else{if(!(t instanceof Bn))return I();n={verify:Sr(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof bn)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yn)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nn)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof kn)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw I()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:yr(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:I()}(e,t.precondition)),n}function Pr(e,t){return{documents:[Cr(e,t.path)]}}function Lr(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cr(e,s);const i=function(e){if(0!==e.length)return Br(mt.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Vr(e.field),direction:Mr(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=xr(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function Rr(e){let t=_r(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){A(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Or(e);return t instanceof mt&&gt(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new ut(zr(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,fe(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ot(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ot(n,t)}(n.endAt)),Rt(t,s,a,i,o,"F",l,c)}function Or(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zr(e.unaryFilter.field);return ft.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=zr(e.unaryFilter.field);return ft.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zr(e.unaryFilter.field);return ft.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=zr(e.unaryFilter.field);return ft.create(s,"!=",{nullValue:"NULL_VALUE"});default:return I()}}(e):void 0!==e.fieldFilter?function(e){return ft.create(zr(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return I()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return mt.create(e.compositeFilter.filters.map(e=>Or(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return I()}}(e.compositeFilter.op))}(e):I()}function Mr(e){return fr[e]}function Fr(e){return mr[e]}function Ur(e){return pr[e]}function Vr(e){return{fieldPath:e.canonicalString()}}function zr(e){return Z.fromServerFormat(e.fieldPath)}function Br(e){return e instanceof ft?function(e){if("=="===e.op){if(Ze(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NAN"}};if(Xe(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ze(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NOT_NAN"}};if(Xe(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vr(e.field),op:Fr(e.op),value:e.value}}}(e):e instanceof mt?function(e){const t=e.getFilters().map(e=>Br(e));return 1===t.length?t[0]:{compositeFilter:{op:Ur(e.op),filters:t}}}(e):I()}function qr(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Wr(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Hr{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:J.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:J.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ie.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Kr{constructor(e){this.ct=e}}function Gr(e){const t=Rr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qt(t,t.limit,"L"):t}class Qr{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Pe(e.integerValue));else if("doubleValue"in e){const n=Pe(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),me(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=De(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Le(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?rt(e)?this.dt(t,Number.MAX_SAFE_INTEGER):tt(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):I()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Pe(a)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),ee.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Qr.vt=new Qr;class Jr{constructor(){this.un=new Yr}addToCollectionParentIndex(e,t){return this.un.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(se.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(se.min())}updateCollectionGroup(e,t,n){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class Yr{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ee($.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ee($.comparator)).toArray()}}new Uint8Array(0);class $r{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new $r(e,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(41943040,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);class Xr{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xr(0)}static kn(){return new Xr(-1)}}class Zr{constructor(){this.changes=new $t(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ce.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class es{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ts{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Pn(n.mutation,e,_e.empty(),Q.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,cn()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cn();const r=rn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=tn();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=rn();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,cn()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Zt();const i=an(),a=an();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Mn)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Pn(a.mutation,t,a.mutation.getFieldMask(),Q.now())):i.set(t.key,_e.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new es(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=an();let r=new je((e,t)=>e-t),s=cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||_e.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||cn()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=sn();l.forEach(e=>{if(!s.has(e)){const r=An(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ce.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ee.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ft(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):ce.resolve(rn());let a=-1,o=s;return i.next(t=>ce.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?ce.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,cn())).next(e=>({batchId:a,changes:nn(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(e=>{let t=tn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=tn();return this.indexManager.getCollectionParents(e,s).next(a=>ce.forEach(a,a=>{const o=function(e,t){return new Lt(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,at.newInvalidDocument(r)))});let n=tn();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Pn(i.mutation,r,_e.empty(),Q.now()),Gt(t,r)&&(n=n.insert(e,r))}),n})}}class ns{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ce.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:wr(e.createTime)}}(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Gr(e.bundledQuery),readTime:wr(e.readTime)}}(t)),ce.resolve()}}class rs{constructor(){this.overlays=new je(ee.comparator),this.Ir=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rn();return ce.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),ce.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),ce.resolve()}getOverlaysForCollection(e,t,n){const r=rn(),s=t.length+1,i=new ee(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ce.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new je((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=rn(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=rn(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return ce.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Hn(t,n));let s=this.Ir.get(t);void 0===s&&(s=cn(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class ss{constructor(){this.sessionToken=Ie.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}class is{constructor(){this.Tr=new Ee(as.Er),this.dr=new Ee(as.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new as(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new as(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new ee(new $([])),n=new as(t,e),r=new as(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ee(new $([])),n=new as(t,e),r=new as(t,e+1);let s=cn();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new as(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class as{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ee.comparator(e.key,t.key)||K(e.wr,t.wr)}static Ar(e,t){return K(e.wr,t.wr)||ee.comparator(e.key,t.key)}}class os{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ee(as.Er)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new qn(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new as(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ce.resolve(i)}lookupMutationBatch(e,t){return ce.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new as(t,0),r=new as(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ee(K);return t.forEach(e=>{const t=new as(e,0),r=new as(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),ce.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ee.isDocumentKey(s)||(s=s.child(""));const i=new as(new ee(s),0);let a=new Ee(K);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),ce.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){A(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return ce.forEach(t.mutations,r=>{const s=new as(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new as(t,0),r=this.br.firstAfterOrEqual(n);return ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ls{constructor(e){this.Mr=e,this.docs=new je(ee.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ce.resolve(n?n.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let n=Zt();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():at.newInvalidDocument(e))}),ce.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Zt();const i=t.path,a=new ee(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ie(re(a),n)<=0||(r.has(a.key)||Gt(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return ce.resolve(s)}getAllFromCollectionGroup(e,t,n,r){I()}Or(e,t){return ce.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new cs(this)}getSize(e){return ce.resolve(this.size)}}class cs extends Zr{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),ce.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class us{constructor(e){this.persistence=e,this.Nr=new $t(e=>At(e),Dt),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new is,this.targetCount=0,this.kr=Xr.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),ce.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Xr(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Kn(t),ce.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ce.waitFor(s).next(()=>r)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return ce.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),ce.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return ce.resolve(n)}containsKey(e,t){return ce.resolve(this.Br.containsKey(t))}}class ds{constructor(e,t){this.qr={},this.overlays={},this.Qr=new he(0),this.Kr=!1,this.Kr=!0,this.$r=new ss,this.referenceDelegate=e(this),this.Ur=new us(this),this.indexManager=new Jr,this.remoteDocumentCache=function(e){return new ls(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Kr(t),this.Gr=new ns(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rs,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new os(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){E("MemoryPersistence","Starting transaction:",e);const r=new hs(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return ce.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class hs extends oe{constructor(e){super(),this.currentSequenceNumber=e}}class fs{constructor(e){this.persistence=e,this.Jr=new is,this.Yr=null}static Zr(e){return new fs(e)}get Xr(){if(this.Yr)return this.Yr;throw I()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),ce.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Xr,n=>{const r=ee.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,J.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return ce.or([()=>ce.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class ms{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=cn(),r=cn();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ms(e,t.fromCache,n,r)}}class ps{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gs{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,l.nr)()?8:ue((0,l.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new ps;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(S()<=o.$b.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",Kt(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ce.resolve()):(S()<=o.$b.DEBUG&&E("QueryEngine","Query:",Kt(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(S()<=o.$b.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",Kt(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vt(t))):ce.resolve())}Yi(e,t){if(Mt(t))return ce.resolve(null);let n=Vt(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=qt(t,null,"F"),n=Vt(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=cn(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,qt(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return Mt(t)||r.isEqual(J.min())?ce.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?ce.resolve(null):(S()<=o.$b.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kt(t)),this.rs(e,i,t,ne(r,-1)).next(e=>e))})}ts(e,t){let n=new Ee(Jt(e));return t.forEach((t,r)=>{Gt(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return S()<=o.$b.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",Kt(t)),this.Ji.getDocumentsMatchingQuery(e,t,se.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class xs{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new je(K),this._s=new $t(e=>At(e),Dt),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ts(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function vs(e,t,n,r){return new xs(e,t,n,r)}async function bs(e,t){const n=D(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=cn();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function ys(e){const t=D(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function ws(e,t,n){let r=cn(),s=cn();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Zt();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(J.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):E("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function Ns(e,t){const n=D(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function js(e,t){const n=D(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,ce.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new Hr(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function ks(e,t,n){const r=D(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!de(e))throw e;E("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(s.target)}function Ss(e,t,n){const r=D(e);let s=J.min(),i=cn();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=D(e),s=r._s.get(n);return void 0!==s?ce.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,Vt(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:J.min(),n?i:cn())).next(e=>(Es(r,Qt(t),e),{documents:e,Ts:i})))}function Es(e,t,n){let r=e.us.get(t)||J.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Cs{constructor(){this.activeTargetIds=dn()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _s{constructor(){this.so=new Cs,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cs,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ts{_o(e){}shutdown(){}}class Is{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let As=null;function Ds(){return null===As?As=268435456+Math.round(2147483648*Math.random()):As++,"0x"+As.toString(16)}const Ps={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ls{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Rs="WebChannelConnection";class Os extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,s){const i=Ds(),a=this.xo(e,t.toUriEncodedString());E("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,s),this.No(e,a,o,n).then(t=>(E("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw _("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+j,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=Ps[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=Ds();return new Promise((i,a)=>{const o=new d;o.setWithCredentials(!0),o.listenOnce(f.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case m.NO_ERROR:const t=o.getResponseJson();E(Rs,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case m.TIMEOUT:E(Rs,"RPC '".concat(e,"' ").concat(s," timed out")),a(new L(P.DEADLINE_EXCEEDED,"Request time out"));break;case m.HTTP_ERROR:const n=o.getStatus();if(E(Rs,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(t)>=0?t:P.UNKNOWN}(t.status);a(new L(e,t.message))}else a(new L(P.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new L(P.UNAVAILABLE,"Connection failed."));break;default:I()}}finally{E(Rs,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);E(Rs,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Ds(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=v(),a=x(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");E(Rs,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);let d=!1,f=!1;const m=new Ls({Io:t=>{f?E(Rs,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(E(Rs,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),E(Rs,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),b=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(u,h.EventType.OPEN,()=>{f||(E(Rs,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),m.yo())}),b(u,h.EventType.CLOSE,()=>{f||(f=!0,E(Rs,"RPC '".concat(e,"' stream ").concat(r," transport closed")),m.So())}),b(u,h.EventType.ERROR,t=>{f||(f=!0,_(Rs,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),m.So(new L(P.UNAVAILABLE,"The operation could not be completed")))}),b(u,h.EventType.MESSAGE,t=>{var n;if(!f){const s=t.data[0];A(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){E(Rs,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Gn[e];if(void 0!==t)return Yn(t)}(t),s=a.message;void 0===n&&(n=P.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),f=!0,m.So(new L(n,s)),u.close()}else E(Rs,"RPC '".concat(e,"' stream ").concat(r," received:"),s),m.bo(s)}}),b(a,g.STAT_EVENT,t=>{t.stat===p.PROXY?E(Rs,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===p.NOPROXY&&E(Rs,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{m.wo()},0),m}}function Ms(){return"undefined"!=typeof document?document:null}function Fs(e){return new gr(e,!0)}class Us{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&E("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Vs{constructor(e,t,n,r,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Us(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(C(t.toString()),C("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===P.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new L(P.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return E("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zs extends Vs{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:I()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(A(void 0===t||"string"==typeof t),Ie.fromBase64String(t||"")):(A(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Ie.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?P.UNKNOWN:Yn(e.code);return new L(t,e.message||"")}(a);n=new lr(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Er(e,r.document.name),i=wr(r.document.updateTime),a=r.document.createTime?wr(r.document.createTime):J.min(),o=new st({mapValue:{fields:r.document.fields}}),l=at.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ar(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Er(e,r.document),i=r.readTime?wr(r.readTime):J.min(),a=at.newNoDocument(s,i),o=r.removedTargetIds||[];n=new ar([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Er(e,r.document),i=r.removedTargetIds||[];n=new ar([],i,s,null)}else{if(!("filter"in t))return I();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Kn(r,s),a=e.targetId;n=new or(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return J.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?J.min():t.readTime?wr(t.readTime):J.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Tr(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Pt(r)?{documents:Pr(e,r)}:{query:Lr(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=br(e,t.resumeToken);const r=xr(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(J.min())>0){n.readTime=vr(e,t.snapshotVersion.toTimestamp());const r=xr(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return I()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Tr(this.serializer),t.removeTarget=e,this.a_(t)}}class Bs extends Vs{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return A(!!e.streamToken),this.lastStreamToken=e.streamToken,A(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){A(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(A(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?wr(e.updateTime):wr(t);return n.isEqual(J.min())&&(n=wr(t)),new Cn(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=wr(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Tr(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Dr(this.serializer,e))};this.a_(t)}}class qs extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new L(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Mo(e,jr(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(P.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Lo(e,jr(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(P.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ws{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(C(t),this.D_=!1):E("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Hs{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{ei(this)&&(E("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=D(e);t.L_.add(4),await Gs(t),t.q_.set("Unknown"),t.L_.delete(4),await Ks(t)}(this))})}),this.q_=new Ws(n,r)}}async function Ks(e){if(ei(e))for(const t of e.B_)await t(!0)}async function Gs(e){for(const t of e.B_)await t(!1)}function Qs(e,t){const n=D(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Zs(n)?Xs(n):bi(n).r_()&&Ys(n,t))}function Js(e,t){const n=D(e),r=bi(n);n.N_.delete(t),r.r_()&&$s(n,t),0===n.N_.size&&(r.r_()?r.o_():ei(n)&&n.q_.set("Unknown"))}function Ys(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(J.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}bi(e).A_(t)}function $s(e,t){e.Q_.xe(t),bi(e).R_(t)}function Xs(e){e.Q_=new ur({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),bi(e).start(),e.q_.v_()}function Zs(e){return ei(e)&&!bi(e).n_()&&e.N_.size>0}function ei(e){return 0===D(e).L_.size}function ti(e){e.Q_=void 0}async function ni(e){e.q_.set("Online")}async function ri(e){e.N_.forEach((t,n)=>{Ys(e,t)})}async function si(e,t){ti(e),Zs(e)?(e.q_.M_(t),Xs(e)):e.q_.set("Unknown")}async function ii(e,t,n){if(e.q_.set("Online"),t instanceof lr&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){E("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ai(e,n)}else if(t instanceof ar?e.Q_.Ke(t):t instanceof or?e.Q_.He(t):e.Q_.We(t),!n.isEqual(J.min()))try{const t=await ys(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Ie.EMPTY_BYTE_STRING,r.snapshotVersion)),$s(e,t);const s=new Hr(r.target,t,n,r.sequenceNumber);Ys(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){E("RemoteStore","Failed to raise snapshot:",t),await ai(e,t)}}async function ai(e,t,n){if(!de(t))throw t;e.L_.add(1),await Gs(e),e.q_.set("Offline"),n||(n=()=>ys(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{E("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Ks(e)})}function oi(e,t){return t().catch(n=>ai(e,n,t))}async function li(e){const t=D(e),n=yi(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;ci(t);)try{const e=await Ns(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,ui(t,e)}catch(e){await ai(t,e)}di(t)&&hi(t)}function ci(e){return ei(e)&&e.O_.length<10}function ui(e,t){e.O_.push(t);const n=yi(e);n.r_()&&n.V_&&n.m_(t.mutations)}function di(e){return ei(e)&&!yi(e).n_()&&e.O_.length>0}function hi(e){yi(e).start()}async function fi(e){yi(e).p_()}async function mi(e){const t=yi(e);for(const n of e.O_)t.m_(n.mutations)}async function pi(e,t,n){const r=e.O_.shift(),s=Wn.from(r,t,n);await oi(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await li(e)}async function gi(e,t){t&&yi(e).V_&&await async function(e,t){if(function(e){return Jn(e)&&e!==P.ABORTED}(t.code)){const n=e.O_.shift();yi(e).s_(),await oi(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await li(e)}}(e,t),di(e)&&hi(e)}async function xi(e,t){const n=D(e);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");const r=ei(n);n.L_.add(3),await Gs(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Ks(n)}async function vi(e,t){const n=D(e);t?(n.L_.delete(2),await Ks(n)):t||(n.L_.add(2),await Gs(n),n.q_.set("Unknown"))}function bi(e){return e.K_||(e.K_=function(e,t,n){const r=D(e);return r.w_(),new zs(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:ni.bind(null,e),Ro:ri.bind(null,e),mo:si.bind(null,e),d_:ii.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Zs(e)?Xs(e):e.q_.set("Unknown")):(await e.K_.stop(),ti(e))})),e.K_}function yi(e){return e.U_||(e.U_=function(e,t,n){const r=D(e);return r.w_(),new Bs(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fi.bind(null,e),mo:gi.bind(null,e),f_:mi.bind(null,e),g_:pi.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await li(e)):(await e.U_.stop(),e.O_.length>0&&(E("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class wi{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new R,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new wi(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ni(e,t){if(C("AsyncQueue","".concat(t,": ").concat(e)),de(e))return new L(P.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class ji{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ee.comparator(t.key,n.key):(e,t)=>ee.comparator(e.key,t.key),this.keyedMap=tn(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new ji(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ji))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ji;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ki{constructor(){this.W_=new je(ee.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):I():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Si{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Si(e,t,ji.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wt(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ei{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Ci{constructor(){this.queries=_i(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=D(e),r=n.queries;n.queries=_i(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new L(P.ABORTED,"Firestore shutting down"))}}function _i(){return new $t(e=>Ht(e),Wt)}async function Ti(e,t){const n=D(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new Ei,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Ni(e,"Initialization of query '".concat(Kt(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&Pi(n)}async function Ii(e,t){const n=D(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ai(e,t){const n=D(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&Pi(n)}function Di(e,t,n){const r=D(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function Pi(e){e.Y_.forEach(e=>{e.next()})}var Li,Ri;(Ri=Li||(Li={})).ea="default",Ri.Cache="cache";class Oi{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Si(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Si.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Li.Cache}}class Mi{constructor(e){this.key=e}}class Fi{constructor(e){this.key=e}}class Ui{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=cn(),this.mutatedKeys=cn(),this.Aa=Jt(e),this.Ra=new ji(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new ki,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Gt(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return I()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==i.length||l?{snapshot:new Si(this.query,e.Ra,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ki,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=cn(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Fi(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Mi(n))}),t}ba(e){this.Ta=e.Ts,this.da=cn();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Si.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Vi{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class zi{constructor(e){this.key=e,this.va=!1}}class Bi{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new $t(e=>Ht(e),Wt),this.Ma=new Map,this.xa=new Set,this.Oa=new je(ee.comparator),this.Na=new Map,this.La=new is,this.Ba={},this.ka=new Map,this.qa=Xr.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function qi(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=ua(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Hi(r,t,n,!0),s}async function Wi(e,t){const n=ua(e);await Hi(n,t,!0,!1)}async function Hi(e,t,n,r){const s=await js(e.localStore,Vt(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Ki(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Qs(e.remoteStore,s),o}async function Ki(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await Ss(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return sa(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const i=await Ss(e.localStore,t,!0),a=new Ui(t,i.Ts),o=a.ma(i.documents),l=ir.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);sa(e,n,c.wa);const u=new Vi(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Gi(e,t,n){const r=D(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!Wt(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ks(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Js(r.remoteStore,s.targetId),na(r,s.targetId)}).catch(le)):(na(r,s.targetId),await ks(r.localStore,s.targetId,!0))}async function Qi(e,t){const n=D(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Js(n.remoteStore,r.targetId))}async function Ji(e,t){const n=D(e);try{const e=await function(e,t){const n=D(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Ie.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Ur.updateTargetData(e,c))});let o=Zt(),l=cn();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(ws(e,i,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(J.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return ce.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(A(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?A(r.va):e.removedDocuments.size>0&&(A(r.va),r.va=!1))}),await oa(n,e,t)}catch(e){await le(e)}}function Yi(e,t,n){const r=D(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=D(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&Pi(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function $i(e,t,n){const r=D(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new je(ee.comparator);e=e.insert(i,at.newNoDocument(i,J.min()));const n=cn().add(i),s=new sr(J.min(),new Map,new je(K),e,n);await Ji(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),aa(r)}else await ks(r.localStore,t,!1).then(()=>na(r,t,n)).catch(le)}async function Xi(e,t){const n=D(e),r=t.batch.batchId;try{const e=await function(e,t){const n=D(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=ce.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);A(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=cn();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);ta(n,r,null),ea(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oa(n,e)}catch(e){await le(e)}}async function Zi(e,t,n){const r=D(e);try{const e=await function(e,t){const n=D(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(A(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);ta(r,t,n),ea(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await oa(r,e)}catch(n){await le(n)}}function ea(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function ta(e,t,n){const r=D(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function na(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||ra(e,t)})}function ra(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Js(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),aa(e))}function sa(e,t,n){for(const r of n)r instanceof Mi?(e.La.addReference(r.key,t),ia(e,r)):r instanceof Fi?(E("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||ra(e,r.key)):I()}function ia(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(E("SyncEngine","New document in limbo: "+n),e.xa.add(r),aa(e))}function aa(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new ee($.fromString(t)),r=e.qa.next();e.Na.set(r,new zi(n)),e.Oa=e.Oa.insert(n,r),Qs(e.remoteStore,new Hr(Vt(Ot(n.path)),r,"TargetPurposeLimboResolution",he.oe))}}async function oa(e,t,n){const r=D(e),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=ms.Wi(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(e,t){const n=D(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ce.forEach(t,t=>ce.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ce.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!de(e))throw e;E("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function la(e,t){const n=D(e);if(!n.currentUser.isEqual(t)){E("SyncEngine","User change. New user:",t.toKey());const e=await bs(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new L(P.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await oa(n,e.hs)}}function ca(e,t){const n=D(e),r=n.Na.get(t);if(r&&r.va)return cn().add(r.key);{let e=cn();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function ua(e){const t=D(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ji.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ca.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$i.bind(null,t),t.Ca.d_=Ai.bind(null,t.eventManager),t.Ca.$a=Di.bind(null,t.eventManager),t}function da(e){const t=D(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Xi.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Zi.bind(null,t),t}class ha{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fs(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return vs(this.persistence,new gs,e.initialUser,this.serializer)}Ga(e){return new ds(fs.Zr,this.serializer)}Wa(e){return new _s}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ha.provider={build:()=>new ha};class fa{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Yi(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=la.bind(null,this.syncEngine),await vi(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ci}createDatastore(e){const t=Fs(e.databaseInfo.databaseId),n=function(e){return new Os(e)}(e.databaseInfo);return function(e,t,n,r){return new qs(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Hs(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Yi(this.syncEngine,e,0),Is.D()?new Is:new Ts)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Bi(e,t,n,r,s,i);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=D(e);E("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Gs(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}fa.provider={build:()=>new fa};class ma{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):C("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class pa{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=N.UNAUTHENTICATED,this.clientId=H.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{E("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(E("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new R;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ni(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ga(e,t){e.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await bs(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function xa(e,t){e.asyncQueue.verifyOperationInProgress();const n=await va(e);E("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>xi(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>xi(t.remoteStore,n)),e._onlineComponents=t}async function va(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{await ga(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===P.FAILED_PRECONDITION||e.code===P.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;_("Error using user provided cache. Falling back to memory cache: "+n),await ga(e,new ha)}}else E("FirestoreClient","Using default OfflineComponentProvider"),await ga(e,new ha);return e._offlineComponents}async function ba(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),await xa(e,e._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),await xa(e,new fa))),e._onlineComponents}function ya(e){return va(e).then(e=>e.localStore)}function wa(e){return ba(e).then(e=>e.syncEngine)}async function Na(e){const t=await ba(e),n=t.eventManager;return n.onListen=qi.bind(null,t.syncEngine),n.onUnlisten=Gi.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Wi.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Qi.bind(null,t.syncEngine),n}function ja(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new R;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new ma({next:o=>{i.Za(),t.enqueueAndForget(()=>Ii(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new L(P.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new L(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Oi(Ot(n.path),i,{includeMetadataChanges:!0,_a:!0});return Ti(e,a)}(await Na(e),e.asyncQueue,t,n,r)),r.promise}function ka(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new R;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new ma({next:n=>{i.Za(),t.enqueueAndForget(()=>Ii(e,a)),n.fromCache&&"server"===r.source?s.reject(new L(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Oi(n,i,{includeMetadataChanges:!0,_a:!0});return Ti(e,a)}(await Na(e),e.asyncQueue,t,n,r)),r.promise}function Sa(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ea=new Map;function Ca(e,t,n){if(!n)throw new L(P.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function _a(e){if(!ee.isDocumentKey(e))throw new L(P.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ta(e){if(ee.isDocumentKey(e))throw new L(P.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ia(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":I()}function Aa(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new L(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ia(e);throw new L(P.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Da{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new L(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new L(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new L(P.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sa(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new L(P.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new L(P.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new L(P.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pa{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Da({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new L(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Da(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new M;switch(e.type){case"firstParty":return new z(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new L(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ea.get(e);t&&(E("ComponentProvider","Removing Datastore"),Ea.delete(e),t.terminate())}(this),Promise.resolve()}}class La{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new La(this.firestore,e,this._query)}}class Ra{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ra(this.firestore,e,this._key)}}class Oa extends La{constructor(e,t,n){super(e,t,Ot(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ra(this.firestore,null,new ee(e))}withConverter(e){return new Oa(this.firestore,e,this._path)}}function Ma(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),Ca("collection","path",t),e instanceof Pa){const n=$.fromString(t,...r);return Ta(n),new Oa(e,null,n)}{if(!(e instanceof Ra||e instanceof Oa))throw new L(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($.fromString(t,...r));return Ta(n),new Oa(e.firestore,null,n)}}function Fa(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),1===arguments.length&&(t=H.newId()),Ca("doc","path",t),e instanceof Pa){const n=$.fromString(t,...r);return _a(n),new Ra(e,null,new ee(n))}{if(!(e instanceof Ra||e instanceof Oa))throw new L(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($.fromString(t,...r));return _a(n),new Ra(e.firestore,e instanceof Oa?e.converter:null,new ee(n))}}class Ua{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Us(this,"async_queue_retry"),this.Vu=()=>{const e=Ms();e&&E("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Ms();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Ms();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new R;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!de(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw C("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=wi.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&I()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Va(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class za extends Pa{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ua,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ua(e),this._firestoreClient=void 0,await e}}}function Ba(e,t){const n="object"==typeof e?e:(0,i.Sx)(),r="string"==typeof e?e:t||"(default)",s=(0,i.j6)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=Aa(e,Pa))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=N.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new L(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new N(i)}e._authCredentials=new F(new O(t,n))}}(s,...e)}return s}function qa(e){if(e._terminated)throw new L(P.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Wa(e),e._firestoreClient}function Wa(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Fe(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Sa(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new pa(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ha(Ie.fromBase64String(e))}catch(e){throw new L(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ha(Ie.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ka{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new L(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Z(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ga{constructor(e){this._methodName=e}}class Qa{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}}class Ja{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Ya=/^__.*__$/;class $a{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Mn(e,this.data,this.fieldMask,t,this.fieldTransforms):new On(e,this.data,t,this.fieldTransforms)}}class Xa{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Mn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Za(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw I()}}class eo{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new eo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return go(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Za(this.Cu)&&Ya.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class to{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Fs(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new eo({Cu:e,methodName:t,qu:n,path:Z.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function no(e){const t=e._freezeSettings(),n=Fs(e._databaseId);return new to(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ro(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);ho("Data must be an object, but it was:",a,r);const o=co(r,a);let l,c;if(i.merge)l=new _e(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=fo(t,r,n);if(!a.contains(s))throw new L(P.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));xo(e,s)||e.push(s)}l=new _e(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new $a(new st(o),l,c)}class so extends Ga{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof so}}function io(e,t,n,r){const s=e.Qu(1,t,n);ho("Data must be an object, but it was:",s,r);const i=[],a=st.empty();we(r,(e,r)=>{const o=po(t,e,n);r=(0,l.Ku)(r);const c=s.Nu(o);if(r instanceof so)i.push(o);else{const e=lo(r,c);null!=e&&(i.push(o),a.set(o,e))}});const o=new _e(i);return new Xa(a,o,s.fieldTransforms)}function ao(e,t,n,r,s,i){const a=e.Qu(1,t,n),o=[fo(t,r,n)],c=[s];if(i.length%2!=0)throw new L(P.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let l=0;l<i.length;l+=2)o.push(fo(t,i[l])),c.push(i[l+1]);const u=[],d=st.empty();for(let f=o.length-1;f>=0;--f)if(!xo(u,o[f])){const e=o[f];let t=c[f];t=(0,l.Ku)(t);const n=a.Nu(e);if(t instanceof so)u.push(e);else{const r=lo(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new _e(u);return new Xa(d,h,a.fieldTransforms)}function oo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return lo(n,e.Qu(r?4:3,t))}function lo(e,t){if(uo(e=(0,l.Ku)(e)))return ho("Unsupported field value:",t,e),co(e,t);if(e instanceof Ga)return function(e,t){if(!Za(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=lo(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mn(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Q.fromDate(e);return{timestampValue:vr(t.serializer,n)}}if(e instanceof Q){const n=new Q(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vr(t.serializer,n)}}if(e instanceof Qa)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ha)return{bytesValue:br(t.serializer,e._byteString)};if(e instanceof Ra){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Nr(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Ja)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return hn(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(Ia(e)))}(e,t)}function co(e,t){const n={};return Ne(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):we(e,(e,r)=>{const s=lo(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function uo(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Q||e instanceof Qa||e instanceof Ha||e instanceof Ra||e instanceof Ga||e instanceof Ja)}function ho(e,t,n){if(!uo(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ia(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function fo(e,t,n){if((t=(0,l.Ku)(t))instanceof Ka)return t._internalPath;if("string"==typeof t)return po(e,t);throw go("Field path arguments must be of type string or ",e,!1,void 0,n)}const mo=new RegExp("[~\\*/\\[\\]]");function po(e,t,n){if(t.search(mo)>=0)throw go("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ka(...t.split("."))._internalPath}catch(r){throw go("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function go(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new L(P.INVALID_ARGUMENT,o+e+l)}function xo(e,t){return e.some(e=>e.isEqual(t))}class vo{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ra(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bo(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yo("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bo extends vo{data(){return super.data()}}function yo(e,t){return"string"==typeof t?po(e,t):t instanceof Ka?t._internalPath:t._delegate._internalPath}function wo(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new L(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class No{}class jo extends No{}function ko(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof No&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Co).length,n=e.filter(e=>e instanceof So).length;if(t>1||t>0&&n>0)throw new L(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class So extends jo{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new So(e,t,n)}_apply(e){const t=this._parse(e);return Do(e._query,t),new La(e.firestore,e.converter,Bt(e._query,t))}_parse(e){const t=no(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new L(P.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Ao(a,i);const t=[];for(const n of a)t.push(Io(r,e,n));o={arrayValue:{values:t}}}else o=Io(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Ao(a,i),o=oo(n,t,a,"in"===i||"not-in"===i);return ft.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Eo(e,t,n){const r=t,s=yo("where",e);return So._create(s,r,n)}class Co extends No{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Co(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:mt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Do(n,s),n=Bt(n,s)}(e._query,t),new La(e.firestore,e.converter,Bt(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class _o extends jo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _o(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new L(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new L(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ut(t,n)}(e._query,this._field,this._direction);return new La(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Lt(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function To(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=yo("orderBy",e);return _o._create(n,t)}function Io(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ft(t)&&-1!==n.indexOf("/"))throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child($.fromString(n));if(!ee.isDocumentKey(r))throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Je(e,new ee(r))}if(n instanceof Ra)return Je(e,n._key);throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ia(n),"."))}function Ao(e,t){if(!Array.isArray(e)||0===e.length)throw new L(P.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Do(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new L(P.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new L(P.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Po{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ze(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Le(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw I()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return we(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Pe(e.doubleValue));return new Ja(s)}convertGeoPoint(e){return new Qa(Pe(e.latitude),Pe(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Oe(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Me(e));default:return null}}convertTimestamp(e){const t=De(e);return new Q(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=$.fromString(e);A(Wr(n));const r=new Ue(n.get(1),n.get(3)),s=new ee(n.popFirst(5));return r.isEqual(t)||C("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Lo(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ro{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oo extends vo{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Mo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(yo("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Mo extends Oo{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Fo{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ro(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Mo(this._firestore,this._userDataWriter,n.key,n,new Ro(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new L(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Mo(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ro(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Mo(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ro(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Uo(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Uo(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return I()}}function Vo(e){e=Aa(e,Ra);const t=Aa(e.firestore,za);return ja(qa(t),e._key).then(n=>Yo(t,e,n))}class zo extends Po{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ha(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ra(this.firestore,null,t)}}function Bo(e){e=Aa(e,La);const t=Aa(e.firestore,za),n=qa(t),r=new zo(t);return wo(e._query),ka(n,e._query).then(n=>new Fo(t,r,e,n))}function qo(e){e=Aa(e,La);const t=Aa(e.firestore,za),n=qa(t),r=new zo(t);return function(e,t){const n=new R;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await Ss(e,t,!0),s=new Ui(t,r.Ts),i=s.ma(r.documents),a=s.applyChanges(i,!1);n.resolve(a.snapshot)}catch(e){const r=Ni(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await ya(e),t,n)),n.promise}(n,e._query).then(n=>new Fo(t,r,e,n))}function Wo(e,t,n){e=Aa(e,Ra);const r=Aa(e.firestore,za),s=Lo(e.converter,t,n);return Jo(r,[ro(no(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,_n.none())])}function Ho(e,t,n){e=Aa(e,Ra);const r=Aa(e.firestore,za),s=no(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),c=3;c<a;c++)o[c-3]=arguments[c];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof Ka?ao(s,"updateDoc",e._key,t,n,o):io(s,"updateDoc",e._key,t),Jo(r,[i.toMutation(e._key,_n.exists(!0))])}function Ko(e){return Jo(Aa(e.firestore,za),[new zn(e._key,_n.none())])}function Go(e,t){const n=Aa(e.firestore,za),r=Fa(e),s=Lo(e.converter,t);return Jo(n,[ro(no(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,_n.exists(!1))]).then(()=>r)}function Qo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=(0,l.Ku)(e);let o={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||Va(n[c])||(o=n[c],c++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Va(n[c])){const e=n[c];n[c]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[c+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[c+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let d,h,f;if(e instanceof Ra)h=Aa(e.firestore,za),f=Ot(e._key.path),d={next:t=>{n[c]&&n[c](Yo(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Aa(e,La);h=Aa(t.firestore,za),f=t._query;const r=new zo(h);d={next:e=>{n[c]&&n[c](new Fo(h,r,t,e))},error:n[c+1],complete:n[c+2]},wo(e._query)}return function(e,t,n,r){const s=new ma(r),i=new Oi(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>Ti(await Na(e),i)),()=>{s.Za(),e.asyncQueue.enqueueAndForget(async()=>Ii(await Na(e),i))}}(qa(h),f,u,d)}function Jo(e,t){return function(e,t){const n=new R;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=da(e);try{const e=await function(e,t){const n=D(e),r=Q.now(),s=t.reduce((e,t)=>e.add(t.key),cn());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Zt(),l=cn();return n.cs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Ln(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Mn(e.key,t,it(t.value.mapValue),_n.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:nn(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new je(K)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await oa(r,e.changes),await li(r.remoteStore)}catch(e){const t=Ni(e,"Failed to persist write");n.reject(t)}}(await wa(e),t,n)),n.promise}(qa(e),t)}function Yo(e,t,n){const r=n.docs.get(t._key),s=new zo(e);return new Oo(e,s,t._key,r,new Ro(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){j=e}(i.MF),(0,i.om)(new a.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new za(new U(e.getProvider("auth-internal")),new q(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new L(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ue(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,i.KO)(w,"4.7.3",e),(0,i.KO)(w,"4.7.3","esm2017")}()},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},579:(e,t,n)=>{e.exports=n(153)},700:(e,t,n)=>{n.d(t,{Am:()=>A,FA:()=>E,Fy:()=>p,I9:()=>D,Im:()=>_,Ku:()=>M,T9:()=>h,Tj:()=>u,Uj:()=>a,XA:()=>f,ZQ:()=>g,bD:()=>T,c1:()=>v,cY:()=>m,eX:()=>k,g:()=>S,hp:()=>P,jZ:()=>x,lT:()=>w,lV:()=>y,nr:()=>N,sr:()=>b,tD:()=>L,u:()=>o,yU:()=>d,zW:()=>j});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const o=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==a||null==o||null==l)throw new i;const c=t<<2|a>>4;if(r.push(c),64!==o){const e=a<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const l=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{try{return l()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&o(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=c())||void 0===t?void 0:t["_".concat(e)]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(i)),""].join(".")}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function x(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function v(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function b(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function y(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function w(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function N(){return!function(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){try{return"object"===typeof indexedDB}catch(e){return!1}}function k(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class S extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E.prototype.create)}}class E{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(C,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new S(n,i,t)}}const C=/\{\$([^}]+)}/g;function _(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function T(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(I(n)&&I(i)){if(!T(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function I(e){return null!==e&&"object"===typeof e}function A(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function D(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function P(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function L(e,t){const n=new R(e,t);return n.subscribe.bind(n)}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=O),void 0===r.error&&(r.error=O),void 0===r.complete&&(r.complete=O);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O(){}function M(e){return e&&e._delegate?e._delegate:e}},717:(e,t,n)=>{var r=n(43),s=n(461);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=s.useSyncExternalStore,o=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==s&&h.hasValue){var t=h.value;if(s(t,e))return o=t}return o=e}if(t=o,i(a,e))return t;var n=r(e);return void 0!==s&&s(t,n)?(a=e,t):(a=e,o=n)}var a,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,s]);var f=a(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,v);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var O,M=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case N:return"Portal";case S:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ie(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var xe=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,je=null,ke=null;function Se(e){if(e=bs(e)){if("function"!==typeof Ne)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),Ne(e.stateNode,e.type,t))}}function Ee(e){je?ke?ke.push(e):ke=[e]:je=e}function Ce(){if(je){var e=je,t=ke;if(ke=je=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function _e(e,t){return e(t)}function Te(){}var Ie=!1;function Ae(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return _e(e,t,n)}finally{Ie=!1,(null!==je||null!==ke)&&(Te(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Pe=!1}function Re(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Oe=!0,Me=e}};function ze(e,t,n,r,s,i,a,o,l){Oe=!1,Me=null,Re.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return We(s),e;if(a===r)return We(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=s.unstable_scheduleCallback,Qe=s.unstable_cancelCallback,Je=s.unstable_shouldYield,Ye=s.unstable_requestPaint,$e=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=dt(o):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~s)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,jt,kt,St,Et=!1,Ct=[],_t=null,Tt=null,It=null,At=new Map,Dt=new Map,Pt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Ot(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=vs(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,function(){jt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ye=r,n.target.dispatchEvent(r),ye=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Et=!1,null!==_t&&Ft(_t)&&(_t=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),At.forEach(Ut),Dt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&zt(_t,e),null!==Tt&&zt(Tt,e),null!==It&&zt(It,e),At.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var qt=y.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Kt(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Gt(e,t,n,r){if(Wt){var s=Jt(e,t,n,r);if(null===s)Wr(e,t,r,Qt,n),Rt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return _t=Ot(_t,e,t,n,r,s),!0;case"dragenter":return Tt=Ot(Tt,e,t,n,r,s),!0;case"mouseover":return It=Ot(It,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return At.set(i,Ot(At.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dt.set(i,Ot(Dt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==s;){var i=bs(s);if(null!==i&&wt(i),null===(i=Jt(e,t,n,r))&&Wr(e,t,r,Qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=vs(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,s="value"in $t?$t.value:$t.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(fn),pn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),xn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),yn=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function Sn(){return kn}var En=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(En),_n=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(An),Pn=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var On=u&&"TextEvent"in window&&!Rn,Mn=u&&(!Ln||Rn&&8<Rn&&11>=Rn),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ee(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Jn(e){if(G(ys(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Jn(Gn)){var t=[];Hn(t,Gn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Gn)}function ir(e,t){if("click"===e)return Jn(t)}function ar(e,t){if("input"===e||"change"===e)return Jn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,xr=null,vr=null,br=!1;function yr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(xr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},jr={},kr={};function Sr(e){if(jr[e])return jr[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return jr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var Er=Sr("animationend"),Cr=Sr("animationiteration"),_r=Sr("animationstart"),Tr=Sr("transitionend"),Ir=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ir.set(e,t),l(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Lr=Ar[Pr];Dr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Dr(Er,"onAnimationEnd"),Dr(Cr,"onAnimationIteration"),Dr(_r,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(ze.apply(this,arguments),Oe){if(!Oe)throw Error(i(198));var u=Me;Oe=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[ps];void 0===n&&(n=t[ps]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Or.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var s=Ht;break;case 4:s=Kt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=vs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=i,s=we(n),a=[];e:{var o=Ir.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Er:case Cr:case _r:l=xn;break;case Tr:l=In;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_n}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=De(m,h))&&u.push(Hr(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ye||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ms])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=_n,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:ys(l),f=null==c?o:ys(c),(o=new u(p,m+"leave",l,n,s)).target=d,o.relatedTarget=f,p=null,vs(s)===r&&((u=new u(h,m+"enter",c,n,s)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=Gr(f))m++;for(f=0,p=h;p;p=Gr(p))f++;for(;0<m-f;)u=Gr(u),m--;for(;0<f-m;)h=Gr(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(o=r?ys(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Wn(o))if($n)g=ar;else{g=sr;var x=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(a,g,n,s):(x&&x(e,o,r),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ee(o,"number",o.value)),x=r?ys(r):window,e){case"focusin":(Wn(x)||"true"===x.contentEditable)&&(gr=x,xr=r,vr=null);break;case"focusout":vr=xr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,yr(a,n,s);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":yr(a,n,s)}var v;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Xt="value"in($t=s)?$t.value:$t.textContent,Bn=!0)),0<(x=Kr(r,b)).length&&(b=new yn(b,e,null,n,s),a.push({event:b,listeners:x}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=On?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Ln&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(s=new yn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Fr(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=De(e,n))&&r.unshift(Hr(e,i,s)),null!=(i=De(e,t))&&r.push(Hr(e,i,s))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=De(n,i))&&a.unshift(Hr(n,l,o)):s||null!=(l=De(n,i))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,fs="__reactProps$"+ds,ms="__reactContainer$"+ds,ps="__reactEvents$"+ds,gs="__reactListeners$"+ds,xs="__reactHandles$"+ds;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ys(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[fs]||null}var Ns=[],js=-1;function ks(e){return{current:e}}function Ss(e){0>js||(e.current=Ns[js],Ns[js]=null,js--)}function Es(e,t){js++,Ns[js]=e.current,e.current=t}var Cs={},_s=ks(Cs),Ts=ks(!1),Is=Cs;function As(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ps(){Ss(Ts),Ss(_s)}function Ls(e,t,n){if(_s.current!==Cs)throw Error(i(168));Es(_s,t),Es(Ts,n)}function Rs(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,q(e)||"Unknown",s));return M({},n,r)}function Os(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,Is=_s.current,Es(_s,e),Es(Ts,Ts.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Rs(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,Ss(Ts),Ss(_s),Es(_s,e)):Ss(Ts),Es(Ts,n)}var Fs=null,Us=!1,Vs=!1;function zs(e){null===Fs?Fs=[e]:Fs.push(e)}function Bs(){if(!Vs&&null!==Fs){Vs=!0;var e=0,t=bt;try{var n=Fs;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Us=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ge(Ze,Bs),s}finally{bt=t,Vs=!1}}return null}var qs=[],Ws=0,Hs=null,Ks=0,Gs=[],Qs=0,Js=null,Ys=1,$s="";function Xs(e,t){qs[Ws++]=Ks,qs[Ws++]=Hs,Hs=e,Ks=t}function Zs(e,t,n){Gs[Qs++]=Ys,Gs[Qs++]=$s,Gs[Qs++]=Js,Js=e;var r=Ys;e=$s;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ys=1<<32-at(t)+s|n<<s|r,$s=i+e}else Ys=1<<i|n<<s|r,$s=e}function ei(e){null!==e.return&&(Xs(e,1),Zs(e,1,0))}function ti(e){for(;e===Hs;)Hs=qs[--Ws],qs[Ws]=null,Ks=qs[--Ws],qs[Ws]=null;for(;e===Js;)Js=Gs[--Qs],Gs[Qs]=null,$s=Gs[--Qs],Gs[Qs]=null,Ys=Gs[--Qs],Gs[Qs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Js?{id:Ys,overflow:$s}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function mi(e){null===ii?ii=[e]:ii.push(e)}var pi=y.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function xi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===j?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case N:return(t=Fc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;xi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case D:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||R(n))return null!==s?null:d(e,t,n,r,null);xi(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case D:return m(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||R(r))return d(t,e=e.get(n)||null,r,s,null);xi(t,r)}return null}function p(s,i,o,l){for(var c=null,u=null,d=i,p=i=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var x=f(s,d,o[p],l);if(null===x){null===d&&(d=g);break}e&&d&&null===x.alternate&&t(s,d),i=a(x,i,p),null===u?c=x:u.sibling=x,u=x,d=g}if(p===o.length)return n(s,d),si&&Xs(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(i=a(d,i,p),null===u?c=d:u.sibling=d,u=d);return si&&Xs(s,p),c}for(d=r(s,d);p<o.length;p++)null!==(g=m(d,s,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),i=a(g,i,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),si&&Xs(s,p),c}function g(s,o,l,c){var u=R(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,p=o,g=o=0,x=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(x=p,p=null):x=p.sibling;var b=f(s,p,v.value,c);if(null===b){null===p&&(p=x);break}e&&p&&null===b.alternate&&t(s,p),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,p=x}if(v.done)return n(s,p),si&&Xs(s,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return si&&Xs(s,g),u}for(p=r(s,p);!v.done;g++,v=l.next())null!==(v=m(p,s,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(s,e)}),si&&Xs(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===j&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===j){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&vi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===j?((i=Rc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fc(a,r.mode,l)).return=r,r=i}return o(r);case D:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return p(r,i,a,l);if(R(a))return g(r,i,a,l);xi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Mc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var yi=bi(!0),wi=bi(!1),Ni=ks(null),ji=null,ki=null,Si=null;function Ei(){Si=ki=ji=null}function Ci(e){var t=Ni.current;Ss(Ni),e._currentValue=t}function _i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){ji=e,Si=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ii(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===ji)throw Error(i(308));ki=e,ji.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Ai=null;function Di(e){null===Ai?Ai=[e]:Ai.push(e)}function Pi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Di(t)):(n.next=s.next,s.next=n),t.interleaved=n,Li(e,r)}function Li(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function Oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_l)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Li(e,n)}return null===(s=r.interleaved)?(t.next=t,Di(r)):(t.next=s.next,s.next=t),r.interleaved=t,Li(e,n)}function Vi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bi(e,t,n,r){var s=e.updateQueue;Ri=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=M({},d,h);break e;case 2:Ri=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=d}}function qi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Wi={},Hi=ks(Wi),Ki=ks(Wi),Gi=ks(Wi);function Qi(e){if(e===Wi)throw Error(i(174));return e}function Ji(e,t){switch(Es(Gi,t),Es(Ki,e),Es(Hi,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(Hi),Es(Hi,t)}function Yi(){Ss(Hi),Ss(Ki),Ss(Gi)}function $i(e){Qi(Gi.current);var t=Qi(Hi.current),n=le(t,e.type);t!==n&&(Es(Ki,e),Es(Hi,n))}function Xi(e){Ki.current===e&&(Ss(Hi),Ss(Ki))}var Zi=ks(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=y.ReactCurrentDispatcher,sa=y.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(i(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Xa:Za,e=n(r,s),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(ua)}if(ra.current=$a,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==da;return da=0,e}function xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function va(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function ya(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ia&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ol|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Ol|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function ja(e,t){var n=aa,r=va(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,bo=!0),r=r.queue,Ra(Ea.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,Sa.bind(null,n,r,s,t),void 0,null),null===Tl)throw Error(i(349));0!==(30&ia)||ka(n,t,s)}return s}function ka(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&_a(e)}function Ea(e,t,n){return n(function(){Ca(t)&&_a(e)})}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function _a(e){var t=Li(e,1);null!==t&&nc(t,e,1,-1)}function Ta(e){var t=xa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return va().memoizedState}function Da(e,t,n,r){var s=xa();aa.flags|=e,s.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var s=va();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&ma(r,a.deps))return void(s.memoizedState=Ia(t,n,i,r))}aa.flags|=e,s.memoizedState=Ia(1|t,n,i,r)}function La(e,t){return Da(8390656,8,e,t)}function Ra(e,t){return Pa(2048,8,e,t)}function Oa(e,t){return Pa(4,2,e,t)}function Ma(e,t){return Pa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Fa.bind(null,t,e),n)}function Va(){}function za(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),aa.lanes|=n,Ol|=n,e.baseState=!0),t)}function Wa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Ha(){return va().memoizedState}function Ka(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Ja(t,n);else if(null!==(n=Pi(e,t,n,r))){nc(n,e,r,ec()),Ya(n,t,r)}}function Ga(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Ja(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Di(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Pi(e,t,s,r))&&(nc(n,e,r,s=ec()),Ya(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ja(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $a={readContext:Ii,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Xa={readContext:Ii,useCallback:function(e,t){return xa().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=xa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xa().memoizedState=e},useState:Ta,useDebugValue:Va,useDeferredValue:function(e){return xa().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=Wa.bind(null,e[1]),xa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=xa();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Tl)throw Error(i(349));0!==(30&ia)||ka(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,La(Ea.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,Sa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=xa(),t=Tl.identifierPrefix;if(si){var n=$s;t=":"+t+"R"+(n=(Ys&~(1<<32-at(Ys)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ii,useCallback:za,useContext:Ii,useEffect:Ra,useImperativeHandle:Ua,useInsertionEffect:Oa,useLayoutEffect:Ma,useMemo:Ba,useReducer:ya,useRef:Aa,useState:function(){return ya(ba)},useDebugValue:Va,useDeferredValue:function(e){return qa(va(),oa.memoizedState,e)},useTransition:function(){return[ya(ba)[0],va().memoizedState]},useMutableSource:Na,useSyncExternalStore:ja,useId:Ha,unstable_isNewReconciler:!1},eo={readContext:Ii,useCallback:za,useContext:Ii,useEffect:Ra,useImperativeHandle:Ua,useInsertionEffect:Oa,useLayoutEffect:Ma,useMemo:Ba,useReducer:wa,useRef:Aa,useState:function(){return wa(ba)},useDebugValue:Va,useDeferredValue:function(e){var t=va();return null===oa?t.memoizedState=e:qa(t,oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],va().memoizedState]},useMutableSource:Na,useSyncExternalStore:ja,useId:Ha,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(nc(t,e,s,r),Vi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(nc(t,e,s,r),Vi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ui(e,s,r))&&(nc(t,e,r,n),Vi(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=Cs,i=t.contextType;return"object"===typeof i&&null!==i?i=Ii(i):(s=Ds(t)?Is:_s.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?As(e,s):Cs),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Oi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ii(i):(i=Ds(t)?Is:_s.current,s.context=As(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),Bi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),uo(0,t)},n}function mo(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var vo=y.ReactCurrentOwner,bo=!1;function yo(e,t,n,r){t.child=null===e?wi(t,null,n,r):yi(t,e.child,n,r)}function wo(e,t,n,r,s){n=n.render;var i=t.ref;return Ti(t,s),r=pa(e,t,n,r,i,s),n=ga(),null===e||bo?(si&&n&&ei(t),t.flags|=1,yo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function No(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Dc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,jo(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Wo(e,t,s)}return t.flags|=1,(e=Pc(i,r)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Wo(e,t,s);0!==(131072&e.flags)&&(bo=!0)}}return Eo(e,t,n,r,s)}function ko(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Es(Pl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Es(Pl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Es(Pl,Dl),Dl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Es(Pl,Dl),Dl|=r;return yo(e,t,s,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,r,s){var i=Ds(n)?Is:_s.current;return i=As(t,i),Ti(t,s),n=pa(e,t,n,r,i,s),r=ga(),null===e||bo?(si&&r&&ei(t),t.flags|=1,yo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function Co(e,t,n,r,s){if(Ds(n)){var i=!0;Os(t)}else i=!1;if(Ti(t,s),null===t.stateNode)qo(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ii(c):c=As(t,c=Ds(n)?Is:_s.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Ri=!1;var h=t.memoizedState;a.state=h,Bi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Ts.current||Ri?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Ri||so(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Mi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ii(l):l=As(t,l=Ds(n)?Is:_s.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Ri=!1,h=t.memoizedState,a.state=h,Bi(t,r,a,s);var m=t.memoizedState;o!==d||h!==m||Ts.current||Ri?("function"===typeof f&&(no(t,n,f,r),m=t.memoizedState),(c=Ri||so(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _o(e,t,n,r,i,s)}function _o(e,t,n,r,s,i){So(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ms(t,n,!1),Wo(e,t,i);r=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=yi(t,e.child,null,i),t.child=yi(t,null,o,i)):yo(e,t,o,i),t.memoizedState=r.state,s&&Ms(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Ls(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ls(0,t.context,!1),Ji(e,t.containerInfo)}function Io(e,t,n,r,s){return fi(),mi(s),t.flags|=256,yo(e,t,n,r),t.child}var Ao,Do,Po,Lo,Ro={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Es(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,s,0,null),e=Rc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(n),t.memoizedState=Ro,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Oc({mode:"visible",children:r.children},s,0,null),(a=Rc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&yi(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=Ro,a);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Tl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Li(e,s),nc(r,e,s,-1))}return pc(),Uo(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Gs[Qs++]=Ys,Gs[Qs++]=$s,Gs[Qs++]=Js,Ys=e.id,$s=e.overflow,Js=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Pc(r,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,s}return e=(o=e.child).sibling,s=Pc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&mi(r),yi(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_i(e.return,t,n)}function zo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Bo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(yo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Es(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),zo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}zo(t,!0,n,null,i);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ds(t.type)&&Ps(),Ko(t),null;case 3:return r=t.stateNode,Yi(),Ss(Ts),Ss(_s),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Do(e,t),Ko(t),null;case 5:Xi(t);var s=Qi(Gi.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ko(t),null}if(e=Qi(Hi.current),di(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[fs]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(s=0;s<Rr.length;s++)Ur(Rr[s],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":se(r,a),Ur("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[fs]=r,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),s=r;break;case"iframe":case"object":case"embed":Ur("load",e),s=r;break;case"video":case"audio":for(s=0;s<Rr.length;s++)Ur(Rr[s],e);s=r;break;case"source":Ur("error",e),s=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),s=r;break;case"details":Ur("toggle",e),s=r;break;case"input":Y(e,r),s=J(e,r),Ur("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Ur("invalid",e)}for(a in ve(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi(Gi.current),Qi(Hi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Ko(t),null;case 13:if(Ss(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Ll&&(Ll=3):pc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Yi(),Do(e,t),null===e&&Br(t.stateNode.containerInfo),Ko(t),null;case 10:return Ci(t.type._context),Ko(t),null;case 19:if(Ss(Zi),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Es(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Bl&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Ko(t),null}else 2*$e()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=Zi.current,Es(Zi,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Qo(e,t){switch(ti(t),t.tag){case 1:return Ds(t.type)&&Ps(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yi(),Ss(Ts),Ss(_s),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(Ss(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(Zi),null;case 4:return Yi(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Po=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qi(Hi.current);var i,a=null;switch(n){case"input":s=J(e,s),r=J(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Lo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,Yo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[fs],delete t[ps],delete t[gs],delete t[xs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Yo||Zo(n,t);case 6:var r=ul,s=dl;ul=null,hl(e,t,n),dl=s,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Bt(e)):ls(ul,n.stateNode));break;case 4:r=ul,s=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=s;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!Yo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,hl(e,t,n),Yo=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var r=_c.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(a,o,s),ul=null,dl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){kc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),xl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:pl(t,e),xl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(pl(t,e),xl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(s,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):b(s,d,h,u)}switch(l){case"input":X(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(s,!!a.multiple,m,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(g){kc(e,e.return,g)}}break;case 6:if(pl(t,e),xl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){kc(e,e.return,g)}}break;case 3:if(pl(t,e),xl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:pl(t,e),xl(e);break;case 13:pl(t,e),xl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(zl=$e())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||d,pl(t,e),Yo=u):pl(t,e),xl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(m=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==m?(m.return=f,Xo=m):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),xl(e),4&r&&ml(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var s=Xo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Jo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Jo;var c=Yo;if(Jo=a,(Yo=l)&&!c)for(Xo=s;null!==Xo;)l=(a=Xo).child,22===a.tag&&null!==a.memoizedState?Nl(s):null!==l?(l.return=a,Xo=l):Nl(s);for(;null!==i;)Xo=i,bl(i,t,n),i=i.sibling;Xo=s,Jo=o,Yo=c}yl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Xo=i):yl(e)}}function yl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}Yo||512&t.flags&&sl(t)}catch(f){kc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function Nl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){kc(t,s,l)}}var i=t.return;try{sl(t)}catch(l){kc(t,i,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){kc(t,a,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var jl,kl=Math.ceil,Sl=y.ReactCurrentDispatcher,El=y.ReactCurrentOwner,Cl=y.ReactCurrentBatchConfig,_l=0,Tl=null,Il=null,Al=0,Dl=0,Pl=ks(0),Ll=0,Rl=null,Ol=0,Ml=0,Fl=0,Ul=null,Vl=null,zl=0,Bl=1/0,ql=null,Wl=!1,Hl=null,Kl=null,Gl=!1,Ql=null,Jl=0,Yl=0,$l=null,Xl=-1,Zl=0;function ec(){return 0!==(6&_l)?$e():-1!==Xl?Xl:Xl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&_l)&&0!==Al?Al&-Al:null!==pi.transition?(0===Zl&&(Zl=pt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,$l=null,Error(i(185));xt(e,n,r),0!==(2&_l)&&e===Tl||(e===Tl&&(0===(2&_l)&&(Ml|=n),4===Ll&&oc(e,Al)),rc(e,r),1===n&&0===_l&&0===(1&t.mode)&&(Bl=$e()+500,Us&&Bs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Tl?Al:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Us=!0,zs(e)}(lc.bind(null,e)):zs(lc.bind(null,e)),as(function(){0===(6&_l)&&Bs()}),n=null;else{switch(yt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Xl=-1,Zl=0,0!==(6&_l))throw Error(i(327));var n=e.callbackNode;if(Nc()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=_l;_l|=2;var a=mc();for(Tl===e&&Al===t||(ql=null,Bl=$e()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ei(),Sl.current=a,_l=s,null!==Il?t=0:(Tl=null,Al=0,t=Ll)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(r=s,t=ic(e,s))),1===t)throw n=Rl,hc(e,0),oc(e,r),rc(e,$e()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(a=mt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Rl,hc(e,0),oc(e,r),rc(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Vl,ql);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=zl+500-$e())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(wc.bind(null,e,Vl,ql),t);break}wc(e,Vl,ql);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=rs(wc.bind(null,e,Vl,ql),r);break}wc(e,Vl,ql);break;default:throw Error(i(329))}}}return rc(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function oc(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&_l))throw Error(i(327));Nc();var t=ht(e,0);if(0===(1&t))return rc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rl,hc(e,0),oc(e,t),rc(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,ql),rc(e,$e()),null}function cc(e,t){var n=_l;_l|=1;try{return e(t)}finally{0===(_l=n)&&(Bl=$e()+500,Us&&Bs())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&_l)&&Nc();var t=_l;_l|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(_l=t))&&Bs()}}function dc(){Dl=Pl.current,Ss(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ps();break;case 3:Yi(),Ss(Ts),Ss(_s),na();break;case 5:Xi(r);break;case 4:Yi();break;case 13:case 19:Ss(Zi);break;case 10:Ci(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Il=e=Pc(e.current,null),Al=Dl=t,Ll=0,Rl=null,Fl=Ml=Ol=0,Vl=Ul=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ai=null}return e}function fc(e,t){for(;;){var n=Il;try{if(Ei(),ra.current=$a,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,ua=!1,da=0,El.current=null,null===n||null===n.return){Ll=1,Rl=t,Il=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,xo(m,o,l,0,t),1&m.mode&&po(a,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){po(a,u,t),pc();break e}c=Error(i(426))}else if(si&&1&l.mode){var x=go(o);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xo(x,o,l,0,t),mi(lo(c,l));break e}}a=c=lo(c,l),4!==Ll&&(Ll=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zi(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zi(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}yc(n)}catch(y){t=y,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=Sl.current;return Sl.current=$a,null===e?$a:e}function pc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Tl||0===(268435455&Ol)&&0===(268435455&Ml)||oc(Tl,Al)}function gc(e,t){var n=_l;_l|=2;var r=mc();for(Tl===e&&Al===t||(ql=null,hc(e,t));;)try{xc();break}catch(s){fc(e,s)}if(Ei(),_l=n,Sl.current=r,null!==Il)throw Error(i(261));return Tl=null,Al=0,Ll}function xc(){for(;null!==Il;)bc(Il)}function vc(){for(;null!==Il&&!Je();)bc(Il)}function bc(e){var t=jl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?yc(e):Il=t,El.current=null}function yc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Dl)))return void(Il=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Ll=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Ll&&(Ll=5)}function wc(e,t,n){var r=bt,s=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{Nc()}while(null!==Ql);if(0!==(6&_l))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Tl&&(Il=Tl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Tc(tt,function(){return Nc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=_l;_l|=4,El.current=null,function(e,t){if(es=Wt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Wt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,x=p.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),x);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(i(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}p=tl,tl=!1}(e,n),gl(n,e),mr(ts),Wt=!!es,ts=es=null,e.current=n,vl(n,e,s),Ye(),_l=l,bt=o,Cl.transition=a}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Jl=s),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Jl)&&0!==e.tag&&Nc(),a=e.pendingLanes,0!==(1&a)?e===$l?Yl++:(Yl=0,$l=e):Yl=0,Bs()}(e,t,n,r)}finally{Cl.transition=s,bt=r}return null}function Nc(){if(null!==Ql){var e=yt(Jl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Jl=0,0!==(6&_l))throw Error(i(331));var s=_l;for(_l|=4,Xo=e.current;null!==Xo;){var a=Xo,o=a.child;if(0!==(16&Xo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var f=(d=Xo).sibling,m=d.return;if(il(d),d===u){Xo=null;break}if(null!==f){f.return=m,Xo=f;break}Xo=m}}}var p=a.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Xo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(a=Xo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Xo=v;break e}Xo=a.return}}var b=e.current;for(Xo=b;null!==Xo;){var y=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==y)y.return=o,Xo=y;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(N){kc(l,l.return,N)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(_l=s,Bs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(N){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function jc(e,t,n){e=Ui(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(xt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Ui(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(xt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Al&n)===n&&(4===Ll||3===Ll&&(130023424&Al)===Al&&500>$e()-zl?hc(e,0):Fl|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Li(e,t))&&(xt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function _c(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Ec(e,n)}function Tc(e,t){return Ge(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Ic(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return Rc(n.children,s,a,t);case k:o=8,s|=8;break;case S:return(e=Ac(12,n,t,2|s)).elementType=S,e.lanes=a,e;case T:return(e=Ac(13,n,t,s)).elementType=T,e.lanes=a,e;case I:return(e=Ac(19,n,t,s)).elementType=I,e.lanes=a,e;case P:return Oc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case C:o=9;break e;case _:o=11;break e;case A:o=14;break e;case D:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Rc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,s,i,a,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ac(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oi(i),e}function zc(e){if(!e)return Cs;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ds(n))return Rs(e,n,t)}return t}function Bc(e,t,n,r,s,i,a,o,l){return(e=Vc(n,r,!0,e,0,i,0,o,l)).context=zc(null),n=e.current,(i=Fi(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,s),e.current.lanes=s,xt(e,s,r),rc(e,r),e}function qc(e,t,n,r){var s=t.current,i=ec(),a=tc(s);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(s,t,a))&&(nc(e,s,a,i),Vi(e,s,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ts.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:To(t),fi();break;case 5:$i(t);break;case 1:Ds(t.type)&&Os(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Es(Ni,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Es(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(Es(Zi,1&Zi.current),null!==(e=Wo(e,t,n))?e.sibling:null);Es(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Es(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Wo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,si&&0!==(1048576&t.flags)&&Zs(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var s=As(t,_s.current);Ti(t,n),s=pa(null,t,r,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(r)?(a=!0,Os(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Oi(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=_o(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),yo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===A)return 14}return 2}(r),e=to(r,e),s){case 0:t=Eo(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=No(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Eo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(To(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Mi(e,t),Bi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Io(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=Io(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Wo(e,t,n);break e}yo(e,t,r,n)}t=t.child}return t;case 5:return $i(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),So(e,t),yo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Mo(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=yi(t,null,r,n):yo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return yo(e,t,t.pendingProps,n),t.child;case 8:case 12:return yo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Es(Ni,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Ts.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),_i(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),_i(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}yo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ti(t,n),r=r(s=Ii(s)),t.flags|=1,yo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),No(e,t,r,s=to(r.type,s),n);case 15:return jo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),qo(e,t),t.tag=1,Ds(r)?(e=!0,Os(t)):e=!1,Ti(t,n),io(t,r,s),oo(t,r,s,n),_o(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return ko(e,t,n)}throw Error(i(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Wc(a);o.call(e)}}qc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Wc(a);i.call(e)}}var a=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[ms]=a.current,Br(8===e.nodeType?e.parentNode:e),uc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[ms]=l.current,Br(8===e.nodeType?e.parentNode:e),uc(function(){qc(t,l,n,r)}),l}(n,t,e,s,r);return Wc(a)}Jc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));qc(e,t,null,null)},Jc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){qc(null,e,null,null)}),t[ms]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,$e()),0===(6&_l)&&(Bl=$e()+500,Bs()))}break;case 13:uc(function(){var t=Li(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},Nt=function(e){if(13===e.tag){var t=Li(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),n=Li(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},kt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ne=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));G(r),X(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[bs,ys,ws,Ee,Ce,cc]},tu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{st=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",s=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,s),e[ms]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ms]=t.current,Br(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Jc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},812:(e,t,n)=>{n.d(t,{h1:()=>o,uA:()=>s});var r=n(700);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===i?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},824:(e,t,n)=>{e.exports=n(717)},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,s=n(43),i=n.t(s,2),a=n(391),o=n(950),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function x(e,t,n,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,l=r.Pop,h=null,g=x();function x(){return(o.state||{idx:null}).idx}function v(){l=r.Pop;let e=x(),t=null==e?null:e-g;g=e,h&&h({action:l,location:y.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let y={get action(){return l},get location(){return e(i,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(u,v),h=e,()=>{i.removeEventListener(u,v),h=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let s=m(y.location,e,t);n&&n(s,e),g=x()+1;let c=f(s,g),u=y.createHref(s);try{o.pushState(c,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;i.location.assign(u)}a&&h&&h({action:l,location:y.location,delta:1})},replace:function(e,t){l=r.Replace;let s=m(y.location,e,t);n&&n(s,e),g=x();let i=f(s,g),c=y.createHref(s);o.replaceState(i,"",c),a&&h&&h({action:l,location:y.location,delta:0})},go:e=>o.go(e)};return y}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let s=L(("string"===typeof t?g(t):t).pathname||"/",n);if(null==s)return null;let i=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=P(s);a=A(i[o],e,r)}return a}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(d(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=U([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:I(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of N(e.path))s(e,t,r);else s(e,t)}),t}function N(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=N(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const j=/^:[\w-]+$/,k=3,S=2,E=1,C=10,_=-2,T=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=_),t&&(r+=S),n.filter(e=>!T(e)).reduce((e,t)=>e+(j.test(t)?k:""===t?E:C),r)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:U([i,u.pathname]),pathnameBase:V(U([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=U([i,u.pathnameBase]))}return a}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function L(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let n=O(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=g(e):(s=c({},e),d(!s.pathname||!s.pathname.includes("?"),R("?","pathname","search",s)),d(!s.pathname||!s.pathname.includes("#"),R("#","pathname","hash",s)),d(!s.search||!s.search.includes("#"),R("#","search","hash",s)));let i,a=""===e||""===s.pathname,o=a?"/":s.pathname;if(null==o)i=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?g(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:z(r),hash:B(s)}}(s,i),u=o&&"/"!==o&&o.endsWith("/"),h=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const U=e=>e.join("/").replace(/\/\/+/g,"/"),V=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],H=(new Set(W),["get",...W]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const G=s.createContext(null);const Q=s.createContext(null);const J=s.createContext(null);const Y=s.createContext(null);const $=s.createContext({outlet:null,matches:[],isDataRoute:!1});const X=s.createContext(null);function Z(){return null!=s.useContext(Y)}function ee(){return Z()||d(!1),s.useContext(Y).location}function te(e){s.useContext(J).static||s.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=s.useContext($);return e?function(){let{router:e}=fe(de.UseNavigateStable),t=pe(he.UseNavigateStable),n=s.useRef(!1);return te(()=>{n.current=!0}),s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,K({fromRouteId:t},s)))},[e,t])}():function(){Z()||d(!1);let e=s.useContext(G),{basename:t,future:n,navigator:r}=s.useContext(J),{matches:i}=s.useContext($),{pathname:a}=ee(),o=JSON.stringify(M(i,n.v7_relativeSplatPath)),l=s.useRef(!1);return te(()=>{l.current=!0}),s.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=F(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:U([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,o,a,e])}()}const re=s.createContext(null);function se(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(J),{matches:i}=s.useContext($),{pathname:a}=ee(),o=JSON.stringify(M(i,r.v7_relativeSplatPath));return s.useMemo(()=>F(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function ie(e,t,n,i){Z()||d(!1);let{navigator:a}=s.useContext(J),{matches:o}=s.useContext($),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=ee();if(t){var m;let e="string"===typeof t?g(t):t;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||d(!1),h=e}else h=f;let p=h.pathname||"/",x=p;if("/"!==u){let e=u.replace(/^\//,"").split("/");x="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=b(e,{pathname:x});let y=ue(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:U([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:U([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,i);return t&&y?s.createElement(Y.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},y):y}function ae(){let e=function(){var e;let t=s.useContext(X),n=me(he.UseRouteError),r=pe(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const oe=s.createElement(ae,null);class le extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement($.Provider,{value:this.props.routeContext},s.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(G);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement($.Provider,{value:t},r)}function ue(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,r,i)=>{let a,d=!1,h=null,f=null;var m;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||oe,c&&(u<0&&0===i?(m="route-fallback",!1||ge[m]||(ge[m]=!0),d=!0,f=null):u===i&&(d=!0,f=r.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?h:d?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ce,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function fe(e){let t=s.useContext(G);return t||d(!1),t}function me(e){let t=s.useContext(Q);return t||d(!1),t}function pe(e){let t=function(){let e=s.useContext($);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const ge={};function xe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ve(e){let{to:t,replace:n,state:r,relative:i}=e;Z()||d(!1);let{future:a,static:o}=s.useContext(J),{matches:l}=s.useContext($),{pathname:c}=ee(),u=ne(),h=F(t,M(l,a.v7_relativeSplatPath),c,"path"===i),f=JSON.stringify(h);return s.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:i}),[u,f,i,n,r]),null}function be(e){return function(e){let t=s.useContext($).outlet;return t?s.createElement(re.Provider,{value:e},t):t}(e.context)}function ye(e){d(!1)}function we(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.Pop,navigator:o,static:l=!1,future:c}=e;Z()&&d(!1);let u=t.replace(/^\/*/,"/"),h=s.useMemo(()=>({basename:u,navigator:o,static:l,future:K({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof i&&(i=g(i));let{pathname:f="/",search:m="",hash:p="",state:x=null,key:v="default"}=i,b=s.useMemo(()=>{let e=L(f,u);return null==e?null:{location:{pathname:e,search:m,hash:p,state:x,key:v},navigationType:a}},[u,f,m,p,x,v,a]);return null==b?null:s.createElement(J.Provider,{value:h},s.createElement(Y.Provider,{children:n,value:b}))}function Ne(e){let{children:t,location:n}=e;return ie(je(t),n)}new Promise(()=>{});s.Component;function je(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,je(e.props.children,i));e.type!==ye&&d(!1),e.props.index&&e.props.children&&d(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=je(e.props.children,i)),n.push(a)}),n}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}function Ee(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(_i){}new Map;const _e=i.startTransition;l.flushSync,i.useId;function Te(e){let{basename:t,children:n,future:r,window:i}=e,a=s.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),x(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return m("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:p(t)},null,o)));let l=a.current,[c,u]=s.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=s.useCallback(e=>{d&&_e?_e(()=>u(e)):u(e)},[u,d]);return s.useLayoutEffect(()=>l.listen(h),[l,h]),s.useEffect(()=>xe(r),[r]),s.createElement(we,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=s.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,m=Se(e,Ce),{basename:g}=s.useContext(J),x=!1;if("string"===typeof u&&Ae.test(u)&&(n=u,Ie))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=L(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:x=!0}catch(_i){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;Z()||d(!1);let{basename:r,navigator:i}=s.useContext(J),{hash:a,pathname:o,search:l}=se(e,{relative:n}),c=o;return"/"!==r&&(c="/"===o?r:U([r,o])),i.createHref({pathname:c,search:l,hash:a})}(u,{relative:i}),b=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=ne(),u=ee(),d=se(e,{relative:o});return s.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:p(u)===p(d);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,i,n,e,a,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:f});return s.createElement("a",ke({},m,{href:n||v,onClick:x||a?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var Pe,Le;function Re(e){let t=s.useRef(Ee(e)),n=s.useRef(!1),r=ee(),i=s.useMemo(()=>function(e,t){let n=Ee(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),a=ne(),o=s.useCallback((e,t)=>{const r=Ee("function"===typeof e?e(i):e);n.current=!0,a("?"+r,t)},[a,i]);return[i,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Pe||(Pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Le||(Le={}));var Oe=n(555),Me=n(150),Fe=n(700),Ue=n(443);function Ve(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var ze=n(812);function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qe=Be,We=new Fe.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),He=new Ue.Vy("@firebase/auth");function Ke(e){if(He.logLevel<=Ue.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];He.error("Auth (".concat(Me.MF,"): ").concat(e),...n)}}function Ge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw $e(e,...n)}function Qe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $e(e,...n)}function Je(e,t,n){const r=Object.assign(Object.assign({},qe()),{[t]:n});return new Fe.FA("auth","Firebase",r).create(t,{appName:e.name})}function Ye(e){return Je(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return We.create(e,...n)}function Xe(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw $e(t,...r)}}function Ze(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ke(t),new Error(t)}function et(e,t){e||Ze(t)}function tt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function nt(){return"http:"===rt()||"https:"===rt()}function rt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class st{constructor(e,t){this.shortDelay=e,this.longDelay=t,et(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,Fe.jZ)()||(0,Fe.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(nt()||(0,Fe.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function it(e,t){et(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class at{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ot={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},lt=new st(3e4,6e4);function ct(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ut(e,t,n,r){return dt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=(0,Fe.Am)(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return(0,Fe.c1)()||(l.referrerPolicy="no-referrer"),at.fetch()(ft(e,e.config.apiHost,n,a),l)})}async function dt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ot),t);try{const t=new pt(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw gt(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw gt(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw gt(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw gt(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Je(e,o,a);Ge(e,o)}}catch(_i){if(_i instanceof Fe.g)throw _i;Ge(e,"network-request-failed",{message:String(_i)})}}async function ht(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await ut(e,t,n,r,s);return"mfaPendingCredential"in i&&Ge(e,"multi-factor-auth-required",{_serverResponse:i}),i}function ft(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?it(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}function mt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Qe(this.auth,"network-request-failed")),lt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Qe(e,t,r);return s.customData._tokenResponse=n,s}function xt(e){return void 0!==e&&void 0!==e.enterprise}class vt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return mt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function bt(e,t){return ut(e,"GET","/v2/recaptchaConfig",ct(e,t))}async function yt(e,t){return ut(e,"POST","/v1/accounts:lookup",t)}function wt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(_i){}}function Nt(e){return 1e3*Number(e)}function jt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,Fe.u)(n);return e?JSON.parse(e):(Ke("Failed to decode base64 JWT payload"),null)}catch(_i){return Ke("Caught error parsing JWT payload as JSON",null===_i||void 0===_i?void 0:_i.toString()),null}}function kt(e){const t=jt(e);return Xe(t,"internal-error"),Xe("undefined"!==typeof t.exp,"internal-error"),Xe("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function St(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(_i){throw _i instanceof Fe.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(_i)&&e.auth.currentUser===e&&await e.auth.signOut(),_i}}class Et{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(_i){return void((null===_i||void 0===_i?void 0:_i.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ct{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wt(this.lastLoginAt),this.creationTime=wt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _t(e){var t;const n=e.auth,r=await e.getIdToken(),s=await St(e,yt(n,{idToken:r}));Xe(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Tt(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ct(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Tt(e){return e.map(e=>{var{providerId:t}=e,n=Ve(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class It{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xe(e.idToken,"internal-error"),Xe("undefined"!==typeof e.idToken,"internal-error"),Xe("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):kt(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Xe(0!==e.length,"internal-error");const t=kt(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await dt(e,{},async()=>{const n=(0,Fe.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=ft(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",at.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new It;return n&&(Xe("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Xe("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Xe("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new It,this.toJSON())}_performRefresh(){return Ze("not implemented")}}function At(e,t){Xe("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Dt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=Ve(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Et(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ct(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await St(this,this.stsTokenManager.getToken(this.auth,e));return Xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,Fe.Ku)(e),r=await n.getIdToken(t),s=jt(r);Xe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:wt(Nt(s.auth_time)),issuedAtTime:wt(Nt(s.iat)),expirationTime:wt(Nt(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,Fe.Ku)(e);await _t(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await _t(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,Me.xZ)(this.auth.app))return Promise.reject(Ye(this.auth));const e=await this.getIdToken();return await St(this,async function(e,t){return ut(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,x=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:y,providerData:w,stsTokenManager:N}=t;Xe(v&&N,e,"internal-error");const j=It.fromJSON(this.name,N);Xe("string"===typeof v,e,"internal-error"),At(u,e.name),At(d,e.name),Xe("boolean"===typeof b,e,"internal-error"),Xe("boolean"===typeof y,e,"internal-error"),At(h,e.name),At(f,e.name),At(m,e.name),At(p,e.name),At(g,e.name),At(x,e.name);const k=new Dt({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:y,photoURL:f,phoneNumber:h,tenantId:m,stsTokenManager:j,createdAt:g,lastLoginAt:x});return w&&Array.isArray(w)&&(k.providerData=w.map(e=>Object.assign({},e))),p&&(k._redirectEventId=p),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new It;r.updateFromServerResponse(t);const s=new Dt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await _t(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Xe(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Tt(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new It;a.updateFromIdToken(n);const o=new Dt({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ct(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const Pt=new Map;function Lt(e){et(e instanceof Function,"Expected a class definition");let t=Pt.get(e);return t?(et(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Pt.set(e,t),t)}class Rt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Rt.type="NONE";const Ot=Rt;function Mt(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ft{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Mt(this.userKey,r.apiKey,s),this.fullPersistenceKey=Mt("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ft(Lt(Ot),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Lt(Ot);const i=Mt(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=Dt._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new Ft(s,e,n)):new Ft(s,e,n)}}function Ut(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qt(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Vt(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ht(t))return"Blackberry";if(Kt(t))return"Webos";if(zt(t))return"Safari";if((t.includes("chrome/")||Bt(t))&&!t.includes("edge/"))return"Chrome";if(Wt(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Vt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Fe.ZQ)();return/firefox\//i.test(e)}function zt(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Fe.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Fe.ZQ)();return/crios\//i.test(e)}function qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Fe.ZQ)();return/iemobile/i.test(e)}function Wt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Fe.ZQ)();return/android/i.test(e)}function Ht(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Fe.ZQ)();return/blackberry/i.test(e)}function Kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Fe.ZQ)();return/webos/i.test(e)}function Gt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Fe.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Fe.ZQ)();return Gt(e)||Wt(e)||Kt(e)||Ht(e)||/windows phone/i.test(e)||qt(e)}function Jt(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ut((0,Fe.ZQ)());break;case"Worker":t="".concat(Ut((0,Fe.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Me.MF,"/").concat(r)}class Yt{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(_i){r(_i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(_i){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===_i||void 0===_i?void 0:_i.message})}}}class $t{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Xt{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new en(this),this.idTokenSubscription=new en(this),this.beforeStateQueue=new Yt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=We,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lt(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ft.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(_i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await yt(this,{idToken:e}),n=await Dt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,Me.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(_i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(_i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(_i){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _t(e)}catch(_i){if((null===_i||void 0===_i?void 0:_i.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,Me.xZ)(this.app))return Promise.reject(Ye(this));const t=e?(0,Fe.Ku)(e):null;return t&&Xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,Me.xZ)(this.app)?Promise.reject(Ye(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,Me.xZ)(this.app)?Promise.reject(Ye(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lt(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ut(e,"GET","/v2/passwordPolicy",ct(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new $t(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fe.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ut(e,"POST","/v2/accounts:revokeToken",ct(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lt(e)||this._popupRedirectResolver;Xe(t,this,"argument-error"),this.redirectPersistenceManager=await Ft.create(this,[Lt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xe(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(He.logLevel<=Ue.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];He.warn("Auth (".concat(Me.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Zt(e){return(0,Fe.Ku)(e)}class en{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,Fe.tD)(e=>this.observer=e)}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let tn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nn(e){return tn.loadJS(e)}function rn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class sn{constructor(e){this.type="recaptcha-enterprise",this.auth=Zt(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;xt(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{bt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new vt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&xt(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=tn.recaptchaEnterpriseScript;0!==t.length&&(t+=s),nn(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function an(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new sn(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function on(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await an(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await an(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function ln(e,t,n){const r=Zt(e);Xe(r._canInitEmulator,r,"emulator-config-failed"),Xe(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=cn(t),{host:a,port:o}=function(e){const t=cn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:un(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:un(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function cn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function un(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class dn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ze("not implemented")}_getIdTokenResponse(e){return Ze("not implemented")}_linkToIdToken(e,t){return Ze("not implemented")}_getReauthenticationResolver(e){return Ze("not implemented")}}async function hn(e,t){return ut(e,"POST","/v1/accounts:signUp",t)}async function fn(e,t){return ht(e,"POST","/v1/accounts:signInWithPassword",ct(e,t))}async function mn(e,t){return ut(e,"POST","/v1/accounts:sendOobCode",ct(e,t))}async function pn(e,t){return mn(e,t)}class gn extends dn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new gn(e,t,"password")}static _fromEmailAndCode(e,t){return new gn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return on(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",fn);case"emailLink":return async function(e,t){return ht(e,"POST","/v1/accounts:signInWithEmailLink",ct(e,t))}(e,{email:this._email,oobCode:this._password});default:Ge(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return on(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hn);case"emailLink":return async function(e,t){return ht(e,"POST","/v1/accounts:signInWithEmailLink",ct(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ge(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xn(e,t){return ht(e,"POST","/v1/accounts:signInWithIdp",ct(e,t))}class vn extends dn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ge("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=Ve(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new vn(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return xn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,Fe.Am)(t)}return e}}const bn={USER_NOT_FOUND:"user-not-found"};class yn extends dn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new yn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new yn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ht(e,"POST","/v1/accounts:signInWithPhoneNumber",ct(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ht(e,"POST","/v1/accounts:signInWithPhoneNumber",ct(e,t));if(n.temporaryProof)throw gt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ht(e,"POST","/v1/accounts:signInWithPhoneNumber",ct(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),bn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new yn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class wn{constructor(e){var t,n,r,s,i,a;const o=(0,Fe.I9)((0,Fe.hp)(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Xe(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,Fe.I9)((0,Fe.hp)(e)).link,n=t?(0,Fe.I9)((0,Fe.hp)(t)).deep_link_id:null,r=(0,Fe.I9)((0,Fe.hp)(e)).deep_link_id;return(r?(0,Fe.I9)((0,Fe.hp)(r)).link:null)||r||n||t||e}(e);try{return new wn(t)}catch(n){return null}}}class Nn{constructor(){this.providerId=Nn.PROVIDER_ID}static credential(e,t){return gn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=wn.parseLink(t);return Xe(n,"argument-error"),gn._fromEmailAndCode(e,n.code,n.tenantId)}}Nn.PROVIDER_ID="password",Nn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Nn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class jn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class kn extends jn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Sn extends kn{constructor(){super("facebook.com")}static credential(e){return vn._fromParams({providerId:Sn.PROVIDER_ID,signInMethod:Sn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sn.credentialFromTaggedObject(e)}static credentialFromError(e){return Sn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Sn.credential(t.oauthAccessToken)}catch(n){return null}}}Sn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Sn.PROVIDER_ID="facebook.com";class En extends kn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vn._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return En.credentialFromTaggedObject(e)}static credentialFromError(e){return En.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return En.credential(n,r)}catch(s){return null}}}En.GOOGLE_SIGN_IN_METHOD="google.com",En.PROVIDER_ID="google.com";class Cn extends kn{constructor(){super("github.com")}static credential(e){return vn._fromParams({providerId:Cn.PROVIDER_ID,signInMethod:Cn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cn.credentialFromTaggedObject(e)}static credentialFromError(e){return Cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Cn.credential(t.oauthAccessToken)}catch(n){return null}}}Cn.GITHUB_SIGN_IN_METHOD="github.com",Cn.PROVIDER_ID="github.com";class _n extends kn{constructor(){super("twitter.com")}static credential(e,t){return vn._fromParams({providerId:_n.PROVIDER_ID,signInMethod:_n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _n.credentialFromTaggedObject(e)}static credentialFromError(e){return _n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return _n.credential(n,r)}catch(s){return null}}}async function Tn(e,t){return ht(e,"POST","/v1/accounts:signUp",ct(e,t))}_n.TWITTER_SIGN_IN_METHOD="twitter.com",_n.PROVIDER_ID="twitter.com";class In{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Dt._fromIdTokenResponse(e,n,r),i=An(n);return new In({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=An(n);return new In({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function An(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Dn extends Fe.g{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Dn.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Dn(e,t,n,r)}}function Pn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Dn._fromErrorAndOperation(e,n,t,r);throw n})}async function Ln(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await St(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return In._forOperation(e,"link",r)}async function Rn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,Me.xZ)(r.app))return Promise.reject(Ye(r));const s="reauthenticate";try{const i=await St(e,Pn(r,s,t,e),n);Xe(i.idToken,r,"internal-error");const a=jt(i.idToken);Xe(a,r,"internal-error");const{sub:o}=a;return Xe(e.uid===o,r,"user-mismatch"),In._forOperation(e,s,i)}catch(_i){throw(null===_i||void 0===_i?void 0:_i.code)==="auth/".concat("user-not-found")&&Ge(r,"user-mismatch"),_i}}async function On(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,Me.xZ)(e.app))return Promise.reject(Ye(e));const r="signIn",s=await Pn(e,r,t),i=await In._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function Mn(e,t){return On(Zt(e),t)}function Fn(e,t,n){var r;Xe((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Xe("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Xe(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Xe(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Un(e){const t=Zt(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Vn(e,t){const n=(0,Fe.Ku)(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Fn(n.auth,r,t);const{email:s}=await async function(e,t){return mn(e,t)}(n.auth,r);s!==e.email&&await e.reload()}async function zn(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=(0,Fe.Ku)(e),i={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await St(s,async function(e,t){return ut(e,"POST","/v1/accounts:update",t)}(s.auth,i));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const o=s.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}new WeakMap;const Bn="__sak";class qn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bn,"1"),this.storage.removeItem(Bn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Wn extends qn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qt(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,Fe.lT)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wn.type="LOCAL";const Hn=Wn;class Kn extends qn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Kn.type="SESSION";const Gn=Kn;class Qn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Qn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Qn.receivers=[];class Yn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Jn("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function $n(){return window}function Xn(){return"undefined"!==typeof $n().WorkerGlobalScope&&"function"===typeof $n().importScripts}const Zn="firebaseLocalStorageDb",er="firebaseLocalStorage",tr="fbase_key";class nr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rr(e,t){return e.transaction([er],t?"readwrite":"readonly").objectStore(er)}function sr(){const e=indexedDB.open(Zn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(er,{keyPath:tr})}catch(_i){n(_i)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(er)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Zn);return new nr(e).toPromise()}(),t(await sr()))})})}async function ir(e,t,n){const r=rr(e,!0).put({[tr]:t,value:n});return new nr(r).toPromise()}function ar(e,t){const n=rr(e,!0).delete(t);return new nr(n).toPromise()}class or{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await sr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(_i){if(t++>3)throw _i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qn._getInstance(Xn()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Yn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sr();return await ir(e,Bn,"1"),await ar(e,Bn),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ir(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=rr(e,!1).get(t),r=await new nr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ar(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=rr(e,!1).getAll();return new nr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}or.type="LOCAL";const lr=or;rn("rcb"),new st(3e4,6e4);const cr="recaptcha";async function ur(e,t,n){var r;const s=await n.verify();try{let i;if(Xe("string"===typeof s,e,"argument-error"),Xe(n.type===cr,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Xe("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ut(e,"POST","/v2/accounts/mfaEnrollment:start",ct(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Xe("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Xe(n,e,"missing-multi-factor-info");const a=await function(e,t){return ut(e,"POST","/v2/accounts/mfaSignIn:start",ct(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ut(e,"POST","/v1/accounts:sendVerificationCode",ct(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class dr{constructor(e){this.providerId=dr.PROVIDER_ID,this.auth=Zt(e)}verifyPhoneNumber(e,t){return ur(this.auth,e,(0,Fe.Ku)(t))}static credential(e,t){return yn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return dr.credentialFromTaggedObject(t)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?yn._fromTokenResponse(n,r):null}}function hr(e,t){return t?Lt(t):(Xe(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}dr.PROVIDER_ID="phone",dr.PHONE_SIGN_IN_METHOD="phone";class fr extends dn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mr(e){return On(e.auth,new fr(e),e.bypassAuthState)}function pr(e){const{auth:t,user:n}=e;return Xe(n,t,"internal-error"),Rn(n,new fr(e),e.bypassAuthState)}async function gr(e){const{auth:t,user:n}=e;return Xe(n,t,"internal-error"),Ln(n,new fr(e),e.bypassAuthState)}class xr{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(_i){this.reject(_i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(_i){this.reject(_i)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mr;case"linkViaPopup":case"linkViaRedirect":return gr;case"reauthViaPopup":case"reauthViaRedirect":return pr;default:Ge(this.auth,"internal-error")}}resolve(e){et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vr=new st(2e3,1e4);class br extends xr{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,br.currentPopupAction&&br.currentPopupAction.cancel(),br.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xe(e,this.auth,"internal-error"),e}async onExecution(){et(1===this.filter.length,"Popup operations only handle one event");const e=Jn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Qe(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,br.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qe(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,vr.get())};e()}}br.currentPopupAction=null;const yr=new Map;class wr extends xr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=yr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=kr(t),r=jr(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(_i){e=()=>Promise.reject(_i)}yr.set(this.auth._key(),e)}return this.bypassAuthState||yr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Nr(e,t){yr.set(e._key(),t)}function jr(e){return Lt(e._redirectPersistence)}function kr(e){return Mt("pendingRedirect",e.config.apiKey,e.name)}async function Sr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,Me.xZ)(e.app))return Promise.reject(Ye(e));const r=Zt(e),s=hr(r,t),i=new wr(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Er{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _r(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!_r(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Qe(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cr(e))}saveEventToCache(e){this.cachedEventUids.add(Cr(e)),this.lastProcessedEventTime=Date.now()}}function Cr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function _r(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Tr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ir=/^https?/;async function Ar(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ut(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Dr(r))return}catch(n){}Ge(e,"unauthorized-domain")}function Dr(e){const t=tt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Ir.test(n))return!1;if(Tr.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Pr=new st(3e4,6e4);function Lr(){const e=$n().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Rr(e){return new Promise((t,n)=>{var r,s,i;function a(){Lr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Lr(),n(Qe(e,"network-request-failed"))},timeout:Pr.get()})}if(null===(s=null===(r=$n().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=$n().gapi)||void 0===i?void 0:i.load)){const t=rn("iframefcb");return $n()[t]=()=>{gapi.load?a():n(Qe(e,"network-request-failed"))},nn("".concat(tn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Or=null,e})}let Or=null;const Mr=new st(5e3,15e3),Fr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ur=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vr(e){const t=e.config;Xe(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?it(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Me.MF},s=Ur.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat((0,Fe.Am)(r).slice(1))}async function zr(e){const t=await function(e){return Or=Or||Rr(e),Or}(e),n=$n().gapi;return Xe(n,e,"internal-error"),t.open({where:document.body,url:Vr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Qe(e,"network-request-failed"),i=$n().setTimeout(()=>{r(s)},Mr.get());function a(){$n().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const Br={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(_i){}}}function Wr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Br),{width:r.toString(),height:s.toString(),top:i,left:a}),c=(0,Fe.ZQ)().toLowerCase();n&&(o=Bt(c)?"_blank":n),Vt(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Gt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Fe.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new qr(null);const d=window.open(t||"",o,u);Xe(d,e,"popup-blocked");try{d.focus()}catch(_i){}return new qr(d)}const Hr="__/auth/handler",Kr="emulator/auth/handler",Gr=encodeURIComponent("fac");async function Qr(e,t,n,r,s,i){Xe(e.config.authDomain,e,"auth-domain-config-required"),Xe(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Me.MF,eventId:s};if(t instanceof jn){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",(0,Fe.Im)(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof kn){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Gr,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Hr);return it(t,Kr)}(e),"?").concat((0,Fe.Am)(o).slice(1)).concat(c)}const Jr="webStorageSupport";const Yr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gn,this._completeRedirectFn=Sr,this._overrideRedirectResult=Nr}async _openPopup(e,t,n,r){var s;et(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Wr(e,await Qr(e,t,n,tt(),r),Jn())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){$n().location.href=e}(await Qr(e,t,n,tt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(et(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await zr(e),n=new Er(e);return t.register("authEvent",t=>{Xe(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jr,{type:Jr},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Jr];void 0!==s&&t(!!s),Ge(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ar(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Qt()||zt()||Gt()}};var $r="@firebase/auth",Xr="1.7.9";class Zr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const es=(0,Fe.XA)("authIdTokenMaxAge")||300;let ts=null;var ns;tn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Qe("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ns="Browser",(0,Me.om)(new ze.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Xe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:ns,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jt(ns)},c=new Xt(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Lt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,Me.om)(new ze.uA("auth-internal",e=>(e=>new Zr(e))(Zt(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Me.KO)($r,Xr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ns)),(0,Me.KO)($r,Xr,"esm2017");var rs=n(64),ss=n(472);const is="functions";Fe.g;class as{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(e=>this.auth=e,()=>{}),this.messaging||t.get().then(e=>this.messaging=e,()=>{}),this.appCheck||n.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(_i){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(_i){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const os="us-central1";class ls{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:os,i=arguments.length>5?arguments[5]:void 0;this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new as(t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(s);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=os}catch(_i){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}const cs="@firebase/functions",us="0.11.8";var ds,hs;ds=fetch.bind(self),(0,Me.om)(new ze.uA(is,(e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("messaging-internal"),a=e.getProvider("app-check-internal");return new ls(r,s,i,a,n,ds)},"PUBLIC").setMultipleInstances(!0)),(0,Me.KO)(cs,us,hs),(0,Me.KO)(cs,us,"esm2017");const fs=(0,rs.initializeApp)({apiKey:"AIzaSyDipdhvekxXjwUGB3lhFRlCFsMsneBUvIc",authDomain:"pebble-99673.firebaseapp.com",projectId:"pebble-99673",storageBucket:"pebble-99673.firebasestorage.app",messagingSenderId:"680621796802",appId:"1:680621796802:web:2a7e773b5822b463b733cf",measurementId:"G-N1FNRPJ8K4"}),ms=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Me.Sx)();const t=(0,Me.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,Me.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,Fe.bD)(r,null!==t&&void 0!==t?t:{}))return e;Ge(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Yr,persistence:[lr,Hn,Gn]}),r=(0,Fe.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>es)return;const r=null===t||void 0===t?void 0:t.token;ts!==r&&(ts=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){(0,Fe.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,Fe.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=(0,Fe.Tj)("auth");return i&&ln(n,"http://".concat(i)),n}(fs),ps=(0,ss.getFirestore)(fs);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Me.Sx)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:os;const n=(0,Me.j6)((0,Fe.Ku)(e),is).getImmediate({identifier:t}),r=(0,Fe.yU)("functions");r&&function(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}((0,Fe.Ku)(e),t,n)}(n,...r)}(fs);var gs=n(579);const xs=(0,s.createContext)(void 0);function vs(){const e=(0,s.useContext)(xs);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}function bs(e){let{children:t}=e;const[n,r]=(0,s.useState)(null),[i,a]=(0,s.useState)(!0);async function o(e){try{const t=(0,ss.H9)(ps,"users",e.uid);if((await(0,ss.x7)(t)).exists()){const n={email:e.email||"",updatedAt:new Date};e.displayName&&(n.displayName=e.displayName),e.photoURL&&(n.photoURL=e.photoURL),await(0,ss.BN)(t,n,{merge:!0}),console.log("Updated existing user document for:",e.email)}else{const n={uid:e.uid,email:e.email||"",createdAt:new Date,updatedAt:new Date,subscription:null};e.displayName&&(n.displayName=e.displayName),e.photoURL&&(n.photoURL=e.photoURL),await(0,ss.BN)(t,n),console.log("Created new user document for:",e.email)}}catch(t){console.error("Error ensuring user document:",t)}}(0,s.useEffect)(()=>{const e=function(e,t,n,r){return(0,Fe.Ku)(e).onAuthStateChanged(t,n,r)}(ms,async e=>{if(e){const t={uid:e.uid,email:e.email||"",emailVerified:e.emailVerified,createdAt:new Date};e.displayName&&(t.displayName=e.displayName),e.photoURL&&(t.photoURL=e.photoURL),r(t),await o(e)}else r(null);a(!1)});return e},[]);const l={currentUser:n,loading:i,login:async function(e,t){await function(e,t,n){return(0,Me.xZ)(e.app)?Promise.reject(Ye(e)):Mn((0,Fe.Ku)(e),Nn.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Un(e),t})}(ms,e,t)},signup:async function(e,t,n){const r=await async function(e,t,n){if((0,Me.xZ)(e.app))return Promise.reject(Ye(e));const r=Zt(e),s=on(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tn),i=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Un(e),t}),a=await In._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(ms,e,t);return n&&r.user&&await zn(r.user,{displayName:n}),r.user&&await Vn(r.user),r.user&&await o(r.user),r},logout:function(){return function(e){return(0,Fe.Ku)(e).signOut()}(ms)},resetPassword:async function(e){return async function(e,t,n){const r=Zt(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Fn(r,s,n),await on(r,s,"getOobCode",pn)}(ms,e)},sendVerificationEmail:async function(){if(ms.currentUser)return Vn(ms.currentUser);throw new Error("No user logged in")},updateUserProfile:async function(e){ms.currentUser&&(await zn(ms.currentUser,{displayName:e}),n&&r((0,Oe.A)((0,Oe.A)({},n),{},{displayName:e})))},ensureUserDocument:n?()=>o(ms.currentUser):void 0};return(0,gs.jsx)(xs.Provider,{value:l,children:!i&&t})}const ys=e=>{let t;const n=new Set,r=(e,r)=>{const s="function"===typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=r?r:"object"!==typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,i={setState:r,getState:s,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,s,i);return i},ws=e=>e?ys(e):ys;var Ns=n(824);const{useDebugValue:js}=s,{useSyncExternalStoreWithSelector:ks}=Ns;let Ss=!1;const Es=e=>e;const Cs=e=>{"function"!==typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"===typeof e?ws(e):e,n=(e,n)=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Es,n=arguments.length>2?arguments[2]:void 0;n&&!Ss&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ss=!0);const r=ks(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return js(r),r}(t,e,n);return Object.assign(n,t),n},_s=e=>e?Cs(e):Cs;const Ts=e=>{const t=(0,Oe.A)({},e);return t.createdAt&&t.createdAt instanceof ss.Timestamp&&(t.createdAt=t.createdAt.toDate()),t.updatedAt&&t.updatedAt instanceof ss.Timestamp&&(t.updatedAt=t.updatedAt.toDate()),t.dueDate&&t.dueDate instanceof ss.Timestamp&&(t.dueDate=t.dueDate.toDate()),t.expectedCloseDate&&t.expectedCloseDate instanceof ss.Timestamp&&(t.expectedCloseDate=t.expectedCloseDate.toDate()),t.date&&t.date instanceof ss.Timestamp&&(t.date=t.date.toDate()),t.startDate&&t.startDate instanceof ss.Timestamp&&(t.startDate=t.startDate.toDate()),t},Is=(0,ss.collection)(ps,"contacts"),As=(0,ss.collection)(ps,"candidates"),Ds=async e=>{try{console.log("getContacts called for userId:",e);const n=(0,ss.query)(Is,(0,ss.where)("userId","==",e));console.log("Executing simple query without ordering...");try{console.log("Attempting network query for fresh data...");const e=await(0,ss.getDocs)(n);console.log("Network query successful, got",e.docs.length,"documents");const t=e.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));return t.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.getTime()-e.createdAt.getTime():0),console.log("Returning",t.length,"sorted contacts from network"),t}catch(t){console.log("Network query failed, falling back to cache...",t);const e=await(0,ss.kU)(n);console.log("Cache query successful, got",e.docs.length,"documents");const r=e.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));return r.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.getTime()-e.createdAt.getTime():0),console.log("Returning",r.length,"sorted contacts from cache"),r}}catch(n){throw console.error("Error in getContacts:",n),console.error("Error details:",{code:n.code,message:n.message}),n}},Ps=async e=>{try{console.log("getCandidates called for userId:",e);const t=(0,ss.query)(As,(0,ss.where)("userId","==",e)),n=await(0,ss.getDocs)(t);console.log("Candidates query successful, got",n.docs.length,"documents");const r=n.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));return r.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.getTime()-e.createdAt.getTime():0),console.log("Returning",r.length,"sorted candidates"),r}catch(t){throw console.error("Error in getCandidates:",t),t}},Ls=(0,ss.collection)(ps,"deals"),Rs=async e=>{try{console.log("getDeals called for userId:",e);const t=(0,ss.query)(Ls,(0,ss.where)("userId","==",e)),n=(await(0,ss.getDocs)(t)).docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));return n.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.getTime()-e.createdAt.getTime():0),n}catch(t){throw console.error("Error in getDeals:",t),t}},Os=(0,ss.collection)(ps,"tasks"),Ms=async(e,t)=>{const n=(0,ss.H9)(ps,"tasks",e);await(0,ss.mZ)(n,(0,Oe.A)((0,Oe.A)({},t),{},{updatedAt:ss.Timestamp.now()}))},Fs=async e=>{try{console.log("getTasks called for userId:",e);const t=(0,ss.query)(Os,(0,ss.where)("userId","==",e)),n=(await(0,ss.getDocs)(t)).docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));return n.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.getTime()-e.createdAt.getTime():0),n}catch(t){throw console.error("Error in getTasks:",t),t}},Us=(0,ss.collection)(ps,"tags"),Vs=async e=>{try{console.log("getTags called for userId:",e);const t=(0,ss.query)(Us,(0,ss.where)("userId","==",e)),n=(await(0,ss.getDocs)(t)).docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));return n.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.getTime()-e.createdAt.getTime():0),n}catch(t){throw console.error("Error in getTags:",t),t}},zs=(0,ss.collection)(ps,"interactions"),Bs=async e=>{try{console.log("=== ADD INTERACTION DEBUG START ==="),console.log("Input interaction data:",e);const t=(0,Oe.A)((0,Oe.A)({},e),{},{date:ss.Timestamp.fromDate(e.date),createdAt:ss.Timestamp.now(),updatedAt:ss.Timestamp.now()});console.log("Final document data for Firestore:",t);const n=await(0,ss.addDoc)(zs,t);console.log("Interaction added successfully with ID:",n.id);const r=(0,Oe.A)((0,Oe.A)({id:n.id},e),{},{createdAt:new Date,updatedAt:new Date});return console.log("=== ADD INTERACTION DEBUG END ==="),r}catch(t){throw console.error("Error adding interaction to Firestore:",t),t}},qs=async e=>{try{console.log("getAllInteractionsForUser called for userId:",e);const t=(0,ss.query)(zs,(0,ss.where)("userId","==",e)),n=(await(0,ss.getDocs)(t)).docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));return n.sort((e,t)=>e.date&&t.date?t.date.getTime()-e.date.getTime():0),console.log("Returning",n.length,"total interactions for user"),n}catch(t){throw console.error("Error in getAllInteractionsForUser:",t),t}},Ws=_s(e=>({sidebarOpen:!1,currentView:"dashboard",contacts:[],deals:[],tasks:[],tags:[],interactions:[],loading:!1,setSidebarOpen:t=>e({sidebarOpen:t}),setCurrentView:t=>e({currentView:t}),setContacts:t=>e({contacts:t}),setDeals:t=>e({deals:t}),setTasks:t=>e({tasks:t}),setTags:t=>e({tags:t}),setInteractions:t=>e({interactions:t}),addContact:t=>e(e=>({contacts:[...e.contacts,t]})),addDeal:t=>e(e=>({deals:[...e.deals,t]})),addTask:t=>e(e=>({tasks:[...e.tasks,t]})),addTag:t=>e(e=>({tags:[...e.tags,t]})),addInteraction:t=>e(e=>({interactions:[...e.interactions,t]})),updateContact:(t,n)=>e(e=>({contacts:e.contacts.map(e=>e.id===t?(0,Oe.A)((0,Oe.A)((0,Oe.A)({},e),n),{},{updatedAt:new Date}):e)})),updateDeal:(t,n)=>e(e=>({deals:e.deals.map(e=>e.id===t?(0,Oe.A)((0,Oe.A)((0,Oe.A)({},e),n),{},{updatedAt:new Date}):e)})),updateTask:(t,n)=>e(e=>({tasks:e.tasks.map(e=>e.id===t?(0,Oe.A)((0,Oe.A)((0,Oe.A)({},e),n),{},{updatedAt:new Date}):e)})),updateTag:(t,n)=>e(e=>({tags:e.tags.map(e=>e.id===t?(0,Oe.A)((0,Oe.A)((0,Oe.A)({},e),n),{},{updatedAt:new Date}):e)})),updateInteraction:(t,n)=>e(e=>({interactions:e.interactions.map(e=>e.id===t?(0,Oe.A)((0,Oe.A)((0,Oe.A)({},e),n),{},{updatedAt:new Date}):e)})),deleteContact:t=>e(e=>({contacts:e.contacts.filter(e=>e.id!==t)})),deleteDeal:t=>e(e=>({deals:e.deals.filter(e=>e.id!==t)})),deleteTask:t=>e(e=>({tasks:e.tasks.filter(e=>e.id!==t)})),deleteTag:t=>e(e=>({tags:e.tags.filter(e=>e.id!==t)})),deleteInteraction:t=>e(e=>({interactions:e.interactions.filter(e=>e.id!==t)})),setLoading:t=>e({loading:t}),loadUserData:async t=>{e({loading:!0});try{const[n,r,s,i,a]=await Promise.all([Ds(t),Rs(t),Fs(t),Vs(t),qs(t)]);e({contacts:n,deals:r,tasks:s,tags:i,interactions:a,loading:!1}),((e,t)=>{console.log("subscribeToContacts called with userId:",e);try{console.log("Attempting to create subscription with ordering...");const n=(0,ss.query)(Is,(0,ss.where)("userId","==",e),(0,ss.My)("createdAt","desc"));return console.log("Query created successfully:",n),(0,ss.aQ)(n,e=>{console.log("Snapshot received with ordering:",e.docs.length,"documents");const n=e.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));t(n)},n=>{if(console.error("Error in contacts subscription with ordering:",n),console.error("Error code:",n.code),console.error("Error message:",n.message),"failed-precondition"===n.code||"unimplemented"===n.code){console.log("Falling back to subscription without ordering...");const n=(0,ss.query)(Is,(0,ss.where)("userId","==",e));return console.log("Fallback query created:",n),(0,ss.aQ)(n,e=>{console.log("Snapshot received without ordering:",e.docs.length,"documents");const n=e.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));t(n)},e=>{console.error("Error in fallback subscription:",e)})}})}catch(n){console.error("Error setting up contacts subscription:",n),console.log("Using fallback query due to error...");const r=(0,ss.query)(Is,(0,ss.where)("userId","==",e));return console.log("Fallback query created:",r),(0,ss.aQ)(r,e=>{console.log("Snapshot received from fallback:",e.docs.length,"documents");const n=e.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));t(n)},e=>{console.error("Error in final fallback subscription:",e)})}})(t,t=>{e({contacts:t})}),((e,t)=>{try{const n=(0,ss.query)(Ls,(0,ss.where)("userId","==",e),(0,ss.My)("createdAt","desc"));return(0,ss.aQ)(n,e=>{const n=e.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));t(n)},n=>{console.error("Error in deals subscription:",n);const r=(0,ss.query)(Ls,(0,ss.where)("userId","==",e));return(0,ss.aQ)(r,e=>{const n=e.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));t(n)})})}catch(n){console.error("Error setting up deals subscription:",n);const r=(0,ss.query)(Ls,(0,ss.where)("userId","==",e));return(0,ss.aQ)(r,e=>{const n=e.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));t(n)})}})(t,t=>{e({deals:t})}),((e,t)=>{try{const n=(0,ss.query)(Os,(0,ss.where)("userId","==",e),(0,ss.My)("createdAt","desc"));return(0,ss.aQ)(n,e=>{const n=e.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));t(n)},n=>{console.error("Error in tasks subscription:",n);const r=(0,ss.query)(Os,(0,ss.where)("userId","==",e));return(0,ss.aQ)(r,e=>{const n=e.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));t(n)})})}catch(n){console.error("Error setting up tasks subscription:",n);const r=(0,ss.query)(Os,(0,ss.where)("userId","==",e));return(0,ss.aQ)(r,e=>{const n=e.docs.map(e=>(0,Oe.A)({id:e.id},Ts(e.data())));t(n)})}})(t,t=>{e({tasks:t})})}catch(n){console.error("Error loading user data:",n),e({loading:!1})}}})),Hs=e=>{let{children:t}=e;return(0,gs.jsx)(gs.Fragment,{children:t})},Ks={currency:{code:"USD",symbol:"$",name:"US Dollar",locale:"en-US"},phoneFormat:{code:"US",prefix:"+1",name:"United States",example:"+1 (555) 123-4567"}},Gs=(0,s.createContext)(void 0),Qs=()=>{const e=(0,s.useContext)(Gs);if(void 0===e)throw new Error("useSettings must be used within a SettingsProvider");return e},Js=e=>{let{children:t}=e;const[n,r]=(0,s.useState)(()=>{const e=localStorage.getItem("pebbleSettings");return e?JSON.parse(e):Ks});(0,s.useEffect)(()=>{localStorage.setItem("pebbleSettings",JSON.stringify(n))},[n]);const i={settings:n,updateCurrency:e=>{r(t=>(0,Oe.A)((0,Oe.A)({},t),{},{currency:e}))},updatePhoneFormat:e=>{r(t=>(0,Oe.A)((0,Oe.A)({},t),{},{phoneFormat:e}))},formatCurrency:e=>new Intl.NumberFormat(n.currency.locale,{style:"currency",currency:n.currency.code,minimumFractionDigits:0,maximumFractionDigits:0}).format(e),formatPhoneNumber:e=>{if(!e)return"";const t=e.replace(/[\s\-\(\)]/g,"");return t.startsWith("+")?e:"".concat(n.phoneFormat.prefix," ").concat(t)}};return(0,gs.jsx)(Gs.Provider,{value:i,children:t})},Ys=()=>{const[e,t]=(0,s.useState)("login"),[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)(""),[d,h]=(0,s.useState)(""),[f,m]=(0,s.useState)(!1),{login:p,resetPassword:g,sendVerificationEmail:x,currentUser:v}=vs(),b=ne();(0,s.useEffect)(()=>{v&&b("/dashboard")},[v,b]);const y=async()=>{try{await x(),h("Verification email sent!")}catch(e){u(e.message||"Failed to send verification email")}},w=e=>{const{name:t,value:n}=e.target;"email"===t?r(n):"password"===t&&a(n),c&&(u(""),m(!1))},N=()=>{switch(e){case"reset":return(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{htmlFor:"email",className:"block text-sm font-semibold text-slate-700 mb-3",children:"Email address"}),(0,gs.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:w,className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",placeholder:"Enter your email"})]});case"verify":return(0,gs.jsxs)("div",{className:"text-center",children:[(0,gs.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udce7"}),(0,gs.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Check your email"}),(0,gs.jsxs)("p",{className:"text-slate-600 mb-6",children:["We've sent a verification link to ",(0,gs.jsx)("strong",{children:n})]}),(0,gs.jsxs)("div",{className:"space-y-3",children:[(0,gs.jsx)("button",{type:"button",onClick:y,className:"w-full px-4 py-3 bg-slate-600 text-white text-sm font-semibold rounded-xl hover:bg-slate-700 focus:ring-4 focus:ring-slate-500/20 focus:ring-offset-2 transition-all duration-200",children:"Resend verification email"}),(0,gs.jsx)("button",{type:"button",onClick:()=>t("login"),className:"text-blue-600 hover:text-blue-500 text-sm font-medium",children:"Back to login"}),(0,gs.jsx)("button",{type:"button",onClick:()=>b("/dashboard"),className:"w-full px-4 py-3 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-sm font-semibold rounded-xl hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200",children:"Go to Dashboard"})]})]});default:return(0,gs.jsxs)(gs.Fragment,{children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{htmlFor:"email",className:"block text-sm font-semibold text-slate-700 mb-3",children:"Email address"}),(0,gs.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:w,className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",placeholder:"Enter your email"})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{htmlFor:"password",className:"block text-sm font-semibold text-slate-700 mb-3",children:"Password"}),(0,gs.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:w,className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",placeholder:"Enter your password"})]})]})}},j=(()=>{switch(e){case"reset":return{title:"Reset your password",subtitle:"Enter your email to receive a reset link",buttonText:"Send Reset Link",switchText:"Remember your password?",switchAction:"Sign in",switchMode:"login"};case"verify":return{title:"Verify your email",subtitle:"Check your inbox for the verification link",buttonText:"",switchText:"",switchAction:"",switchMode:"login"};default:return{title:"Sign in to your account",subtitle:"Welcome back to Pebble",buttonText:"Sign In",switchText:"",switchAction:"",switchMode:"login"}}})();return"verify"===e?(0,gs.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-white to-blue-50/30 py-12 px-4 sm:px-6 lg:px-8",children:(0,gs.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,gs.jsx)("div",{className:"text-center",children:(0,gs.jsxs)("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[(0,gs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-700 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,gs.jsx)("span",{className:"text-white font-bold text-2xl",children:"P"})}),(0,gs.jsx)("span",{className:"text-3xl font-bold bg-gradient-to-r from-slate-700 to-blue-600 bg-clip-text text-transparent",children:"Pebble"})]})}),(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8",children:N()})]})}):(0,gs.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-white to-blue-50/30 py-12 px-4 sm:px-6 lg:px-8",children:(0,gs.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,gs.jsxs)("div",{className:"text-center",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[(0,gs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-700 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,gs.jsx)("span",{className:"text-white font-bold text-2xl",children:"P"})}),(0,gs.jsx)("span",{className:"text-3xl font-bold bg-gradient-to-r from-slate-700 to-blue-600 bg-clip-text text-transparent",children:"Pebble"})]}),(0,gs.jsx)("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:j.title}),(0,gs.jsx)("p",{className:"text-slate-600 font-medium",children:j.subtitle})]}),(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8",children:(0,gs.jsxs)("form",{className:"space-y-6",onSubmit:async r=>{r.preventDefault(),u(""),h(""),m(!1),l(!0);try{"login"===e?(await p(n,i),b("/dashboard")):"reset"===e&&(await g(n),h("Password reset email sent! Check your inbox."),t("login"))}catch(s){console.error("Login error:",s),"auth/invalid-credential"===s.code||"auth/user-not-found"===s.code||"auth/wrong-password"===s.code?(u("No account found with these credentials. Would you like to create a new account?"),m(!0)):"auth/too-many-requests"===s.code?(u("Too many failed attempts. Please try again later."),m(!1)):"auth/user-disabled"===s.code?(u("This account has been disabled. Please contact support."),m(!1)):"auth/network-request-failed"===s.code?(u("Network error. Please check your connection and try again."),m(!1)):(u("An error occurred. Please try again."),m(!1))}finally{l(!1)}},children:[c&&(0,gs.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:[c,f&&(0,gs.jsx)("div",{className:"mt-3 pt-3 border-t border-red-200",children:(0,gs.jsx)(De,{to:"/signup",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Create New Account"})})]}),d&&(0,gs.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl text-sm",children:d}),(0,gs.jsx)("div",{className:"space-y-6",children:N()}),"login"===e&&(0,gs.jsx)("div",{className:"flex items-center justify-between",children:(0,gs.jsx)("button",{type:"button",onClick:()=>t("reset"),className:"text-sm text-blue-600 hover:text-blue-500 font-medium transition-colors duration-200",children:"Forgot your password?"})}),j.buttonText&&(0,gs.jsx)("div",{children:(0,gs.jsx)("button",{type:"submit",disabled:o,className:"w-full px-4 py-3 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-sm font-semibold rounded-xl hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Loading...":j.buttonText})}),(0,gs.jsx)("div",{className:"text-center",children:(0,gs.jsxs)("p",{className:"text-sm text-slate-600",children:["Don't have an account?"," ",(0,gs.jsx)(De,{to:"/signup",className:"text-blue-600 hover:text-blue-500 font-medium transition-colors duration-200",children:"Sign up here"})]})})]})})]})})},$s=async e=>{try{const t=(0,ss.collection)(ps,"users"),n=(0,ss.query)(t,(0,ss.where)("email","==",e)),r=await(0,ss.getDocs)(n);console.log("Checking for existing subscription with email: ".concat(e)),console.log("Found ".concat(r.docs.length," user documents with this email"));for(const s of r.docs){const t=s.data();if(console.log("Checking user document:",t),t.subscription&&t.subscription.status)return console.log("Found existing subscription for email: ".concat(e,":"),t.subscription),t.subscription}return console.log("No existing subscription found in Firestore for email: ".concat(e)),console.log("Note: User might have subscription in Stripe that hasn't been synced to Firestore"),null}catch(t){return console.error("Error checking existing subscription:",t),null}},Xs=async e=>{try{const n=await(0,ss.x7)((0,ss.H9)(ps,"users",e));if(!n.exists())return console.warn("User document not found for userId: ".concat(e)),null;const r=n.data();if(console.log("Checking subscription for user ".concat(e,":"),r),r.subscription&&r.subscription.status)return console.log("Found subscription in user document:",r.subscription),r.subscription;if(r.stripeCustomerId&&!r.subscription){console.log("User has stripeCustomerId ".concat(r.stripeCustomerId," but no subscription data. Fetching from Stripe..."));try{const t=await fetch("https://pebble-crm.vercel.app/api/get-subscription?customerId=".concat(r.stripeCustomerId));if(t.ok){const n=await t.json();if(console.log("Retrieved subscription data from Stripe:",n),n.subscription){console.log("Subscription timestamps:",{current_period_start:n.subscription.current_period_start,current_period_end:n.subscription.current_period_end,trial_start:n.subscription.trial_start,trial_end:n.subscription.trial_end,status:n.subscription.status});const t=e=>{if(e&&"number"===typeof e)try{const t=new Date(1e3*e);return isNaN(t.getTime())||t.getFullYear()<2020?void console.warn("Invalid or too old timestamp:",e,"parsed as:",t):t}catch(t){return void console.warn("Invalid timestamp:",e,t)}},s={stripeCustomerId:r.stripeCustomerId,stripeSubscriptionId:n.subscription.id,status:n.subscription.status,planName:"Pebble CRM - Professional Plan",currentPeriodStart:t(n.subscription.current_period_start)||new Date,currentPeriodEnd:t(n.subscription.current_period_end)||new Date,trialStart:t(n.subscription.trial_start),trialEnd:t(n.subscription.trial_end),cancelAtPeriodEnd:n.subscription.cancel_at_period_end||!1,createdAt:new Date,updatedAt:new Date};console.log("Created subscription data object:",s);const i=Object.fromEntries(Object.entries(s).filter(e=>{let[t,n]=e;return void 0!==n}));return console.log("Cleaned subscription data for Firebase:",i),await(0,ss.mZ)((0,ss.H9)(ps,"users",e),{subscription:i,updatedAt:new Date}),console.log("\u2705 Updated Firebase with subscription data from Stripe"),s}}else console.log("Failed to fetch subscription from Stripe: ".concat(t.status))}catch(t){console.error("Error fetching subscription from Stripe:",t)}}if(r.email){console.log("No subscription found for user ".concat(e,", checking for existing subscription with email: ").concat(r.email));const t=await $s(r.email);if(t)return console.log("Found existing subscription for email ".concat(r.email,", linking to user ").concat(e)),await(0,ss.mZ)((0,ss.H9)(ps,"users",e),{subscription:t,updatedAt:new Date}),t}return console.log("No subscription found for user: ".concat(e)),console.log("To fix this issue:"),console.log("1. Check if your Stripe webhook endpoint is working"),console.log("2. Verify webhook events are being sent to: ".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_WEBHOOK_URL||"your-webhook-url")),console.log("3. Check Stripe dashboard for subscription status"),console.log("4. Manually sync subscription data if needed"),null}catch(t){return console.error("Error getting subscription status:",t),null}},Zs=()=>{const{signup:e}=vs(),t=ne(),[n,r]=(0,s.useState)({email:"",password:"",confirmPassword:"",displayName:""}),[i,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(""),c=e=>{r((0,Oe.A)((0,Oe.A)({},n),{},{[e.target.name]:e.target.value}))};return(0,gs.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4",children:(0,gs.jsxs)("div",{className:"max-w-md w-full",children:[(0,gs.jsxs)("div",{className:"text-center mb-8",children:[(0,gs.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,gs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-700 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,gs.jsx)("span",{className:"text-white font-bold text-xl",children:"P"})})}),(0,gs.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Start Your Free Trial"}),(0,gs.jsx)("p",{className:"text-slate-600",children:"Create your account and start 30-day free trial!"})]}),(0,gs.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200",children:[(0,gs.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),l(""),a(!0),n.password!==n.confirmPassword)return l("Passwords do not match"),void a(!1);if(n.password.length<6)return l("Password must be at least 6 characters"),void a(!1);try{var s;const r=await $s(n.email);if(r&&["active","trialing"].includes(r.status))return l(""),a(!1),l("Account created! Redirecting to your existing subscription..."),void setTimeout(()=>{t("/dashboard")},2e3);const c=await e(n.email,n.password,n.displayName),u=null===c||void 0===c||null===(s=c.user)||void 0===s?void 0:s.uid;if(!u)throw new Error("Failed to get user ID after signup");console.log("Welcome email feature coming soon!"),l(""),a(!1),l("Account created! Setting up your free trial..."),console.log("Waiting 5 seconds before redirect..."),await new Promise(e=>setTimeout(e,5e3)),console.log("Now proceeding with redirect...");const d=setTimeout(()=>{console.log("Stripe redirect timeout - redirecting to upgrade page as fallback"),l("Redirecting to upgrade page..."),t("/upgrade")},1e4);setTimeout(async()=>{try{console.log("Account created successfully! Creating Stripe checkout session..."),console.log("Redirecting to Stripe checkout...");const e="https://buy.stripe.com/28E9AUcYu3uC8vjavQfjG01?prefilled_email=".concat(encodeURIComponent(n.email),"&client_reference_id=").concat(u);window.location.href=e,clearTimeout(d)}catch(o){console.error("Checkout session error:",o),clearTimeout(d),l("Redirecting to upgrade page..."),setTimeout(()=>{t("/upgrade")},1e3)}},2e3),setTimeout(()=>{i||(console.log("Fallback timeout reached, redirecting to upgrade page"),l("Taking you to the upgrade page..."),t("/upgrade"))},1e4)}catch(o){console.error("Signup error:",o),l(o.message||"Failed to create account")}finally{a(!1)}},className:"space-y-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name"}),(0,gs.jsx)("input",{type:"text",id:"displayName",name:"displayName",value:n.displayName,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Enter your full name"})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),(0,gs.jsx)("input",{type:"email",id:"email",name:"email",value:n.email,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Enter your email"})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),(0,gs.jsx)("input",{type:"password",id:"password",name:"password",value:n.password,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Create a password"})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirm Password"}),(0,gs.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:c,required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Confirm your password"})]}),o&&(0,gs.jsx)("div",{className:"rounded-lg p-3 ".concat(o.includes("Account created!")?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,gs.jsx)("p",{className:"text-sm ".concat(o.includes("Account created!")?"text-green-600":"text-red-600"),children:o})}),(0,gs.jsx)("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-slate-600 to-blue-600 text-white font-semibold py-3 px-6 rounded-lg hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,gs.jsxs)("span",{className:"flex items-center justify-center",children:[(0,gs.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Account..."]}):"Create Account & Start Free Trial"})]}),(0,gs.jsx)("div",{className:"mt-6 text-center",children:(0,gs.jsxs)("p",{className:"text-slate-600 text-sm",children:["Already have an account?"," ",(0,gs.jsx)(De,{to:"/login",className:"text-blue-600 hover:text-blue-800 font-medium",children:"Sign In"})]})})]}),(0,gs.jsx)("div",{className:"mt-8 text-center",children:(0,gs.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm text-slate-600",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-center",children:[(0,gs.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"7-Day Free Trial"]}),(0,gs.jsxs)("div",{className:"flex items-center justify-center",children:[(0,gs.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"No Credit Card Required"]}),(0,gs.jsxs)("div",{className:"flex items-center justify-center",children:[(0,gs.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Cancel Anytime"]})]})})]})})},ei=()=>{const{currentUser:e,logout:t}=vs(),n=ne(),[r,i]=(0,s.useState)(null),[a,o]=(0,s.useState)(!1);(0,s.useEffect)(()=>{e?(console.log("Current user detected:",e.email),l()):console.log("No current user")},[e]);const l=async()=>{if(e){o(!0);try{const t=await Xs(e.uid);i(t)}catch(t){console.error("Error checking subscription:",t),i(null)}finally{o(!1)}}},c=async()=>{if(console.log("handleStartFreeTrial called",{currentUser:e,subscription:r}),e&&r&&["active","trialing"].includes(r.status))console.log("User has subscription, redirecting to dashboard"),n("/dashboard");else if(e){console.log("User logged in but no subscription, redirecting to Stripe");const t="https://buy.stripe.com/28E9AUcYu3uC8vjavQfjG01?prefilled_email=".concat(encodeURIComponent(e.email||""),"&client_reference_id=").concat(e.uid);window.location.href=t}else console.log("User not logged in, going to signup page"),n("/signup")},u=[{icon:(0,gs.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),title:"Smart Client Management",description:"Organise your client relationships with intelligent tagging, notes, and interaction history.",color:"from-blue-500 to-blue-600"},{icon:(0,gs.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),title:"Intelligent Job Tracking",description:"Visualise your recruitment process with our intuitive job board and management system.",color:"from-emerald-500 to-emerald-600"},{icon:(0,gs.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),title:"Candidate Database",description:"Build and manage your candidate database with comprehensive profiles and tracking.",color:"from-amber-500 to-amber-600"},{icon:(0,gs.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),title:"Real-time Dashboard",description:"Get instant insights into your business performance with live metrics and analytics.",color:"from-purple-500 to-purple-600"},{icon:(0,gs.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),title:"Mobile First",description:"Access your CRM anywhere with our responsive design that works perfectly on all devices.",color:"from-indigo-500 to-indigo-600"},{icon:(0,gs.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),title:"Secure & Private",description:"Your data is protected with enterprise-grade security and complete privacy control.",color:"from-red-500 to-red-600"}];return(0,gs.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:[(0,gs.jsx)("nav",{className:"bg-white/95 backdrop-blur-md border-b border-slate-200/50 shadow-sm sticky top-0 z-50",children:(0,gs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,gs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,gs.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-slate-700 to-blue-600 rounded-lg flex items-center justify-center shadow-lg",children:(0,gs.jsx)("span",{className:"text-white font-bold text-lg",children:"P"})}),(0,gs.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-slate-700 to-blue-600 bg-clip-text text-transparent",children:"Pebble"})]}),(0,gs.jsx)("div",{className:"flex items-center space-x-4",children:e?(0,gs.jsxs)(gs.Fragment,{children:[(0,gs.jsx)(De,{to:"/dashboard",className:"text-slate-600 hover:text-slate-900 font-medium transition-colors duration-200",children:"Go to Dashboard"}),(0,gs.jsx)(De,{to:"/dashboard",className:"px-4 py-2 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200",children:"Open CRM"}),(0,gs.jsx)("button",{onClick:async()=>{try{await t(),n("/")}catch(e){console.error("Error signing out:",e)}},className:"px-4 py-2 bg-slate-600 text-white text-sm font-semibold rounded-lg hover:bg-slate-700 focus:ring-4 focus:ring-slate-500/20 focus:ring-offset-2 transition-all duration-200",children:"Sign Out"})]}):(0,gs.jsxs)(gs.Fragment,{children:[(0,gs.jsx)(De,{to:"/login",className:"text-slate-600 hover:text-slate-900 font-medium transition-colors duration-200",children:"Sign In"}),(0,gs.jsx)("button",{onClick:c,className:"px-4 py-2 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200",children:e&&r&&["active","trialing"].includes(r.status)?"Open CRM":"Start Free Trial!"})]})})]})})}),(0,gs.jsxs)("section",{className:"pt-20 pb-16 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[(0,gs.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,gs.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full opacity-20 blur-3xl"}),(0,gs.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-slate-100 to-slate-200 rounded-full opacity-20 blur-3xl"})]}),(0,gs.jsxs)("div",{className:"max-w-7xl mx-auto text-center relative z-10",children:[(0,gs.jsxs)("div",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-full text-blue-700 text-sm font-medium mb-8",children:[(0,gs.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2 animate-pulse"}),"New: Advanced Pipeline Analytics"]}),(0,gs.jsxs)("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 bg-clip-text text-transparent mb-6 leading-tight",children:["The CRM Built For",(0,gs.jsx)("span",{className:"block bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Solo Recruiters & Small Firms"})]}),(0,gs.jsx)("p",{className:"text-xl md:text-2xl text-slate-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Lightweight, modern, and designed specifically for solo Recruiters and small firms. Start with a 30-day free trial and manage your Recruitment business without the complexity."}),(0,gs.jsx)("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4 mb-12",children:(0,gs.jsx)("button",{onClick:c,className:"group px-8 py-4 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-lg font-semibold rounded-xl hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:(0,gs.jsxs)("span",{className:"flex items-center",children:[e&&r&&["active","trialing"].includes(r.status)?"Open CRM Dashboard":"Start Free Trial!",(0,gs.jsx)("svg",{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})}),(0,gs.jsx)("div",{className:"flex items-center justify-center space-x-8 text-sm text-slate-500",children:(0,gs.jsxs)("div",{className:"flex items-center",children:[(0,gs.jsx)("div",{className:"flex -space-x-2 mr-3",children:["\ud83d\udc64","\ud83d\udc64","\ud83d\udc64","\ud83d\udc64"].map((e,t)=>(0,gs.jsx)("div",{className:"w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center text-sm",children:e},t))}),(0,gs.jsx)("span",{children:"Join other solo recruiters and small firms using Pebble!"})]})})]})]}),e&&a&&(0,gs.jsx)("section",{className:"py-8 px-4 sm:px-6 lg:px-8 bg-slate-50 border-y border-slate-200",children:(0,gs.jsx)("div",{className:"max-w-7xl mx-auto text-center",children:(0,gs.jsxs)("div",{className:"inline-flex items-center px-6 py-3 bg-slate-100 rounded-full text-slate-800 font-medium",children:[(0,gs.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-600 mr-3"}),"Checking subscription status..."]})})}),e&&r&&["active","trialing"].includes(r.status)&&(0,gs.jsx)("section",{className:"py-8 px-4 sm:px-6 lg:px-8 bg-gradient-to-r from-green-50 to-emerald-50 border-y border-green-200",children:(0,gs.jsxs)("div",{className:"max-w-7xl mx-auto text-center",children:[(0,gs.jsxs)("div",{className:"inline-flex items-center px-6 py-3 bg-green-100 rounded-full text-green-800 font-medium",children:[(0,gs.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),(0,gs.jsx)("span",{children:"trialing"===r.status?"Free Trial Active - Ends ".concat(r.trialEnd?new Date(r.trialEnd).toLocaleDateString():"soon"):"Subscription Active"})]}),(0,gs.jsxs)("p",{className:"mt-3 text-green-700",children:["You already have access to Pebble CRM!"," ",(0,gs.jsx)("button",{onClick:()=>n("/dashboard"),className:"text-green-800 font-semibold underline hover:text-green-900",children:"Go to Dashboard"})]})]})}),(0,gs.jsx)("section",{id:"features",className:"py-20 px-4 sm:px-6 lg:px-8",children:(0,gs.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,gs.jsxs)("div",{className:"text-center mb-16",children:[(0,gs.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Everything You Need, Simplified."}),(0,gs.jsx)("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Pebble combines powerful CRM functionality with elegant simplicity, giving you the tools to grow your business without the overwhelm."})]}),(0,gs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map((e,t)=>(0,gs.jsxs)("div",{className:"group bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8 hover:shadow-xl transition-all duration-300 transform hover:scale-105 hover:-translate-y-1",children:[(0,gs.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br ".concat(e.color," rounded-xl flex items-center justify-center text-white mb-6 group-hover:scale-110 transition-transform duration-300"),children:e.icon}),(0,gs.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-3",children:e.title}),(0,gs.jsx)("p",{className:"text-slate-600 leading-relaxed",children:e.description})]},t))})]})}),(0,gs.jsxs)("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-white/50 relative overflow-hidden",children:[(0,gs.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/30 to-indigo-50/30"}),(0,gs.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10",children:[(0,gs.jsxs)("div",{className:"text-center mb-16",children:[(0,gs.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Start Your Free Trial in Minutes"}),(0,gs.jsx)("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Setting up Pebble is as simple as it gets. No complex configurations, no steep learning curves."})]}),(0,gs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[{step:1,title:"Start Free Trial",description:"Create your account in seconds",icon:"\ud83d\ude80"},{step:2,title:"Build Your Business!",description:"Begin adding clients, candidates, and job opportunities!",icon:"\ud83d\udcc8"}].map((e,t)=>(0,gs.jsxs)("div",{className:"text-center group",children:[(0,gs.jsx)("div",{className:"relative",children:(0,gs.jsxs)("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-600 to-blue-500 rounded-full flex items-center justify-center text-white text-3xl font-bold mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 relative overflow-hidden",children:[(0,gs.jsx)("span",{className:"relative z-10 font-extrabold tracking-wider",children:e.step}),(0,gs.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent transform -rotate-45 w-full h-1"})]})}),(0,gs.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-3",children:e.title}),(0,gs.jsx)("p",{className:"text-slate-600 leading-relaxed",children:e.description})]},t))})]})]}),(0,gs.jsx)("section",{id:"pricing",className:"py-20 px-4 sm:px-6 lg:px-8 bg-white/50",children:(0,gs.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,gs.jsxs)("div",{className:"text-center mb-16",children:[(0,gs.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Simple, Transparent Pricing"}),(0,gs.jsx)("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Start with a 30-day free trial. No commitment, cancel anytime."})]}),(0,gs.jsx)("div",{className:"flex justify-center",children:(0,gs.jsxs)("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border-2 border-blue-500 shadow-blue-100 p-8 w-full max-w-md",children:[(0,gs.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:(0,gs.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-2 rounded-full text-sm font-semibold shadow-lg",children:"Professional Plan"})}),(0,gs.jsxs)("div",{className:"text-center",children:[(0,gs.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Professional"}),(0,gs.jsx)("p",{className:"text-slate-600 mb-6",children:"Everything you need to grow your business"}),(0,gs.jsxs)("div",{className:"mb-8",children:[(0,gs.jsx)("span",{className:"text-4xl font-bold text-slate-900",children:"\xa39"}),(0,gs.jsx)("span",{className:"text-slate-600",children:"/month"})]}),(0,gs.jsx)("ul",{className:"space-y-3 mb-8 text-left",children:["Unlimited Client records","Unlimited Candidate profiles","Unlimited Job listings","Interaction history","Priority Support","Mobile responsive","Real-time dashboard"].map((e,t)=>(0,gs.jsxs)("li",{className:"flex items-center",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e]},t))}),(0,gs.jsx)("button",{onClick:c,className:"w-full px-6 py-3 bg-gradient-to-r from-slate-600 to-blue-600 text-white rounded-xl font-semibold hover:from-slate-700 hover:to-blue-700 shadow-lg hover:shadow-xl transition-all duration-200",children:"Start Free Trial!"})]})]})})]})}),(0,gs.jsx)("section",{id:"support",className:"py-20 px-4 sm:px-6 lg:px-8",children:(0,gs.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,gs.jsxs)("div",{className:"text-center mb-16",children:[(0,gs.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Support"}),(0,gs.jsxs)("p",{className:"text-xl text-slate-600",children:["For all support queries and general questions, email"," ",(0,gs.jsx)("a",{href:"mailto:support@pebblecrm.app",className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"support@pebblecrm.app"})," ","and we will get back to you as soon as possible, within 48 hours."]})]})})}),(0,gs.jsxs)("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-slate-900 to-blue-900 relative overflow-hidden",children:[(0,gs.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/90 to-blue-900/90"}),(0,gs.jsxs)("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[(0,gs.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to start building your business?"}),(0,gs.jsx)("p",{className:"text-xl text-slate-200 mb-8 leading-relaxed",children:"Join other Solo Recruiters & small firms using Pebble."}),(0,gs.jsx)("button",{onClick:c,className:"inline-block px-8 py-4 bg-gradient-to-r from-white to-slate-100 text-slate-900 text-lg font-semibold rounded-xl hover:from-slate-100 hover:to-white focus:ring-4 focus:ring-white/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Start Free Trial!"})]})]}),(0,gs.jsx)("footer",{className:"bg-slate-900 text-white py-16 px-4 sm:px-6 lg:px-8",children:(0,gs.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-12",children:[(0,gs.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,gs.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,gs.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-slate-600 to-blue-500 rounded-lg flex items-center justify-center",children:(0,gs.jsx)("span",{className:"text-white font-bold text-lg",children:"P"})}),(0,gs.jsx)("span",{className:"text-2xl font-bold text-white",children:"Pebble"})]}),(0,gs.jsx)("p",{className:"text-slate-300 max-w-md leading-relaxed",children:"The modern CRM built for Solo Recruiters & small firms. Simple, powerful, and designed to help you grow your business."})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Product"}),(0,gs.jsxs)("ul",{className:"space-y-2",children:[(0,gs.jsx)("li",{children:(0,gs.jsx)("button",{onClick:()=>{var e;null===(e=document.getElementById("features"))||void 0===e||e.scrollIntoView({behavior:"smooth"})},className:"text-slate-300 hover:text-white transition-colors duration-200",children:"Features"})}),(0,gs.jsx)("li",{children:(0,gs.jsx)("button",{onClick:()=>{var e;null===(e=document.getElementById("pricing"))||void 0===e||e.scrollIntoView({behavior:"smooth"})},className:"text-slate-300 hover:text-white transition-colors duration-200",children:"Pricing"})}),(0,gs.jsx)("li",{children:(0,gs.jsx)(De,{to:"/login",className:"text-slate-300 hover:text-white transition-colors duration-200",children:"Sign In"})})]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Company"}),(0,gs.jsxs)("ul",{className:"space-y-2",children:[(0,gs.jsx)("li",{children:(0,gs.jsx)(De,{to:"/privacy",className:"text-slate-300 hover:text-white transition-colors duration-200",children:"Privacy Policy"})}),(0,gs.jsx)("li",{children:(0,gs.jsx)(De,{to:"/terms",className:"text-slate-300 hover:text-white transition-colors duration-200",children:"Terms & Conditions"})}),(0,gs.jsx)("li",{children:(0,gs.jsx)("button",{onClick:()=>{var e;null===(e=document.getElementById("support"))||void 0===e||e.scrollIntoView({behavior:"smooth"})},className:"text-slate-300 hover:text-white transition-colors duration-200",children:"Support"})})]})]})]}),(0,gs.jsx)("div",{className:"border-t border-slate-700 pt-8 text-center",children:(0,gs.jsx)("p",{className:"text-slate-400",children:"\xa9 2025 Pebble. All rights reserved."})})]})})]})},ti=()=>((0,s.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,gs.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:[(0,gs.jsx)("nav",{className:"bg-white/95 backdrop-blur-md border-b border-slate-200/50 shadow-sm",children:(0,gs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,gs.jsxs)(De,{to:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity duration-200",children:[(0,gs.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-slate-700 to-blue-600 rounded-lg flex items-center justify-center shadow-lg",children:(0,gs.jsx)("span",{className:"text-white font-bold text-lg",children:"P"})}),(0,gs.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-slate-700 to-blue-600 bg-clip-text text-transparent",children:"Pebble"})]}),(0,gs.jsx)(De,{to:"/login",className:"px-6 py-2 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200",children:"Sign In"})]})})}),(0,gs.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8 md:p-12",children:[(0,gs.jsxs)("div",{className:"text-center mb-12",children:[(0,gs.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Privacy Policy"}),(0,gs.jsxs)("p",{className:"text-xl text-slate-600",children:["Last updated: ",(new Date).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})]})]}),(0,gs.jsx)("div",{className:"prose prose-slate max-w-none",children:(0,gs.jsxs)("div",{className:"space-y-8",children:[(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Introduction"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed",children:'Pebble ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our Recruitment Customer Relationship Management (CRM) service.'}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mt-4",children:"By using Pebble, you agree to the collection and use of information in accordance with this policy. If you do not agree with our policies and practices, please do not use our service."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Information We Collect"}),(0,gs.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-3",children:"Personal Information"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Account Information:"})," Email address, password, display name"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Profile Information:"})," Company name, phone number format preferences, currency preferences"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Business Data:"})," Client information, candidate profiles, job details, interaction history, pipeline opportunities"]})]}),(0,gs.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-3 mt-6",children:"Automatically Collected Information"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Usage Data:"})," How you interact with our service, features used, time spent"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Device Information:"})," Browser type, operating system, IP address"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Cookies:"})," Session cookies for authentication and preferences"]})]})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"How We Use Your Information"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"We use the collected information for the following purposes:"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsx)("li",{children:"Provide, maintain, and improve our CRM service"}),(0,gs.jsx)("li",{children:"Process transactions and manage your account"}),(0,gs.jsx)("li",{children:"Send you service-related notices and updates"}),(0,gs.jsx)("li",{children:"Respond to your comments, questions, and support requests"}),(0,gs.jsx)("li",{children:"Monitor and analyse usage patterns and trends"}),(0,gs.jsx)("li",{children:"Detect, prevent, and address technical issues"}),(0,gs.jsx)("li",{children:"Comply with legal obligations"})]})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Data Storage and Security"}),(0,gs.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-3",children:"Firebase Backend Services"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"Pebble uses Google Firebase services for data storage and authentication. Your data is stored securely using the following Firebase services:"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Firebase Authentication:"})," Secure user authentication with encrypted password storage"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Cloud Firestore:"})," NoSQL database with automatic encryption at rest and in transit"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Firebase Security Rules:"})," User-level data isolation ensuring your data is only accessible to you"]})]}),(0,gs.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-3 mt-6",children:"Data Protection Measures"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Encryption:"})," All data is encrypted using AES-256 encryption"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Access Control:"})," Firebase Security Rules ensure data isolation between users"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Secure Connections:"})," All data transmission uses HTTPS/TLS encryption"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Regular Backups:"})," Automated backup systems with geographic redundancy"]})]}),(0,gs.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-3 mt-6",children:"Data Location"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed",children:"Your data is stored in Google's secure data centres. While we strive to keep data in your preferred region, data may be processed in countries where Google operates data centres. All data processing complies with applicable data protection laws."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Data Sharing and Disclosure"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"We do not sell, trade, or otherwise transfer your personal information to third parties, except in the following circumstances:"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Service Providers:"})," We use trusted third-party services (Firebase, hosting providers) to operate our service"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Legal Requirements:"})," We may disclose information if required by law or to protect our rights"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Business Transfers:"})," In the event of a merger or acquisition, user information may be transferred"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Consent:"})," We will only share your information with your explicit consent"]})]})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Your Rights and Choices"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"Depending on your location, you may have the following rights regarding your personal information:"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Access:"})," Request a copy of your personal information"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Correction:"})," Update or correct inaccurate information"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Deletion:"})," Request deletion of your personal information"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Portability:"})," Export your data in a machine-readable format"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Restriction:"})," Limit how we process your information"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Objection:"})," Object to certain types of processing"]})]}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mt-4",children:"To exercise these rights, please contact us using the information provided below."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Data Retention"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed",children:"We retain your personal information for as long as your account is active or as needed to provide services. If you delete your account, we will delete or anonymize your personal information within 30 days, except where we are required to retain certain information for legal, regulatory, or security purposes."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Cookies and Tracking Technologies"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"We use cookies and similar tracking technologies to:"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsx)("li",{children:"Maintain your authentication session"}),(0,gs.jsx)("li",{children:"Remember your preferences and settings"}),(0,gs.jsx)("li",{children:"Analyse how you use our service"}),(0,gs.jsx)("li",{children:"Improve our service performance and user experience"})]}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mt-4",children:"You can control cookie settings through your browser preferences. However, disabling certain cookies may affect the functionality of our service."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Children's Privacy"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed",children:"Pebble is not intended for use by individuals under the age of 18. We do not knowingly collect personal information from children under 18. If you become aware that a child has provided us with personal information, please contact us immediately."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"International Data Transfers"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed",children:"Your information may be transferred to and processed in countries other than your own. We ensure that such transfers comply with applicable data protection laws and implement appropriate safeguards to protect your information."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Changes to This Privacy Policy"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed",children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date. We encourage you to review this Privacy Policy periodically for any changes.'})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Contact Us"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"If you have any questions about this Privacy Policy or our data practices, please contact us:"}),(0,gs.jsx)("div",{className:"bg-slate-50 rounded-lg p-4",children:(0,gs.jsxs)("p",{className:"text-slate-700",children:[(0,gs.jsx)("strong",{children:"Email:"})," ",(0,gs.jsx)("a",{href:"mailto:support@pebblecrm.app",className:"text-blue-600 hover:text-blue-800 underline",children:"support@pebblecrm.app"}),(0,gs.jsx)("br",{}),(0,gs.jsx)("strong",{children:"Response Time:"})," We aim to respond to all inquiries within 48 hours"]})})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Legal Basis for Processing (EU/UK Users)"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"For users in the European Union and United Kingdom, we process your personal information based on the following legal grounds:"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Contract:"})," Processing necessary to provide our Recruitment CRM service"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Legitimate Interest:"})," Improving our service and preventing fraud"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Consent:"})," For optional features and communications"]}),(0,gs.jsxs)("li",{children:[(0,gs.jsx)("strong",{children:"Legal Obligation:"})," Compliance with applicable laws"]})]})]})]})})]})})]})),ni=()=>((0,s.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,gs.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:[(0,gs.jsx)("nav",{className:"bg-white/95 backdrop-blur-md border-b border-slate-200/50 shadow-sm",children:(0,gs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,gs.jsxs)(De,{to:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity duration-200",children:[(0,gs.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-slate-700 to-blue-600 rounded-lg flex items-center justify-center shadow-lg",children:(0,gs.jsx)("span",{className:"text-white font-bold text-lg",children:"P"})}),(0,gs.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-slate-700 to-blue-600 bg-clip-text text-transparent",children:"Pebble"})]}),(0,gs.jsx)(De,{to:"/login",className:"px-6 py-2 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200",children:"Sign In"})]})})}),(0,gs.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8 md:p-12",children:[(0,gs.jsx)("div",{className:"text-center mb-12",children:(0,gs.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Terms & Conditions"})}),(0,gs.jsx)("div",{className:"prose prose-slate max-w-none",children:(0,gs.jsxs)("div",{className:"space-y-8",children:[(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Introduction"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed",children:'These Terms and Conditions ("Terms") govern your use of Pebble CRM ("Service") operated by Pebble ("we," "our," or "us"). By accessing or using our Service, you agree to be bound by these Terms.'}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mt-4",children:"If you disagree with any part of these terms, then you may not access the Service. These Terms apply to all visitors, users, and others who access or use the Service."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Service Description"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"Pebble CRM is a Recruitment Customer Relationship Management service designed for solo recruiters and small firms. Our Service includes:"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsx)("li",{children:"Client management and organization"}),(0,gs.jsx)("li",{children:"Job pipeline and opportunity tracking"}),(0,gs.jsx)("li",{children:"Candidate database and management"}),(0,gs.jsx)("li",{children:"Dashboard analytics and reporting"}),(0,gs.jsx)("li",{children:"Mobile-responsive web application"})]})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Subscription and Payment Terms"}),(0,gs.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-3",children:"Free Trial"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"We offer a 30-day free trial for new users. During the trial period, you have full access to all features of the Professional Plan."}),(0,gs.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-3",children:"Subscription Plans"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"After the trial period, you will be automatically charged for the Professional Plan at \xa39/month unless you cancel before the trial ends."}),(0,gs.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-3",children:"Payment Processing"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"All payments are processed securely through Stripe. By subscribing, you authorize us to charge your payment method for the applicable fees."}),(0,gs.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-3",children:"Billing and Renewal"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"Subscriptions automatically renew monthly unless cancelled. You will be charged the subscription fee on the same day of each month."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"User Responsibilities"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"As a user of our Service, you agree to:"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsx)("li",{children:"Provide accurate and complete information when creating your account"}),(0,gs.jsx)("li",{children:"Maintain the security of your account credentials"}),(0,gs.jsx)("li",{children:"Use the Service only for lawful purposes"}),(0,gs.jsx)("li",{children:"Not attempt to gain unauthorized access to our systems"}),(0,gs.jsx)("li",{children:"Not interfere with or disrupt the Service"}),(0,gs.jsx)("li",{children:"Comply with all applicable laws and regulations"})]})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Acceptable Use Policy"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"You may not use our Service to:"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsx)("li",{children:"Store or transmit malicious code, viruses, or harmful content"}),(0,gs.jsx)("li",{children:"Violate any intellectual property rights"}),(0,gs.jsx)("li",{children:"Harass, abuse, or harm others"}),(0,gs.jsx)("li",{children:"Engage in spam or unsolicited communications"}),(0,gs.jsx)("li",{children:"Attempt to reverse engineer or copy our software"}),(0,gs.jsx)("li",{children:"Use the Service for any illegal activities"})]})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Data and Privacy"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"Your privacy is important to us. Our collection and use of personal information is governed by our Privacy Policy, which is incorporated into these Terms by reference."}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"You are responsible for the data you input into our Service and must ensure you have the right to use and store such information."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Intellectual Property"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"The Service and its original content, features, and functionality are owned by Pebble and are protected by international copyright, trademark, patent, trade secret, and other intellectual property laws."}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"You retain ownership of any data you input into our Service. We do not claim ownership of your business data."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Limitation of Liability"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"In no event shall Pebble, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your use of the Service."}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"Our total liability to you for any claims arising from these Terms or your use of the Service shall not exceed the amount you paid us in the 12 months preceding the claim."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Termination"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"You may cancel your subscription at any time through your account settings or by contacting us. Upon cancellation:"}),(0,gs.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-4",children:[(0,gs.jsx)("li",{children:"Your access to the Service will continue until the end of your current billing period"}),(0,gs.jsx)("li",{children:"No further charges will be made to your account"}),(0,gs.jsx)("li",{children:"Your data will be retained for 30 days after cancellation"}),(0,gs.jsx)("li",{children:"After 30 days, your data will be permanently deleted"})]})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Changes to These Terms"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed",children:"We reserve the right to modify or replace these Terms at any time. If a revision is material, we will provide at least 30 days notice prior to any new terms taking effect. What constitutes a material change will be determined at our sole discretion."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Governing Law"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed",children:"These Terms shall be interpreted and governed by the laws of the United Kingdom, without regard to its conflict of law provisions. Any disputes arising from these Terms or your use of the Service shall be resolved in the courts of the United Kingdom."})]}),(0,gs.jsxs)("section",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Contact Us"}),(0,gs.jsx)("p",{className:"text-slate-700 leading-relaxed mb-4",children:"If you have any questions about these Terms & Conditions, please contact us:"}),(0,gs.jsx)("div",{className:"bg-slate-50 rounded-lg p-4",children:(0,gs.jsxs)("p",{className:"text-slate-700",children:[(0,gs.jsx)("strong",{children:"Email:"})," ",(0,gs.jsx)("a",{href:"mailto:support@pebblecrm.app",className:"text-blue-600 hover:text-blue-800 underline",children:"support@pebblecrm.app"}),(0,gs.jsx)("br",{}),(0,gs.jsx)("strong",{children:"Response Time:"})," We aim to respond to all inquiries within 48 hours"]})})]})]})})]})})]})),ri=()=>{var e,t;const{currentUser:n}=vs();return(0,gs.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4",children:(0,gs.jsxs)("div",{className:"max-w-2xl w-full text-center",children:[(0,gs.jsxs)("div",{className:"mb-8",children:[(0,gs.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-4",children:"Upgrade Required"}),(0,gs.jsx)("p",{className:"text-xl text-slate-600",children:"To access Pebble CRM, you need an active subscription"})]}),n&&(0,gs.jsxs)("div",{className:"bg-white rounded-xl p-6 mb-8 shadow-lg",children:[(0,gs.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,gs.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,gs.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:(null===(e=n.displayName)||void 0===e?void 0:e[0])||(null===(t=n.email)||void 0===t?void 0:t[0])||"U"})})}),(0,gs.jsxs)("p",{className:"text-slate-700 mb-2",children:[(0,gs.jsx)("strong",{children:"Signed in as:"})," ",n.email]}),(0,gs.jsx)("p",{className:"text-sm text-slate-500",children:"You're logged in! Now let's get you set up with a subscription"})]}),(0,gs.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-slate-200 mb-8",children:[(0,gs.jsxs)("div",{className:"mb-6",children:[(0,gs.jsx)("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Professional Plan"}),(0,gs.jsx)("p",{className:"text-slate-600",children:"Everything you need to manage your customer relationships"})]}),(0,gs.jsxs)("div",{className:"mb-6",children:[(0,gs.jsxs)("div",{className:"text-4xl font-bold text-slate-900 mb-2",children:["\xa39",(0,gs.jsx)("span",{className:"text-lg text-slate-500",children:"/month"})]}),(0,gs.jsxs)("p",{className:"text-slate-600",children:["Start with a ",(0,gs.jsx)("strong",{children:"30-day free trial"})]})]}),(0,gs.jsx)("div",{className:"mb-8",children:(0,gs.jsxs)("ul",{className:"text-left space-y-3",children:[(0,gs.jsxs)("li",{className:"flex items-center",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Unlimited contacts, opportunities, and tasks"]}),(0,gs.jsxs)("li",{className:"flex items-center",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Pipeline management and analytics"]}),(0,gs.jsxs)("li",{className:"flex items-center",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Email support with 48-hour response"]}),(0,gs.jsxs)("li",{className:"flex items-center",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Cancel anytime, no long-term commitment"]})]})}),(0,gs.jsx)("button",{onClick:()=>{const e="https://buy.stripe.com/28E9AUcYu3uC8vjavQfjG01?prefilled_email=".concat(encodeURIComponent((null===n||void 0===n?void 0:n.email)||""),"&client_reference_id=").concat((null===n||void 0===n?void 0:n.uid)||"");window.location.href=e},className:"w-full bg-gradient-to-r from-slate-600 to-blue-600 text-white text-lg font-semibold py-4 px-8 rounded-xl hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:n?"Continue to Payment":"Start Free Trial"})]}),(0,gs.jsxs)("div",{className:"text-slate-500",children:[(0,gs.jsxs)("p",{className:"mb-2",children:["Already have a subscription?"," ",(0,gs.jsx)(De,{to:"/dashboard",className:"text-blue-600 hover:text-blue-800 underline",children:"Go to Dashboard"})]}),(0,gs.jsxs)("p",{className:"mb-4",children:["Need help? Contact us at"," ",(0,gs.jsx)("a",{href:"mailto:support@pebblecrm.app",className:"text-blue-600 hover:text-blue-800 underline",children:"support@pebblecrm.app"})]})]})]})})},si=()=>{const e=ne(),[t]=Re(),{currentUser:n}=vs(),[r,i]=(0,s.useState)(5);(0,s.useEffect)(()=>{const t=setInterval(()=>{i(t=>t<=1?(e("/dashboard"),0):t-1)},1e3);return()=>clearInterval(t)},[e]);return(0,gs.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30 flex items-center justify-center px-4",children:(0,gs.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,gs.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,gs.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,gs.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Payment Successful!"}),(0,gs.jsx)("p",{className:"text-lg text-slate-600 mb-6",children:"Welcome to Pebble CRM! Your 30-day free trial has started."}),n&&(0,gs.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200 mb-8",children:[(0,gs.jsx)("h2",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Account Details"}),(0,gs.jsxs)("div",{className:"text-left space-y-2",children:[(0,gs.jsxs)("p",{className:"text-sm text-slate-600",children:[(0,gs.jsx)("span",{className:"font-medium",children:"Name:"})," ",n.displayName]}),(0,gs.jsxs)("p",{className:"text-sm text-slate-600",children:[(0,gs.jsx)("span",{className:"font-medium",children:"Email:"})," ",n.email]}),(0,gs.jsxs)("p",{className:"text-sm text-slate-600",children:[(0,gs.jsx)("span",{className:"font-medium",children:"Plan:"})," Professional"]}),(0,gs.jsxs)("p",{className:"text-sm text-slate-600",children:[(0,gs.jsx)("span",{className:"font-medium",children:"Trial:"})," 30 days free"]})]})]}),(0,gs.jsxs)("div",{className:"space-y-4",children:[(0,gs.jsx)("button",{onClick:()=>{e("/dashboard")},className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Go to Dashboard"}),(0,gs.jsxs)("p",{className:"text-sm text-slate-500",children:["Redirecting automatically in ",r," seconds..."]})]}),(0,gs.jsxs)("div",{className:"mt-8 text-sm text-slate-500",children:[(0,gs.jsx)("p",{children:"You'll receive a confirmation email shortly."}),(0,gs.jsxs)("p",{children:["Need help? Contact us at"," ",(0,gs.jsx)("a",{href:"mailto:support@pebblecrm.app",className:"text-blue-600 hover:text-blue-800 underline",children:"support@pebblecrm.app"})]})]})]})})},ii=()=>{const{contacts:e,deals:t,tasks:n,loading:r}=Ws(),{currentUser:i}=vs(),{formatCurrency:a}=Qs(),o=ne(),[l,c]=(0,s.useState)(1e4),[u,d]=(0,s.useState)(null);(0,s.useEffect)(()=>{const e=localStorage.getItem("monthlyTarget");e&&c(parseFloat(e))},[]),(0,s.useEffect)(()=>{(async()=>{if(i)try{const e=await Xs(i.uid);d(e)}catch(e){console.error("Error loading subscription:",e),d(null)}})()},[i]);const h=(0,s.useMemo)(()=>{const n=e.length,r=e.filter(e=>e.tags&&e.tags.includes("candidate")).length,s=e=>{const t=e.toLowerCase();return t.includes("lead")?"lead":t.includes("live")||t.includes("opportunity")?"live-opportunity":t.includes("shortlist")?"shortlist-sent":t.includes("interview")?"interview":t.includes("offer")?"offer":t.includes("placed")?"placed":e};return{totalClients:n,totalCandidates:r,liveJobs:t.filter(e=>"placed"!==s(e.stage)).length,placements:t.filter(e=>"placed"===s(e.stage)).length,totalRevenue:t.filter(e=>"placed"===s(e.stage)).reduce((e,t)=>e+(t.value&&t.feePercentage?t.value*t.feePercentage/100:0),0)}},[e,t]),f=Math.min(h.totalRevenue/l*100,100);return(0,gs.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:(0,gs.jsxs)("div",{className:"max-w-none mx-auto px-8 sm:px-12 lg:px-16 py-8 space-y-8",children:[(0,gs.jsxs)("div",{className:"mb-8",children:[(0,gs.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-3",children:"KPI Dashboard"}),(0,gs.jsx)("p",{className:"text-lg text-slate-600",children:"Track your recruitment performance and key metrics"})]}),(0,gs.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,gs.jsxs)("button",{onClick:()=>o("/contacts"),className:"group inline-flex items-center px-5 py-3 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-sm font-semibold rounded-xl hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Client"]}),(0,gs.jsxs)("button",{onClick:()=>o("/jobs"),className:"group inline-flex items-center px-5 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white text-sm font-semibold rounded-xl hover:from-purple-700 hover:to-purple-800 focus:ring-4 focus:ring-purple-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M9 11h.01"})}),"Add Job Order"]}),(0,gs.jsxs)("button",{onClick:()=>o("/candidates"),className:"group inline-flex items-center px-5 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white text-sm font-semibold rounded-xl hover:from-orange-700 hover:to-orange-800 focus:ring-4 focus:ring-orange-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Add Candidate"]})]}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,gs.jsxs)("div",{className:"group bg-white rounded-2xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-all duration-300 transform hover:scale-105 cursor-pointer",onClick:()=>o("/contacts"),children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,gs.jsx)("div",{className:"p-2.5 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl",children:(0,gs.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,gs.jsx)("div",{className:"text-right",children:(0,gs.jsx)("p",{className:"text-xs text-slate-500",children:"Total"})})]}),(0,gs.jsx)("div",{className:"mb-2",children:(0,gs.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:h.totalClients})}),(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Clients"}),(0,gs.jsxs)("div",{className:"mt-3 flex items-center text-xs text-slate-500",children:[(0,gs.jsx)("span",{children:"Click to view"}),(0,gs.jsx)("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,gs.jsxs)("div",{className:"group bg-white rounded-2xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-all duration-300 transform hover:scale-105 cursor-pointer",onClick:()=>o("/jobs"),children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,gs.jsx)("div",{className:"p-2.5 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl",children:(0,gs.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M9 11h.01"})})}),(0,gs.jsx)("div",{className:"text-right",children:(0,gs.jsx)("p",{className:"text-xs text-slate-500",children:"Live"})})]}),(0,gs.jsx)("div",{className:"mb-2",children:(0,gs.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:h.liveJobs})}),(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Jobs"}),(0,gs.jsxs)("div",{className:"mt-3 flex items-center text-xs text-slate-500",children:[(0,gs.jsx)("span",{children:"Click to view"}),(0,gs.jsx)("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,gs.jsxs)("div",{className:"group bg-white rounded-2xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-all duration-300 transform hover:scale-105 cursor-pointer",onClick:()=>o("/jobs"),children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,gs.jsx)("div",{className:"p-2.5 bg-gradient-to-br from-green-100 to-green-200 rounded-xl",children:(0,gs.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,gs.jsx)("div",{className:"text-right",children:(0,gs.jsx)("p",{className:"text-xs text-slate-500",children:"Total"})})]}),(0,gs.jsx)("div",{className:"mb-2",children:(0,gs.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:h.placements})}),(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Placements"}),(0,gs.jsxs)("div",{className:"mt-3 flex items-center text-xs text-slate-500",children:[(0,gs.jsx)("span",{children:"Click to view"}),(0,gs.jsx)("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,gs.jsxs)("div",{className:"group bg-white rounded-2xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-all duration-300 transform hover:scale-105 cursor-pointer",onClick:()=>o("/jobs"),children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,gs.jsx)("div",{className:"p-2.5 bg-gradient-to-br from-amber-100 to-amber-200 rounded-xl",children:(0,gs.jsx)("svg",{className:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,gs.jsx)("div",{className:"text-right",children:(0,gs.jsx)("p",{className:"text-xs text-slate-500",children:"Total"})})]}),(0,gs.jsx)("div",{className:"mb-2",children:(0,gs.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:a(h.totalRevenue)})}),(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Total Fees"}),(0,gs.jsxs)("div",{className:"mt-3 flex items-center text-xs text-slate-500",children:[(0,gs.jsx)("span",{children:"Click to view"}),(0,gs.jsx)("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),(0,gs.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-8",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Revenue Target Progress"}),(0,gs.jsx)("p",{className:"text-slate-600",children:"Track your progress towards your monthly revenue goal"})]}),(0,gs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,gs.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Monthly Target:"}),(0,gs.jsx)("input",{type:"number",value:l,onChange:e=>{return t=parseFloat(e.target.value)||0,c(t),void localStorage.setItem("monthlyTarget",t.toString());var t},className:"w-32 px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"10000"})]})]}),(0,gs.jsxs)("div",{className:"space-y-4",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,gs.jsxs)("span",{className:"text-slate-600",children:["Progress: ",a(h.totalRevenue)," / ",a(l)]}),(0,gs.jsxs)("span",{className:"font-semibold text-slate-900",children:[f.toFixed(1),"%"]})]}),(0,gs.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-4 overflow-hidden",children:(0,gs.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-emerald-500 transition-all duration-500 ease-out ".concat(f>=100?"animate-pulse":""),style:{width:"".concat(f,"%")}})}),(0,gs.jsx)("div",{className:"text-sm text-slate-600",children:f>=100?(0,gs.jsx)("span",{className:"text-green-600 font-medium",children:"\ud83c\udf89 Target achieved! Great work!"}):(0,gs.jsxs)("span",{children:["Target remaining: ",a(l-h.totalRevenue)]})})]})]})]})})},ai=e=>{let{contact:t,onSubmit:n,onCancel:r,isOpen:i}=e;const{formatPhoneNumber:a}=Qs(),{currentUser:o}=vs(),[l,c]=(0,s.useState)({firstName:"",lastName:"",email:"",phone:"",company:"",position:"",notes:"",tags:[]}),[u,d]=(0,s.useState)(""),[h,f]=(0,s.useState)({}),[m,p]=(0,s.useState)(!1),[g,x]=(0,s.useState)({type:"",date:(new Date).toISOString().split("T")[0],notes:""}),[v,b]=(0,s.useState)([]);(0,s.useEffect)(()=>{c(t?{firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",phone:t.phone||"",company:t.company||"",position:t.position||"",notes:t.notes||"",tags:[...t.tags]}:{firstName:"",lastName:"",email:"",phone:"",company:"",position:"",notes:"",tags:[]}),f({}),d(""),p(!1)},[null===t||void 0===t?void 0:t.id]);const y=()=>{u.trim()&&!l.tags.includes(u.trim())&&(c(e=>(0,Oe.A)((0,Oe.A)({},e),{},{tags:[...e.tags,u.trim()]})),d(""))},w=(e,t)=>{x(n=>(0,Oe.A)((0,Oe.A)({},n),{},{[e]:t}))};if(!i)return null;const N=!!t,j=N?"Edit Client":"Add New Client",k=N?"Update Client":"Add Client";return(0,gs.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-[60]",children:(0,gs.jsxs)("div",{className:"relative top-20 mx-auto p-6 border w-full max-w-2xl shadow-xl rounded-xl bg-white",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,gs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,gs.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:(0,gs.jsx)("span",{className:"text-primary-600 text-xl",children:"\ud83d\udc65"})}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:j}),(0,gs.jsxs)("p",{className:"text-sm text-gray-500",children:[N?"Update client information":"Add a new client to your CRM",v.length>0&&(0,gs.jsxs)("span",{className:"ml-2 text-primary-600 font-medium",children:["\u2022 ",v.length," interaction",1!==v.length?"s":""," added"]})]})]})]}),(0,gs.jsx)("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,gs.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,gs.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return l.firstName.trim()||(e.firstName="First name is required"),l.lastName.trim()||(e.lastName="Last name is required"),l.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)&&(e.email="Please enter a valid email address"),f(e),0===Object.keys(e).length})()){p(!0);try{const e={firstName:l.firstName.trim(),lastName:l.lastName.trim(),email:l.email.trim()||void 0,phone:l.phone.trim()||void 0,company:l.company.trim()||void 0,position:l.position.trim()||void 0,notes:l.notes.trim()||"",tags:l.tags};await n(e,v),v.length>0&&!t&&o&&console.log("Interactions to be saved:",v)}catch(r){console.error("Form submission error:",r)}finally{p(!1)}}},className:"space-y-6",children:[(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),(0,gs.jsx)("input",{type:"text",value:l.firstName,onChange:e=>c(t=>(0,Oe.A)((0,Oe.A)({},t),{},{firstName:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors ".concat(h.firstName?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"),placeholder:"First name"}),h.firstName&&(0,gs.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.firstName})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),(0,gs.jsx)("input",{type:"text",value:l.lastName,onChange:e=>c(t=>(0,Oe.A)((0,Oe.A)({},t),{},{lastName:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors ".concat(h.lastName?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"),placeholder:"Last name"}),h.lastName&&(0,gs.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.lastName})]})]}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,gs.jsx)("input",{type:"email",value:l.email,onChange:e=>c(t=>(0,Oe.A)((0,Oe.A)({},t),{},{email:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors ".concat(h.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"),placeholder:"email@example.com"}),h.email&&(0,gs.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.email})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),(0,gs.jsx)("input",{type:"tel",value:l.phone,onChange:e=>c(t=>(0,Oe.A)((0,Oe.A)({},t),{},{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"".concat(a("5551234567").replace("5551234567","555 123 4567"))}),(0,gs.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Enter phone number (will be formatted automatically)"})]})]}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),(0,gs.jsx)("input",{type:"text",value:l.company,onChange:e=>c(t=>(0,Oe.A)((0,Oe.A)({},t),{},{company:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"Company name"})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position"}),(0,gs.jsx)("input",{type:"text",value:l.position,onChange:e=>c(t=>(0,Oe.A)((0,Oe.A)({},t),{},{position:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"Job title"})]})]}),(0,gs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,gs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Add Interaction"}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interaction Type *"}),(0,gs.jsxs)("select",{value:g.type,onChange:e=>w("type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",children:[(0,gs.jsx)("option",{value:"",children:"Select interaction type"}),(0,gs.jsx)("option",{value:"call",children:"Phone Call"}),(0,gs.jsx)("option",{value:"email",children:"Email"}),(0,gs.jsx)("option",{value:"meeting",children:"Meeting"}),(0,gs.jsx)("option",{value:"proposal",children:"Proposal Sent"}),(0,gs.jsx)("option",{value:"follow_up",children:"Follow Up"}),(0,gs.jsx)("option",{value:"other",children:"Other"})]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,gs.jsx)("input",{type:"date",value:g.date,onChange:e=>w("date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"})]})]}),(0,gs.jsxs)("div",{className:"mt-4",children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interaction Notes *"}),(0,gs.jsx)("textarea",{value:g.notes,onChange:e=>w("notes",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors min-h-[80px] resize-none",placeholder:"Add notes about this interaction..."})]}),(0,gs.jsx)("div",{className:"mt-4 flex justify-end",children:(0,gs.jsx)("button",{type:"button",onClick:()=>{if(g.type&&g.date&&g.notes.trim()){b(e=>[...e,(0,Oe.A)({},g)]),x({type:"",date:(new Date).toISOString().split("T")[0],notes:""});const e=document.querySelector("[data-interaction-button]");if(e){const t=e.textContent;e.textContent="Added!",e.classList.add("bg-green-600"),setTimeout(()=>{e.textContent=t,e.classList.remove("bg-green-600")},1e3)}}},disabled:!g.type||!g.date||!g.notes.trim(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed","data-interaction-button":!0,children:"Add Interaction"})}),g.type||g.date||g.notes.trim()?(0,gs.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[!g.type&&(0,gs.jsx)("span",{className:"block",children:"\u2022 Select an interaction type"}),!g.date&&(0,gs.jsx)("span",{className:"block",children:"\u2022 Choose a date"}),!g.notes.trim()&&(0,gs.jsx)("span",{className:"block",children:"\u2022 Add interaction notes"})]}):null,v.length>0&&(0,gs.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,gs.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Added Interactions:"}),(0,gs.jsx)("div",{className:"space-y-2",children:v.map((e,t)=>(0,gs.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200",children:[(0,gs.jsxs)("div",{className:"flex-1",children:[(0,gs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,gs.jsx)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:e.type.replace("_"," ")}),(0,gs.jsx)("span",{className:"text-sm text-gray-500",children:e.date})]}),(0,gs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.notes})]}),(0,gs.jsx)("button",{type:"button",onClick:()=>(e=>{b(t=>t.filter((t,n)=>n!==e))})(t),className:"ml-2 text-red-600 hover:text-red-800 p-1",children:(0,gs.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))})]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,gs.jsxs)("div",{className:"flex space-x-2 mb-3",children:[(0,gs.jsx)("input",{type:"text",value:u,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),y())},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"Add a tag"}),(0,gs.jsx)("button",{type:"button",onClick:y,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Add"})]}),l.tags.length>0&&(0,gs.jsx)("div",{className:"flex flex-wrap gap-2",children:l.tags.map((e,t)=>(0,gs.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary-100 text-primary-800",children:[e,(0,gs.jsx)("button",{type:"button",onClick:()=>{return t=e,void c(e=>(0,Oe.A)((0,Oe.A)({},e),{},{tags:e.tags.filter(e=>e!==t)}));var t},className:"ml-2 text-primary-600 hover:text-primary-800",children:"\xd7"})]},t))})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,gs.jsx)("textarea",{value:l.notes,onChange:e=>c(t=>(0,Oe.A)((0,Oe.A)({},t),{},{notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors min-h-[100px] resize-none",placeholder:"Add notes about this contact..."})]}),(0,gs.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,gs.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors font-medium",disabled:m,children:"Cancel"}),(0,gs.jsx)("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:m,children:m?(0,gs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gs.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,gs.jsx)("span",{children:"Processing..."})]}):k})]})]})]})})},oi=e=>{let{contact:t,onClose:n,onEdit:r,onDelete:i,onNavigateToJob:a}=e;const{deals:o,interactions:l}=Ws(),{formatPhoneNumber:c,formatCurrency:u}=Qs(),[d,h]=(0,s.useState)("overview"),f=(0,s.useMemo)(()=>o.filter(e=>e.contactId===t.id),[o,t.id]),m=(0,s.useMemo)(()=>l.filter(e=>e.contactId===t.id),[l,t.id]),p=(0,s.useMemo)(()=>({totalJobs:f.length,activeJobs:f.filter(e=>!["placed"].includes(e.stage)).length,totalValue:f.reduce((e,t)=>e+(t.value&&t.feePercentage?t.value*t.feePercentage/100:0),0),wonValue:f.filter(e=>"placed"===e.stage).reduce((e,t)=>e+(t.value&&t.feePercentage?t.value*t.feePercentage/100:0),0)}),[f]),g=e=>{if(!e)return"No date";let t=e;return e&&"object"===typeof e&&"toDate"in e?t=e.toDate():e&&"string"===typeof e&&(t=new Date(e)),t instanceof Date?t.toLocaleDateString():"Invalid date"},x=e=>{switch(e){case"lead":return"bg-slate-100 text-slate-800";case"live-opportunity":return"bg-emerald-100 text-emerald-800";case"shortlist-sent":return"bg-yellow-100 text-yellow-800";case"interview":return"bg-orange-100 text-orange-800";case"offer":return"bg-purple-100 text-purple-800";case"placed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},v=e=>{switch(e){case"lead":return"Lead";case"live-opportunity":return"Live Job";case"shortlist-sent":return"Shortlist Sent";case"interview":return"Interview";case"offer":return"Offer";case"placed":return"Placed";default:return e}},b=e=>{switch(e){case"call":return"\ud83d\udcde";case"meeting":return"\ud83e\udd1d";case"email":return"\ud83d\udce7";case"note":return"\ud83d\udcdd";case"follow-up":return"\u23f0";case"proposal":return"\ud83d\udcc4";default:return"\ud83d\udccb"}},y=e=>{switch(e){case"call":return"Phone Call";case"meeting":return"Meeting";case"email":return"Email";case"note":return"Note";case"follow-up":return"Follow Up";case"proposal":return"Proposal Sent";case"other":return"Other";default:return e}};return(0,gs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,gs.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[(0,gs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,gs.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center",children:(0,gs.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:[t.firstName.charAt(0),t.lastName.charAt(0)]})}),(0,gs.jsxs)("div",{children:[(0,gs.jsxs)("h2",{className:"text-2xl font-bold text-slate-900",children:[t.firstName," ",t.lastName]}),(0,gs.jsxs)("p",{className:"text-slate-600",children:[t.position," ",t.company?"at ".concat(t.company):""]})]})]}),(0,gs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,gs.jsx)("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit"}),(0,gs.jsx)("button",{onClick:i,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"}),(0,gs.jsx)("button",{onClick:n,className:"p-2 text-slate-400 hover:text-slate-600 transition-colors",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,gs.jsxs)("div",{className:"flex border-b border-slate-200",children:[(0,gs.jsx)("button",{onClick:()=>h("overview"),className:"px-6 py-3 font-medium transition-colors ".concat("overview"===d?"text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:text-slate-700"),children:"Overview"}),(0,gs.jsxs)("button",{onClick:()=>h("jobs"),className:"px-6 py-3 font-medium transition-colors ".concat("jobs"===d?"text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:text-slate-700"),children:["Jobs (",f.length,")"]}),(0,gs.jsxs)("button",{onClick:()=>h("interactions"),className:"px-6 py-3 font-medium transition-colors ".concat("interactions"===d?"text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:text-slate-700"),children:["Interactions (",m.length,")"]})]}),(0,gs.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:["overview"===d&&(0,gs.jsxs)("div",{className:"space-y-6",children:[(0,gs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,gs.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[(0,gs.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:p.totalJobs}),(0,gs.jsx)("p",{className:"text-sm text-blue-600",children:"Total Jobs"})]}),(0,gs.jsxs)("div",{className:"bg-emerald-50 p-4 rounded-lg text-center",children:[(0,gs.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:p.activeJobs}),(0,gs.jsx)("p",{className:"text-sm text-emerald-600",children:"Active Jobs"})]}),(0,gs.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[(0,gs.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:u(p.totalValue)}),(0,gs.jsx)("p",{className:"text-sm text-purple-600",children:"Total Value"})]}),(0,gs.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[(0,gs.jsx)("p",{className:"text-2xl font-bold text-green-600",children:u(p.wonValue)}),(0,gs.jsx)("p",{className:"text-sm text-green-600",children:"Won Value"})]})]}),(0,gs.jsxs)("div",{className:"bg-slate-50 p-6 rounded-lg",children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Client Information"}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm text-slate-500",children:"Email"}),t.email?(0,gs.jsx)("a",{href:"mailto:".concat(t.email),className:"font-medium text-blue-600 hover:text-blue-800 hover:underline transition-colors",children:t.email}):(0,gs.jsx)("p",{className:"font-medium",children:"No email"})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm text-slate-500",children:"Phone"}),(0,gs.jsx)("p",{className:"font-medium",children:t.phone?c(t.phone):"No phone"})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm text-slate-500",children:"Company"}),(0,gs.jsx)("p",{className:"font-medium",children:t.company||"No company"})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm text-slate-500",children:"Position"}),(0,gs.jsx)("p",{className:"font-medium",children:t.position||"No position"})]})]}),t.notes&&(0,gs.jsxs)("div",{className:"mt-4",children:[(0,gs.jsx)("p",{className:"text-sm text-slate-500",children:"Notes"}),(0,gs.jsx)("p",{className:"font-medium",children:t.notes})]}),t.tags&&t.tags.length>0&&(0,gs.jsxs)("div",{className:"mt-4",children:[(0,gs.jsx)("p",{className:"text-sm text-slate-500",children:"Tags"}),(0,gs.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:t.tags.map((e,t)=>(0,gs.jsx)("span",{className:"px-3 py-1 bg-slate-200 text-slate-700 rounded-full text-sm",children:e},t))})]})]})]}),"jobs"===d&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Job Orders"}),f.length>0?(0,gs.jsx)("div",{className:"overflow-x-auto",children:(0,gs.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,gs.jsx)("thead",{className:"bg-slate-50",children:(0,gs.jsxs)("tr",{children:[(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Job Title"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Stage"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Value"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created"})]})}),(0,gs.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:f.map(e=>(0,gs.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:a?(0,gs.jsx)("button",{onClick:()=>a(e.id),className:"text-sm font-medium text-blue-600 hover:text-blue-800 hover:underline transition-colors cursor-pointer text-left",children:e.title}):(0,gs.jsx)("div",{className:"text-sm font-medium text-slate-900",children:e.title})}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(x(e.stage)),children:v(e.stage)})}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"text-sm text-slate-900",children:u(e.value)})}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"text-sm text-slate-500",children:g(e.createdAt)})})]},e.id))})]})}):(0,gs.jsx)("div",{className:"text-center py-8 text-slate-500",children:(0,gs.jsx)("p",{children:"No job orders found for this client."})})]}),"interactions"===d&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Interaction History"}),m.length>0?(0,gs.jsx)("div",{className:"overflow-x-auto",children:(0,gs.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,gs.jsx)("thead",{className:"bg-slate-50",children:(0,gs.jsxs)("tr",{children:[(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Details"})]})}),(0,gs.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:m.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).map(e=>(0,gs.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gs.jsx)("span",{className:"text-lg",children:b(e.type)}),(0,gs.jsx)("span",{className:"text-sm font-medium text-slate-900 capitalize",children:y(e.type)})]})}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"text-sm text-slate-500",children:g(e.date)})}),(0,gs.jsx)("td",{className:"px-6 py-4",children:(0,gs.jsx)("div",{className:"text-sm text-slate-900",children:e.notes})})]},e.id))})]})}):(0,gs.jsx)("div",{className:"text-center py-8 text-slate-500",children:(0,gs.jsx)("p",{children:"No interactions found for this client."})})]})]})]})})},li=()=>(0,gs.jsx)("div",{className:"card",children:(0,gs.jsx)("div",{className:"overflow-x-auto",children:(0,gs.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gs.jsx)("thead",{className:"bg-gray-50",children:(0,gs.jsxs)("tr",{children:[(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,gs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[...Array(5)].map((e,t)=>(0,gs.jsxs)("tr",{children:[(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsxs)("div",{className:"flex items-center",children:[(0,gs.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full animate-pulse"}),(0,gs.jsxs)("div",{className:"ml-4 space-y-2",children:[(0,gs.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"}),(0,gs.jsx)("div",{className:"h-3 bg-gray-200 rounded w-20 animate-pulse"})]})]})}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 animate-pulse"})}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsxs)("div",{className:"flex space-x-2",children:[(0,gs.jsx)("div",{className:"h-6 bg-gray-200 rounded-full w-16 animate-pulse"}),(0,gs.jsx)("div",{className:"h-6 bg-gray-200 rounded-full w-20 animate-pulse"})]})}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsxs)("div",{className:"flex space-x-2",children:[(0,gs.jsx)("div",{className:"h-6 bg-gray-200 rounded w-12 animate-pulse"}),(0,gs.jsx)("div",{className:"h-6 bg-gray-200 rounded w-16 animate-pulse"})]})})]},t))})]})})}),ci=()=>{const e=ne(),{contacts:t,setContacts:n,addContact:r,updateContact:i,deleteContact:a,addInteraction:o}=Ws(),{currentUser:l}=vs(),{formatPhoneNumber:c}=Qs(),[u,d]=(0,s.useState)(!0),[h,f]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[g,x]=(0,s.useState)(!1),[v,b]=(0,s.useState)(null),[y,w]=(0,s.useState)(null),[N,j]=(0,s.useState)(""),[k,S]=(0,s.useState)(""),[E,C]=(0,s.useState)("name"),[_,T]=(0,s.useState)("asc");(0,s.useEffect)(()=>{if(l){(async()=>{try{d(!0);const e=await Ds(l.uid);n(e)}catch(e){console.error("Error loading contacts:",e)}finally{d(!1),f(!0)}})()}},[l,n]),(0,s.useEffect)(()=>{const e=e=>{y&&!e.target.closest(".relative")&&w(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[y]);const I=(0,s.useMemo)(()=>{let e=t.filter(e=>{const t=""===N||e.firstName.toLowerCase().includes(N.toLowerCase())||e.lastName.toLowerCase().includes(N.toLowerCase())||e.email&&e.email.toLowerCase().includes(N.toLowerCase())||e.company&&e.company.toLowerCase().includes(N.toLowerCase())||e.tags&&e.tags.some(e=>e.toLowerCase().includes(N.toLowerCase())),n=""===k||e.tags&&e.tags.includes(k);return t&&n});return e.sort((e,t)=>{let n,r;switch(E){case"name":n="".concat(e.firstName," ").concat(e.lastName).toLowerCase(),r="".concat(t.firstName," ").concat(t.lastName).toLowerCase();break;case"company":n=(e.company||"").toLowerCase(),r=(t.company||"").toLowerCase();break;case"createdAt":n=e.createdAt,r=t.createdAt;break;default:n=e.firstName.toLowerCase(),r=t.firstName.toLowerCase()}return"asc"===_?n<r?-1:n>r?1:0:n>r?-1:n<r?1:0}),e},[t,N,k,E,_]),A=(0,s.useMemo)(()=>{const e=new Set;return t.forEach(t=>{t.tags&&t.tags.forEach(t=>e.add(t))}),Array.from(e).sort()},[t]),D=(0,s.useCallback)(()=>{b(null),p(!0)},[]),P=(0,s.useCallback)(t=>{x(!1),e("/jobs?jobId=".concat(t))},[e]),L=(0,s.useCallback)(async(e,t)=>{if(l)try{d(!0),console.log("Adding contact with data:",e),console.log("Interactions to save:",t);const r=(0,Oe.A)((0,Oe.A)({},e),{},{userId:l.uid});console.log("Final client data:",r);const s=await(async e=>{try{console.log("=== ADD CONTACT DEBUG START ==="),console.log("Input contact data:",e),console.log("Current user context - checking if we have access to db:",!!ps),console.log("Contacts collection reference:",Is);const t=Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return void 0!==n}));console.log("Cleaned contact data for Firestore:",t),console.log("Checking for any remaining undefined values..."),Object.entries(t).forEach(e=>{let[t,n]=e;void 0===n&&console.warn("WARNING: Found undefined value for key: ".concat(t))});const n=(0,Oe.A)((0,Oe.A)({},t),{},{createdAt:ss.Timestamp.now(),updatedAt:ss.Timestamp.now()});console.log("Final document data for Firestore:",n),console.log("Data types:",Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e;return[t,typeof n]}))),console.log("About to call addDoc...");const r=await(0,ss.addDoc)(Is,n);console.log("addDoc successful! Document ID:",r.id);const s=(0,Oe.A)((0,Oe.A)({id:r.id},e),{},{createdAt:new Date,updatedAt:new Date});return console.log("Contact added successfully:",s),console.log("=== ADD CONTACT DEBUG END ==="),s}catch(t){throw console.error("=== ADD CONTACT ERROR ==="),console.error("Error adding contact to Firestore:",t),console.error("Error details:",{code:null===t||void 0===t?void 0:t.code,message:null===t||void 0===t?void 0:t.message,stack:null===t||void 0===t?void 0:t.stack}),console.error("=== END ERROR ==="),t}})(r);if(t&&t.length>0&&s){console.log("Saving interactions for contact:",s.id),console.log("Interactions to save:",t);const e=[];for(const r of t)try{const t=await Bs({contactId:s.id,userId:l.uid,type:r.type,date:new Date(r.date),notes:r.notes});console.log("Saved interaction:",t),e.push(t),o(t)}catch(n){console.error("Error saving interaction:",n)}console.log("All interactions saved:",e)}p(!1)}catch(n){console.error("Error adding contact:",n),alert("Failed to add contact: ".concat(n.message||"Unknown error"))}finally{d(!1)}},[l,o]),R=(0,s.useCallback)(async e=>{if(v)try{d(!0),await(async(e,t)=>{try{const n=Object.fromEntries(Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}));console.log("Original update data:",t),console.log("Cleaned update data for Firestore:",n);const r=(0,Oe.A)((0,Oe.A)({},n),{},{updatedAt:ss.Timestamp.now()});console.log("Final update data for Firestore:",r);const s=(0,ss.H9)(ps,"contacts",e);await(0,ss.mZ)(s,r),console.log("Contact updated successfully")}catch(n){throw console.error("Error updating contact in Firestore:",n),n}})(v.id,e),p(!1),b(null)}catch(t){console.error("Error updating contact:",t),alert("Failed to update contact: ".concat(t.message||"Unknown error"))}finally{d(!1)}},[v]),O=(0,s.useCallback)(async e=>{try{d(!0),await(async e=>{const t=(0,ss.H9)(ps,"contacts",e);await(0,ss.kd)(t)})(e),x(!1),b(null)}catch(t){console.error("Error deleting contact:",t),alert("Failed to delete contact: ".concat(t.message||"Unknown error"))}finally{d(!1)}},[]),M=(0,s.useCallback)(e=>{b(e),x(!0)},[]),F=(0,s.useCallback)(()=>{p(!1)},[]),U=e=>{if(!e)return"No date";let t=e;return e&&"object"===typeof e&&"toDate"in e?t=e.toDate():e&&"string"===typeof e&&(t=new Date(e)),t instanceof Date?t.toLocaleDateString():"Invalid date"};return u&&!h?(0,gs.jsx)("div",{className:"space-y-6",children:(0,gs.jsx)(li,{})}):(0,gs.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:(0,gs.jsxs)("div",{className:"max-w-none mx-auto px-8 sm:px-12 lg:px-16 py-8 space-y-8",children:[(0,gs.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6",children:[(0,gs.jsxs)("div",{className:"space-y-2",children:[(0,gs.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 bg-clip-text text-transparent",children:"Clients"}),(0,gs.jsx)("p",{className:"text-lg text-slate-600 font-medium",children:"Manage your client companies and hiring managers"})]}),(0,gs.jsx)("div",{className:"flex items-center space-x-3",children:(0,gs.jsxs)("button",{onClick:D,className:"group inline-flex items-center px-6 py-3 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-sm font-semibold rounded-xl hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",disabled:u,children:[(0,gs.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Client"]})})]}),(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8",children:(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,gs.jsxs)("div",{className:"md:col-span-2",children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Search"}),(0,gs.jsxs)("div",{className:"relative",children:[(0,gs.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,gs.jsx)("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,gs.jsx)("input",{type:"text",value:N,onChange:e=>j(e.target.value),placeholder:"Search by name, company, or email...",className:"block w-full pl-12 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm"})]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Filter by Tag"}),(0,gs.jsxs)("select",{value:k,onChange:e=>S(e.target.value),className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",children:[(0,gs.jsx)("option",{value:"",children:"All Tags"}),A.map(e=>(0,gs.jsx)("option",{value:e,children:e},e))]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Sort By"}),(0,gs.jsxs)("select",{value:E,onChange:e=>C(e.target.value),className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",children:[(0,gs.jsx)("option",{value:"name",children:"Name"}),(0,gs.jsx)("option",{value:"company",children:"Company"}),(0,gs.jsx)("option",{value:"createdAt",children:"Date Created"})]})]})]})}),I.length>0?(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden",children:(0,gs.jsx)("div",{className:"overflow-x-auto",children:(0,gs.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,gs.jsx)("thead",{className:"bg-gradient-to-r from-slate-50 to-blue-50",children:(0,gs.jsxs)("tr",{children:[(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Contact"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Company"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Email"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Phone"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Tags"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Actions"})]})}),(0,gs.jsx)("tbody",{className:"bg-white divide-y divide-slate-100",children:I.map(e=>(0,gs.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors duration-200 cursor-pointer",onClick:()=>M(e),children:[(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsxs)("div",{className:"flex items-center",children:[(0,gs.jsx)("div",{className:"flex-shrink-0 h-12 w-12",children:(0,gs.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-slate-100 to-blue-200 flex items-center justify-center",children:(0,gs.jsxs)("span",{className:"text-lg font-semibold text-slate-600",children:[e.firstName.charAt(0),e.lastName.charAt(0)]})})}),(0,gs.jsxs)("div",{className:"ml-4",children:[(0,gs.jsxs)("div",{className:"text-sm font-semibold text-slate-900",children:[e.firstName," ",e.lastName]}),(0,gs.jsxs)("div",{className:"text-sm text-slate-500",children:["Created ",U(e.createdAt)]})]})]})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"text-sm text-slate-900 font-medium",children:e.company||"-"})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:e.email})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"text-sm text-slate-900",children:e.phone?c(e.phone):"-"})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags&&e.tags.length>0?e.tags.map((e,t)=>(0,gs.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700 border border-slate-200",children:e},t)):(0,gs.jsx)("span",{className:"text-sm text-slate-400",children:"No tags"})})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap text-sm font-medium",children:(0,gs.jsxs)("div",{className:"relative",children:[(0,gs.jsx)("button",{onClick:t=>{t.stopPropagation(),w(y===e.id?null:e.id)},className:"text-slate-400 hover:text-slate-600 focus:outline-none focus:text-slate-600",children:(0,gs.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,gs.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),y===e.id&&(0,gs.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-slate-200 py-2 z-10",children:[(0,gs.jsx)("button",{onClick:t=>{t.stopPropagation(),w(null),M(e)},className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 transition-colors duration-200",children:"View Details"}),(0,gs.jsx)("button",{onClick:t=>{t.stopPropagation(),w(null),b(e),p(!0)},className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 transition-colors duration-200",children:"Edit Client"}),(0,gs.jsx)("button",{onClick:t=>{t.stopPropagation(),w(null),O(e.id)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200",children:"Delete Client"})]})]})})]},e.id))})]})})}):(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-12 text-center",children:[(0,gs.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc65"}),(0,gs.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-3",children:"No Clients Found"}),(0,gs.jsx)("p",{className:"text-slate-600 mb-6 text-lg",children:N||k?"Try adjusting your search or filters.":"Start building your client list by adding your first client."}),!N&&!k&&(0,gs.jsxs)("button",{onClick:D,className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-lg font-semibold rounded-xl hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,gs.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Your First Client"]})]}),(0,gs.jsx)(ai,{contact:v,onSubmit:v?R:L,onCancel:F,isOpen:m},(null===v||void 0===v?void 0:v.id)||"new"),v&&g&&(0,gs.jsx)(oi,{contact:v,onClose:()=>x(!1),onEdit:()=>{x(!1),p(!0)},onDelete:()=>O(v.id),onNavigateToJob:P})]})})},ui=e=>{let{deal:t,contacts:n,onSubmit:r,onCancel:i,isOpen:a}=e;const[o,l]=(0,s.useState)({title:"",value:"",stage:"lead",notes:"",jobType:"",requirements:"",startDate:"",feePercentage:"",isExclusive:!1,location:"",recruiter:""}),[c,u]=(0,s.useState)(""),[d,h]=(0,s.useState)({}),[f,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=e=>{"Escape"===e.key&&i()};return a&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[a,i]);(0,s.useEffect)(()=>{t?(l({title:t.title,value:t.value.toString(),stage:t.stage,notes:t.notes||"",jobType:t.jobType||"",requirements:t.requirements||"",startDate:"placed"===t.stage&&t.startDate&&t.startDate instanceof Date?t.startDate.toISOString().split("T")[0]:"",feePercentage:t.feePercentage?String(t.feePercentage):"",isExclusive:t.isExclusive||!1,location:t.location||"",recruiter:t.recruiter||""}),console.log("Setting selectedContactId to:",t.contactId),u(t.contactId)):(l({title:"",value:"",stage:"lead",notes:"",jobType:"",requirements:"",startDate:"",feePercentage:"",isExclusive:!1,location:"",recruiter:""}),u("")),h({})},[t,u]);const p=e=>{const{name:t,value:n,type:r}=e.target;if("checkbox"===r){const n=e.target.checked;l(e=>(0,Oe.A)((0,Oe.A)({},e),{},{[t]:n}))}else l(e=>(0,Oe.A)((0,Oe.A)({},e),{},{[t]:n}))},g=o.value&&o.feePercentage?(Number(o.value)*Number(o.feePercentage)/100).toFixed(2):"0.00";return a?(0,gs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:e=>{e.target===e.currentTarget&&i()},children:(0,gs.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,gs.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:t?"Edit Job Order":"Add New Job Order"}),(0,gs.jsx)("button",{onClick:i,className:"text-slate-400 hover:text-slate-600 transition-colors",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,gs.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return console.log("Validating form with data:",{formData:o,selectedContactId:c}),o.title.trim()||(e.title="Job title is required"),(!o.value||isNaN(Number(o.value))||Number(o.value)<=0)&&(e.value="Valid salary is required"),c||(console.log("Contact validation failed - selectedContactId is:",c),console.log("Available contacts:",null===n||void 0===n?void 0:n.length),e.contact="Please select a client"),o.feePercentage&&(isNaN(Number(o.feePercentage))||Number(o.feePercentage)<=0||Number(o.feePercentage)>100)&&(e.feePercentage="Fee percentage must be between 0 and 100"),"placed"!==o.stage||o.startDate&&o.startDate.trim()||(e.startDate="Start date is required when marking job as placed"),console.log("Validation errors:",e),h(e),0===Object.keys(e).length})()){m(!0);try{const e={title:o.title.trim(),value:Number(o.value),stage:o.stage,probability:0,notes:o.notes.trim(),contactId:c,jobType:o.jobType.trim(),requirements:o.requirements.trim(),feePercentage:o.feePercentage?Number(o.feePercentage):void 0,isExclusive:o.isExclusive,location:o.location.trim(),recruiter:o.recruiter.trim()||void 0};"placed"===o.stage&&o.startDate&&o.startDate.trim()&&(e.startDate=new Date(o.startDate));const t=Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return void 0!==n}));console.log("Submitting deal data:",t),console.log("Data types:",Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e;return[t,typeof n]}))),await r(t),console.log("Deal submission successful")}catch(t){console.error("Error saving job:",t),alert("Failed to save job: ".concat(t instanceof Error?t.message:"Unknown error",". Please try again."))}finally{m(!1)}}else console.log("Form validation failed")},className:"p-6 space-y-6",children:[(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Job Title *"}),(0,gs.jsx)("input",{type:"text",name:"title",value:o.title,onChange:p,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 ".concat(d.title?"border-red-500":"border-slate-200"),placeholder:"e.g., Senior Software Engineer"}),d.title&&(0,gs.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.title})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Client *"}),(0,gs.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 ".concat(d.contact?"border-red-500":"border-slate-200"),children:[(0,gs.jsx)("option",{value:"",children:"Select a client"}),n.map(e=>(0,gs.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName," ",e.company?"(".concat(e.company,")"):""]},e.id))]}),d.contact&&(0,gs.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.contact})]})]}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Job Type"}),(0,gs.jsxs)("select",{name:"jobType",value:o.jobType,onChange:p,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[(0,gs.jsx)("option",{value:"",children:"Select job type"}),(0,gs.jsx)("option",{value:"permanent",children:"Permanent"}),(0,gs.jsx)("option",{value:"contract",children:"Contract"}),(0,gs.jsx)("option",{value:"temporary",children:"Temporary"}),(0,gs.jsx)("option",{value:"part-time",children:"Part-time"}),(0,gs.jsx)("option",{value:"freelance",children:"Freelance"})]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Location"}),(0,gs.jsx)("input",{type:"text",name:"location",value:o.location,onChange:p,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"e.g., London, UK"})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Recruiter"}),(0,gs.jsx)("input",{type:"text",name:"recruiter",value:o.recruiter,onChange:p,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"e.g., John Smith"})]})]}),(0,gs.jsx)("div",{className:"flex items-center space-x-4",children:(0,gs.jsxs)("div",{className:"flex items-center",children:[(0,gs.jsx)("input",{type:"checkbox",name:"isExclusive",checked:o.isExclusive,onChange:p,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"}),(0,gs.jsx)("label",{className:"ml-2 text-sm font-medium text-slate-700",children:"Exclusive Terms"})]})}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Salary *"}),(0,gs.jsx)("input",{type:"number",name:"value",value:o.value,onChange:p,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 ".concat(d.value?"border-red-500":"border-slate-200"),placeholder:"0.00",min:"0",step:"0.01"}),d.value&&(0,gs.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.value})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Fee Percentage (%)"}),(0,gs.jsx)("input",{type:"number",name:"feePercentage",value:o.feePercentage,onChange:p,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 ".concat(d.feePercentage?"border-red-500":"border-slate-200"),placeholder:"15",min:"0",max:"100",step:"0.1"}),d.feePercentage&&(0,gs.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.feePercentage})]})]}),o.value&&o.feePercentage&&(0,gs.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Calculated Fee:"}),(0,gs.jsxs)("span",{className:"text-lg font-bold text-blue-900",children:["\xa3",g]})]}),(0,gs.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:["Based on ",o.value," \xd7 ",o.feePercentage,"%"]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Stage"}),(0,gs.jsxs)("select",{name:"stage",value:o.stage,onChange:p,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[(0,gs.jsx)("option",{value:"lead",children:"Lead"}),(0,gs.jsx)("option",{value:"live-opportunity",children:"Live Job"}),(0,gs.jsx)("option",{value:"shortlist-sent",children:"Shortlist Sent"}),(0,gs.jsx)("option",{value:"interview",children:"Interview"}),(0,gs.jsx)("option",{value:"offer",children:"Offer"}),(0,gs.jsx)("option",{value:"placed",children:"Placed"})]})]}),"placed"===o.stage&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Start Date *"}),(0,gs.jsx)("input",{type:"date",name:"startDate",value:o.startDate,onChange:p,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:!0}),(0,gs.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Required when marking job as placed"}),d.startDate&&(0,gs.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.startDate})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Job Requirements"}),(0,gs.jsx)("textarea",{name:"requirements",value:o.requirements,onChange:p,rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Describe the key requirements, skills, and experience needed for this role..."})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Additional Notes"}),(0,gs.jsx)("textarea",{name:"notes",value:o.notes,onChange:p,rows:3,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Any additional information about this job order..."})]}),(0,gs.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-slate-200",children:[(0,gs.jsx)("button",{type:"button",onClick:i,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200",children:"Cancel"}),(0,gs.jsx)("button",{type:"submit",disabled:f,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:f?"Saving...":t?"Update Job":"Create Job"})]})]})]})}):null},di=()=>{var e,t;const[n,r]=Re(),{currentUser:i}=vs(),{deals:a,setDeals:o}=Ws(),{formatCurrency:l}=Qs(),[c,u]=(0,s.useState)([]),[d,h]=(0,s.useState)([]),[f,m]=(0,s.useState)(!0),[p,g]=(0,s.useState)(!1),[x,v]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[w,N]=(0,s.useState)(!1),[j,k]=(0,s.useState)(null),[S,E]=(0,s.useState)(""),[C,_]=(0,s.useState)(""),[T,I]=(0,s.useState)(""),[A,D]=(0,s.useState)(""),[P,L]=(0,s.useState)(""),[R,O]=(0,s.useState)("title"),[M,F]=(0,s.useState)("asc");(0,s.useEffect)(()=>{if(i){(async()=>{try{m(!0);const[e,t]=await Promise.all([Rs(i.uid),Ps(i.uid)]);o(e),h(t)}catch(e){console.error("Error loading data:",e)}finally{m(!1)}})()}},[i,o]),(0,s.useEffect)(()=>{const e=n.get("jobId");if(e&&a.length>0&&!f){const t=a.find(t=>t.id===e);t&&(k(t),N(!0),r(e=>{const t=new URLSearchParams(e);return t.delete("jobId"),t}))}},[a,f,n,r]),(0,s.useEffect)(()=>{if(i){(async()=>{try{const e=await Ds(i.uid);u(e)}catch(e){console.error("Error loading contacts for jobs:",e)}})()}},[i]);const U=[{id:"lead",name:"Lead",color:"bg-gray-500"},{id:"live-opportunity",name:"Live Job",color:"bg-blue-500"},{id:"shortlist-sent",name:"Shortlist Sent",color:"bg-yellow-500"},{id:"interview",name:"Interview",color:"bg-orange-500"},{id:"offer",name:"Offer",color:"bg-purple-500"},{id:"placed",name:"Placed",color:"bg-green-500"}],V=e=>{const t=e.toLowerCase();return t.includes("lead")?"lead":t.includes("live")||t.includes("opportunity")||t.includes("job")?"live-opportunity":t.includes("shortlist")?"shortlist-sent":t.includes("interview")?"interview":t.includes("offer")?"offer":t.includes("placed")?"placed":e},z=e=>{const t=c.find(t=>t.id===e);return t?"".concat(t.firstName," ").concat(t.lastName):"Unknown Contact"},B=(0,s.useMemo)(()=>{const e=(t="placed",a.filter(e=>V(e.stage)===t));var t;const n=e.reduce((e,t)=>e+(t.value&&t.feePercentage?t.value*t.feePercentage/100:0),0);return{closedWon:{count:e.length,value:n}}},[a]),q=(0,s.useMemo)(()=>{let e=a.filter(e=>{var t,n;const r=""===S||e.title.toLowerCase().includes(S.toLowerCase())||z(e.contactId).toLowerCase().includes(S.toLowerCase())||(null===(t=c.find(t=>t.id===e.contactId))||void 0===t||null===(n=t.company)||void 0===n?void 0:n.toLowerCase().includes(S.toLowerCase()))||e.location&&e.location.toLowerCase().includes(S.toLowerCase())||e.jobType&&e.jobType.toLowerCase().includes(S.toLowerCase())||e.recruiter&&e.recruiter.toLowerCase().includes(S.toLowerCase()),s=""===C||V(e.stage)===C,i=""===T||e.jobType===T,a=""===A||e.isExclusive===("true"===A),o=""===P||e.recruiter===P;return r&&s&&i&&a&&o});return e.sort((e,t)=>{let n,r;switch(R){case"title":default:n=e.title.toLowerCase(),r=t.title.toLowerCase();break;case"contact":n=z(e.contactId).toLowerCase(),r=z(t.contactId).toLowerCase();break;case"jobType":n=(e.jobType||"").toLowerCase(),r=(t.jobType||"").toLowerCase();break;case"value":n=e.value||0,r=t.value||0;break;case"stage":n=V(e.stage),r=V(t.stage);break;case"createdAt":n=e.createdAt,r=t.createdAt}return"asc"===M?n<r?-1:n>r?1:0:n>r?-1:n<r?1:0}),e},[a,S,C,T,A,P,R,M,c]),W=async e=>{if(i&&window.confirm("Are you sure you want to delete this job? This action cannot be undone."))try{await(async e=>{const t=(0,ss.H9)(ps,"deals",e);await(0,ss.kd)(t)})(e),y(null)}catch(t){console.error("Error deleting job:",t),alert("Failed to delete job. Please try again.")}},H=()=>{v(null),g(!0)},K=e=>{const t=V(e),n=U.find(e=>e.id===t);return n?n.color:"bg-gray-500"},G=e=>{const t=V(e),n=U.find(e=>e.id===t);return n?n.name:e};return f?(0,gs.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:(0,gs.jsx)("div",{className:"max-w-none mx-auto px-8 sm:px-12 lg:px-16 py-8 space-y-8",children:(0,gs.jsxs)("div",{className:"animate-pulse",children:[(0,gs.jsx)("div",{className:"h-8 bg-slate-200 rounded w-1/4 mb-8"}),(0,gs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[1,2,3].map(e=>(0,gs.jsx)("div",{className:"h-32 bg-slate-200 rounded-2xl"},e))}),(0,gs.jsx)("div",{className:"h-96 bg-slate-200 rounded-2xl"})]})})}):(0,gs.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:[(0,gs.jsxs)("div",{className:"max-w-none mx-auto px-8 sm:px-12 lg:px-16 py-8 space-y-8",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 bg-clip-text text-transparent",children:"Jobs"}),(0,gs.jsx)("p",{className:"text-slate-600 mt-2",children:"Manage your recruitment pipeline and track job opportunities"})]}),(0,gs.jsxs)("button",{onClick:H,className:"inline-flex items-center px-6 py-3 border border-transparent shadow-sm text-base font-medium rounded-xl text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Job Order"]})]}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Live Jobs"}),(0,gs.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:a.filter(e=>{const t=V(e.stage);return"lead"!==t&&"placed"!==t}).length}),(0,gs.jsx)("p",{className:"text-lg text-blue-700 font-semibold",children:"Active Jobs"})]}),(0,gs.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,gs.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 00-2-2H8a2 2 0 00-2-2v2m8 0V6a2 2 0 00-2-2H8a2 2 0 00-2-2v2m8 0V6a2 2 0 00-2-2H8a2 2 0 00-2-2v2m8 0V6a2 2 0 00-2-2H8a2 2 0 00-2-2v2"})})})]})}),(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Placements"}),(0,gs.jsx)("p",{className:"text-3xl font-bold text-green-600",children:B.closedWon.count}),(0,gs.jsxs)("p",{className:"text-lg text-green-700 font-semibold",children:["Fee: ",l(B.closedWon.value)]})]}),(0,gs.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:(0,gs.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8 mb-8",children:(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-6",children:[(0,gs.jsxs)("div",{className:"md:col-span-2",children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Search"}),(0,gs.jsxs)("div",{className:"relative",children:[(0,gs.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,gs.jsx)("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,gs.jsx)("input",{type:"text",value:S,onChange:e=>E(e.target.value),placeholder:"Search by title, company, client, location, job type, or recruiter...",className:"block w-full pl-12 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm"})]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Filter by Stage"}),(0,gs.jsxs)("select",{value:C,onChange:e=>_(e.target.value),className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",children:[(0,gs.jsx)("option",{value:"",children:"All Stages"}),U.map(e=>(0,gs.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Filter by Job Type"}),(0,gs.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",children:[(0,gs.jsx)("option",{value:"",children:"All Job Types"}),(0,gs.jsx)("option",{value:"permanent",children:"Permanent"}),(0,gs.jsx)("option",{value:"contract",children:"Contract"}),(0,gs.jsx)("option",{value:"temporary",children:"Temporary"}),(0,gs.jsx)("option",{value:"part-time",children:"Part-time"}),(0,gs.jsx)("option",{value:"freelance",children:"Freelance"})]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Exclusive Terms"}),(0,gs.jsxs)("select",{value:A,onChange:e=>D(e.target.value),className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",children:[(0,gs.jsx)("option",{value:"",children:"All Jobs"}),(0,gs.jsx)("option",{value:"true",children:"Exclusive Only"}),(0,gs.jsx)("option",{value:"false",children:"Non-Exclusive Only"})]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Filter by Recruiter"}),(0,gs.jsxs)("select",{value:P,onChange:e=>L(e.target.value),className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",children:[(0,gs.jsx)("option",{value:"",children:"All Recruiters"}),(()=>{const e=new Set;return a.forEach(t=>{const n=t.recruiter;n&&""!==n.trim()&&e.add(n.trim())}),Array.from(e).sort()})().map(e=>(0,gs.jsx)("option",{value:e,children:e},e))]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Sort By"}),(0,gs.jsxs)("select",{value:R,onChange:e=>O(e.target.value),className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",children:[(0,gs.jsx)("option",{value:"title",children:"Title"}),(0,gs.jsx)("option",{value:"contact",children:"Client"}),(0,gs.jsx)("option",{value:"jobType",children:"Job Type"}),(0,gs.jsx)("option",{value:"value",children:"Salary"}),(0,gs.jsx)("option",{value:"stage",children:"Stage"}),(0,gs.jsx)("option",{value:"createdAt",children:"Date Created"})]})]})]})}),q.length>0?(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden",children:(0,gs.jsx)("div",{className:"overflow-x-auto",children:(0,gs.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,gs.jsx)("thead",{className:"bg-gradient-to-r from-slate-50 to-blue-50",children:(0,gs.jsxs)("tr",{children:[(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Job Order"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Company"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Client"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Type & Location"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Salary"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Stage"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Actions"})]})}),(0,gs.jsx)("tbody",{className:"bg-white divide-y divide-slate-100",children:q.map(e=>{var t;return(0,gs.jsxs)("tr",{className:"hover:bg-blue-50 hover:border-l-4 hover:border-l-blue-500 transition-all duration-200 cursor-pointer group",onClick:()=>(e=>{k(e),N(!0)})(e),children:[(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsxs)("div",{children:[(0,gs.jsx)("div",{className:"text-sm font-medium text-slate-900",children:e.title}),(0,gs.jsx)("div",{className:"text-sm text-slate-500",children:e.isExclusive&&" \u2022 Exclusive"})]})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"text-sm text-slate-900",children:(null===(t=c.find(t=>t.id===e.contactId))||void 0===t?void 0:t.company)||"-"})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"text-sm text-slate-900",children:z(e.contactId)})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsxs)("div",{className:"text-sm text-slate-900",children:[(0,gs.jsx)("div",{children:e.jobType||"-"}),(0,gs.jsx)("div",{className:"text-slate-500",children:e.location||"-"}),e.recruiter&&(0,gs.jsxs)("div",{className:"text-xs text-blue-600 font-medium",children:["Recruiter: ",e.recruiter]})]})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsxs)("div",{className:"text-sm font-medium text-slate-900",children:[l(e.value||0),e.feePercentage&&(0,gs.jsxs)("div",{className:"text-xs text-slate-500",children:["Fee: ",l((e.value||0)*e.feePercentage/100)]})]})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ".concat(K(e.stage)," text-white"),children:G(e.stage)})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap text-sm font-medium",children:(0,gs.jsxs)("div",{className:"relative",children:[(0,gs.jsx)("button",{onClick:t=>{t.stopPropagation(),y(b===e.id?null:e.id)},className:"text-slate-400 hover:text-slate-600 focus:outline-none focus:text-slate-600",children:(0,gs.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,gs.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),b===e.id&&(0,gs.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 border border-slate-200",children:[(0,gs.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{v(e),g(!0)})(e)},className:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"Edit"}),(0,gs.jsx)("button",{onClick:t=>{t.stopPropagation(),W(e.id)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Delete"})]})]})})]},e.id)})})]})})}):(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-12 text-center",children:[(0,gs.jsx)("svg",{className:"mx-auto h-12 w-12 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 00-2-2H8a2 2 0 00-2-2v2m8 0V6a2 2 0 00-2-2H8a2 2 0 00-2-2v2m8 0V6a2 2 0 00-2-2H8a2 2 0 00-2-2v2m8 0V6a2 2 0 00-2-2H8a2 2 0 00-2-2v2"})}),(0,gs.jsx)("h3",{className:"mt-2 text-sm font-medium text-slate-900",children:"No jobs found"}),(0,gs.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:S||C||T||A||P?"Try adjusting your search or filters.":"Get started by creating your first job order."}),!S&&!C&&!T&&!A&&!P&&(0,gs.jsx)("div",{className:"mt-6",children:(0,gs.jsxs)("button",{onClick:H,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Job Order"]})})]})]}),p&&(0,gs.jsx)(ui,{isOpen:p,onCancel:()=>g(!1),onSubmit:async e=>{if(i)try{console.log("handleSubmit called with:",{selectedJob:null===x||void 0===x?void 0:x.id,dealData:e}),x?(console.log("Updating existing job with ID:",x.id),await(async(e,t)=>{const n=(0,ss.H9)(ps,"deals",e);await(0,ss.mZ)(n,(0,Oe.A)((0,Oe.A)({},t),{},{updatedAt:ss.Timestamp.now()}))})(x.id,e),console.log("Job update successful")):(console.log("Creating new job"),await(async e=>{try{const t=await(0,ss.addDoc)(Ls,(0,Oe.A)((0,Oe.A)({},e),{},{createdAt:ss.Timestamp.now(),updatedAt:ss.Timestamp.now()}));return(0,Oe.A)((0,Oe.A)({id:t.id},e),{},{createdAt:new Date,updatedAt:new Date})}catch(t){throw console.error("Error adding deal to Firestore:",t),t}})((0,Oe.A)((0,Oe.A)({},e),{},{userId:i.uid})),console.log("Job creation successful")),console.log("Refreshing jobs list...");const t=await Rs(i.uid);o(t),console.log("Jobs list refreshed"),g(!1),v(null)}catch(t){console.error("Error saving job:",t);const e=t instanceof Error?t.message:"Unknown error occurred";alert("Failed to save job: ".concat(e,". Please try again."))}else console.error("No current user found")},deal:x,contacts:c}),w&&j&&(0,gs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,gs.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,gs.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsxs)("h2",{className:"text-2xl font-bold text-slate-900",children:["Job Details: ",j.title]}),(0,gs.jsx)("button",{onClick:()=>N(!1),className:"text-slate-400 hover:text-slate-600 transition-colors",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,gs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Job Title"}),(0,gs.jsx)("p",{className:"text-lg text-slate-900",children:j.title})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Client"}),(0,gs.jsx)("p",{className:"text-lg text-slate-900",children:z(j.contactId)}),(null===(e=c.find(e=>e.id===j.contactId))||void 0===e?void 0:e.company)&&(0,gs.jsx)("p",{className:"text-sm text-slate-600",children:null===(t=c.find(e=>e.id===j.contactId))||void 0===t?void 0:t.company})]})]}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Stage"}),(0,gs.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(K(j.stage)," text-white"),children:G(j.stage)})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Salary"}),(0,gs.jsx)("p",{className:"text-lg text-slate-900",children:l(j.value)})]})]}),j.feePercentage&&(0,gs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-blue-800 mb-1",children:"Fee Percentage"}),(0,gs.jsxs)("p",{className:"text-lg font-bold text-blue-900",children:[j.feePercentage,"%"]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-blue-800 mb-1",children:"Calculated Fee"}),(0,gs.jsx)("p",{className:"text-lg font-bold text-blue-900",children:l(j.value*j.feePercentage/100)})]})]})}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[j.jobType&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Job Type"}),(0,gs.jsx)("p",{className:"text-slate-900 capitalize",children:j.jobType})]}),j.location&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Location"}),(0,gs.jsx)("p",{className:"text-slate-900",children:j.location})]}),j.recruiter&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Recruiter"}),(0,gs.jsx)("p",{className:"text-slate-900",children:j.recruiter})]}),j.isExclusive&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Terms"}),(0,gs.jsx)("p",{className:"text-slate-900",children:"Exclusive"})]}),"placed"===j.stage&&j.startDate&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Start Date"}),(0,gs.jsx)("p",{className:"text-slate-900",children:(e=>{if(!e)return"";if(e instanceof Date)return e.toLocaleDateString();try{return new Date(e).toLocaleDateString()}catch(t){return console.error("Error formatting date:",e,t),"Invalid Date"}})(j.startDate)})]})]}),j.requirements&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Requirements"}),(0,gs.jsx)("div",{className:"bg-slate-50 rounded-xl p-4",children:(0,gs.jsx)("p",{className:"text-slate-900 whitespace-pre-wrap",children:j.requirements})})]}),j.notes&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Notes"}),(0,gs.jsx)("div",{className:"bg-slate-50 rounded-xl p-4",children:(0,gs.jsx)("p",{className:"text-slate-900 whitespace-pre-wrap",children:j.notes})})]}),(()=>{const e=d.filter(e=>e.assignedJobId===j.id);return e.length>0&&(0,gs.jsxs)("div",{children:[(0,gs.jsxs)("label",{className:"block text-sm font-semibold text-slate-700 mb-4",children:["Assigned Candidates (",e.length,")"]}),(0,gs.jsx)("div",{className:"bg-slate-50 rounded-xl p-4 space-y-3",children:e.map(e=>(0,gs.jsx)("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsxs)("h4",{className:"font-semibold text-slate-900",children:[e.firstName," ",e.lastName]}),(0,gs.jsx)("a",{href:"mailto:".concat(e.email),className:"text-sm text-blue-600 hover:text-blue-800 hover:underline transition-colors",children:e.email}),e.skills&&e.skills.length>0&&(0,gs.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.skills.slice(0,3).map((e,t)=>(0,gs.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800",children:e},t)),e.skills.length>3&&(0,gs.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-600",children:["+",e.skills.length-3," more"]})]})]}),(0,gs.jsxs)("div",{className:"text-right",children:[e.candidateStage&&(0,gs.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ".concat("placed"===e.candidateStage?"bg-green-500":"offered"===e.candidateStage?"bg-purple-500":"interview"===e.candidateStage?"bg-orange-500":"rejected"===e.candidateStage?"bg-red-500":"bg-gray-500"," text-white"),children:e.candidateStage.charAt(0).toUpperCase()+e.candidateStage.slice(1)}),e.expectedSalary&&(0,gs.jsxs)("p",{className:"text-sm text-slate-600 mt-1",children:["Expected: ",l(e.expectedSalary)]})]})]})},e.id))})]})})(),(0,gs.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-slate-200",children:[(0,gs.jsx)("button",{onClick:()=>N(!1),className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200",children:"Close"}),(0,gs.jsx)("button",{onClick:()=>{N(!1),v(j),g(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200",children:"Edit Job"})]})]})]})})]})},hi=e=>{let{isOpen:t,onCancel:n,onSubmit:r,candidate:i,jobs:a=[]}=e;const[o,l]=(0,s.useState)({firstName:"",lastName:"",email:"",phone:"",type:"",skills:"",expectedSalary:"",cv:"",assignedJobId:"",candidateStage:""}),[c,u]=(0,s.useState)({});(0,s.useEffect)(()=>{l(i?{firstName:i.firstName||"",lastName:i.lastName||"",email:i.email||"",phone:i.phone||"",type:i.type||"",skills:i.skills?i.skills.join(", "):"",expectedSalary:i.expectedSalary?String(i.expectedSalary):"",cv:i.cv||"",assignedJobId:i.assignedJobId||"",candidateStage:i.candidateStage||""}:{firstName:"",lastName:"",email:"",phone:"",type:"",skills:"",expectedSalary:"",cv:"",assignedJobId:"",candidateStage:""}),u({})},[i]);const d=e=>{const{name:t,value:n}=e.target;l(e=>(0,Oe.A)((0,Oe.A)({},e),{},{[t]:n})),c[t]&&u(e=>(0,Oe.A)((0,Oe.A)({},e),{},{[t]:""}))};return t?(0,gs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,gs.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,gs.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:i?"Edit Candidate":"Add New Candidate"}),(0,gs.jsx)("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 transition-colors",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,gs.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};return o.firstName.trim()||(e.firstName="First name is required"),o.lastName.trim()||(e.lastName="Last name is required"),o.email.trim()?/\S+@\S+\.\S+/.test(o.email)||(e.email="Email is invalid"):e.email="Email is required",u(e),0===Object.keys(e).length})())return;const t=o.skills.split(",").map(e=>e.trim()).filter(e=>e.length>0),n={firstName:o.firstName.trim(),lastName:o.lastName.trim(),email:o.email.trim(),phone:o.phone.trim()||void 0,type:o.type,skills:t.length>0?t:void 0,expectedSalary:o.expectedSalary?parseInt(o.expectedSalary):void 0,cv:o.cv.trim()||void 0,assignedJobId:o.assignedJobId||void 0,candidateStage:o.candidateStage};r(n)},className:"p-6",children:[(0,gs.jsxs)("div",{className:"mb-8",children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Basic Information"}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"First Name *"}),(0,gs.jsx)("input",{type:"text",name:"firstName",value:o.firstName,onChange:d,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 ".concat(c.firstName?"border-red-300":"border-slate-200"),placeholder:"e.g., John"}),c.firstName&&(0,gs.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.firstName})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Last Name *"}),(0,gs.jsx)("input",{type:"text",name:"lastName",value:o.lastName,onChange:d,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 ".concat(c.lastName?"border-red-300":"border-slate-200"),placeholder:"e.g., Smith"}),c.lastName&&(0,gs.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.lastName})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Email *"}),(0,gs.jsx)("input",{type:"email",name:"email",value:o.email,onChange:d,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 ".concat(c.email?"border-red-300":"border-slate-200"),placeholder:"e.g., john.smith@email.com"}),c.email&&(0,gs.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.email})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Phone"}),(0,gs.jsx)("input",{type:"tel",name:"phone",value:o.phone,onChange:d,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"e.g., +1 (555) 123-4567"})]})]})]}),(0,gs.jsxs)("div",{className:"mb-8",children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Professional Information"}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Type"}),(0,gs.jsxs)("select",{name:"type",value:o.type,onChange:d,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[(0,gs.jsx)("option",{value:"",children:"Select type"}),(0,gs.jsx)("option",{value:"permanent",children:"Permanent"}),(0,gs.jsx)("option",{value:"contract",children:"Contract"})]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Skills (comma-separated)"}),(0,gs.jsx)("input",{type:"text",name:"skills",value:o.skills,onChange:d,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"e.g., React, TypeScript, Node.js"})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Expected Salary"}),(0,gs.jsx)("input",{type:"number",name:"expectedSalary",value:o.expectedSalary,onChange:d,min:"0",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"e.g., 80000"})]})]})]}),(0,gs.jsxs)("div",{className:"mb-8",children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Job Assignment"}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Assign to Job (Optional)"}),(0,gs.jsxs)("select",{name:"assignedJobId",value:o.assignedJobId,onChange:d,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[(0,gs.jsx)("option",{value:"",children:"No job assigned"}),a.map(e=>(0,gs.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),o.assignedJobId&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Candidate Stage"}),(0,gs.jsxs)("select",{name:"candidateStage",value:o.candidateStage,onChange:d,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[(0,gs.jsx)("option",{value:"",children:"Select stage"}),(0,gs.jsx)("option",{value:"applied",children:"Applied"}),(0,gs.jsx)("option",{value:"interview",children:"Interview"}),(0,gs.jsx)("option",{value:"rejected",children:"Rejected"}),(0,gs.jsx)("option",{value:"offered",children:"Offered"}),(0,gs.jsx)("option",{value:"placed",children:"Placed"})]})]})]})]}),(0,gs.jsxs)("div",{className:"mb-8",children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"CV"}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"CV Content"}),(0,gs.jsx)("textarea",{name:"cv",value:o.cv,onChange:d,rows:12,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Copy and paste the candidate's CV content here..."}),(0,gs.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:"Paste the full CV text content here for easy reference and searching."})]})]}),(0,gs.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-slate-200",children:[(0,gs.jsx)("button",{type:"button",onClick:n,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200",children:"Cancel"}),(0,gs.jsx)("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200",children:i?"Update Candidate":"Add Candidate"})]})]})]})}):null},fi=()=>{var e;const{currentUser:t}=vs(),{formatCurrency:n}=Qs(),[r,i]=(0,s.useState)([]),[a,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[u,d]=(0,s.useState)(""),[h,f]=(0,s.useState)(""),[m,p]=(0,s.useState)("name"),[g,x]=(0,s.useState)("asc"),[v,b]=(0,s.useState)(!1),[y,w]=(0,s.useState)(null),[N,j]=(0,s.useState)(null),[k,S]=(0,s.useState)(!1),[E,C]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(t){(async()=>{try{c(!0);const[e,n]=await Promise.all([Ps(t.uid),Rs(t.uid)]);i(e),o(n)}catch(e){console.error("Error loading data:",e)}finally{c(!1)}})()}},[t]);const _=(0,s.useMemo)(()=>({permanent:r.filter(e=>"permanent"===e.type).length,contract:r.filter(e=>"contract"===e.type).length,total:r.length}),[r]),T=(0,s.useMemo)(()=>{let e=r.filter(e=>{const t=""===u||e.firstName.toLowerCase().includes(u.toLowerCase())||e.lastName.toLowerCase().includes(u.toLowerCase())||e.skills&&e.skills.some(e=>e.toLowerCase().includes(u.toLowerCase()))||e.cv&&e.cv.toLowerCase().includes(u.toLowerCase()),n=""===h||e.type===h;return t&&n});return e.sort((e,t)=>{let n,r;switch(m){case"name":default:n="".concat(e.firstName," ").concat(e.lastName).toLowerCase(),r="".concat(t.firstName," ").concat(t.lastName).toLowerCase();break;case"type":n=(e.type||"").toLowerCase(),r=(t.type||"").toLowerCase();break;case"expectedSalary":n=e.expectedSalary||0,r=t.expectedSalary||0;break;case"createdAt":n=e.createdAt,r=t.createdAt}return"asc"===g?n<r?-1:n>r?1:0:n>r?-1:n<r?1:0}),e},[r,u,h,m,g]),I=()=>{w(null),b(!0)};return l?(0,gs.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:(0,gs.jsx)("div",{className:"max-w-none mx-auto px-8 sm:px-12 lg:px-16 py-8 space-y-8",children:(0,gs.jsxs)("div",{className:"animate-pulse",children:[(0,gs.jsx)("div",{className:"h-8 bg-slate-200 rounded w-1/4 mb-8"}),(0,gs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(e=>(0,gs.jsx)("div",{className:"h-32 bg-slate-200 rounded-2xl"},e))}),(0,gs.jsx)("div",{className:"h-96 bg-slate-200 rounded-2xl"})]})})}):(0,gs.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:[(0,gs.jsxs)("div",{className:"max-w-none mx-auto px-8 sm:px-12 lg:px-16 py-8 space-y-8",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 bg-clip-text text-transparent",children:"Candidates"}),(0,gs.jsx)("p",{className:"text-slate-600 mt-2",children:"Manage your candidate database and track potential hires"})]}),(0,gs.jsxs)("button",{onClick:I,className:"inline-flex items-center px-6 py-3 border border-transparent shadow-sm text-base font-medium rounded-xl text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Candidate"]})]}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Total Candidates"}),(0,gs.jsx)("p",{className:"text-3xl font-bold text-slate-600",children:_.total})]}),(0,gs.jsx)("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center",children:(0,gs.jsx)("svg",{className:"w-8 h-8 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}),(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Permanent"}),(0,gs.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:_.permanent})]}),(0,gs.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,gs.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Contract"}),(0,gs.jsx)("p",{className:"text-3xl font-bold text-green-600",children:_.contract})]}),(0,gs.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:(0,gs.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M9 11h.01"})})})]})})]}),(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8 mb-8",children:(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6",children:[(0,gs.jsxs)("div",{className:"md:col-span-2",children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Search"}),(0,gs.jsxs)("div",{className:"relative",children:[(0,gs.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,gs.jsx)("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,gs.jsx)("input",{type:"text",value:u,onChange:e=>d(e.target.value),placeholder:"Search by name, role, company, or skills...",className:"block w-full pl-12 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm"})]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Type"}),(0,gs.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",children:[(0,gs.jsx)("option",{value:"",children:"All Types"}),(()=>{const e=new Set;return r.forEach(t=>{t.type&&e.add(t.type)}),Array.from(e).sort()})().map(e=>(0,gs.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Sort By"}),(0,gs.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"block w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",children:[(0,gs.jsx)("option",{value:"name",children:"Name"}),(0,gs.jsx)("option",{value:"type",children:"Type"}),(0,gs.jsx)("option",{value:"expectedSalary",children:"Expected Salary"}),(0,gs.jsx)("option",{value:"createdAt",children:"Date Added"})]})]})]})}),T.length>0?(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden",children:(0,gs.jsx)("div",{className:"overflow-x-auto",children:(0,gs.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,gs.jsx)("thead",{className:"bg-gradient-to-r from-slate-50 to-blue-50",children:(0,gs.jsxs)("tr",{children:[(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Candidate"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Type"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Skills"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Expected Salary"}),(0,gs.jsx)("th",{className:"px-8 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Actions"})]})}),(0,gs.jsx)("tbody",{className:"bg-white divide-y divide-slate-100",children:T.map(e=>(0,gs.jsxs)("tr",{className:"hover:bg-blue-50 hover:border-l-4 hover:border-l-blue-500 transition-all duration-200 cursor-pointer",onClick:()=>(e=>{C(e),S(!0)})(e),children:[(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsxs)("div",{children:[(0,gs.jsxs)("div",{className:"text-sm font-medium text-slate-900",children:[e.firstName," ",e.lastName]}),(0,gs.jsx)("a",{href:"mailto:".concat(e.email),className:"text-sm text-blue-600 hover:text-blue-800 hover:underline transition-colors",onClick:e=>e.stopPropagation(),children:e.email})]})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:e.type?(0,gs.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ".concat("permanent"===e.type?"bg-blue-500":"bg-green-500"," text-white"),children:e.type.charAt(0).toUpperCase()+e.type.slice(1)}):(0,gs.jsx)("span",{className:"text-slate-400",children:"-"})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"text-sm text-slate-900",children:e.skills&&e.skills.length>0?e.skills.slice(0,3).join(", ")+(e.skills.length>3?"...":""):"-"})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap",children:(0,gs.jsx)("div",{className:"text-sm text-slate-900",children:e.expectedSalary?n(e.expectedSalary):"-"})}),(0,gs.jsx)("td",{className:"px-8 py-6 whitespace-nowrap text-sm font-medium",children:(0,gs.jsxs)("div",{className:"relative",children:[(0,gs.jsx)("button",{onClick:t=>{t.stopPropagation(),j(N===e.id?null:e.id)},className:"text-slate-400 hover:text-slate-600 focus:outline-none focus:text-slate-600",children:(0,gs.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,gs.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),N===e.id&&(0,gs.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 border border-slate-200",children:[(0,gs.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{w(e),b(!0)})(e)},className:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"Edit"}),(0,gs.jsx)("button",{onClick:e=>{e.stopPropagation()},className:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"View Details"})]})]})})]},e.id))})]})})}):(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-12 text-center",children:[(0,gs.jsx)("svg",{className:"mx-auto h-12 w-12 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,gs.jsx)("h3",{className:"mt-2 text-sm font-medium text-slate-900",children:"No candidates found"}),(0,gs.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:u||h?"Try adjusting your search or filters.":"Get started by adding your first candidate."}),!u&&!h&&(0,gs.jsx)("div",{className:"mt-6",children:(0,gs.jsxs)("button",{onClick:I,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Candidate"]})})]})]}),v&&(0,gs.jsx)(hi,{isOpen:v,onCancel:()=>b(!1),onSubmit:async e=>{if(t)try{y?(console.log("Updating existing candidate with ID:",y.id),await(async(e,t)=>{try{const n=Object.fromEntries(Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n})),r=(0,Oe.A)((0,Oe.A)({},n),{},{updatedAt:ss.Timestamp.now()}),s=(0,ss.H9)(ps,"candidates",e);await(0,ss.mZ)(s,r),console.log("Candidate updated successfully")}catch(n){throw console.error("Error updating candidate in Firestore:",n),n}})(y.id,e),console.log("Candidate update successful")):(console.log("Creating new candidate"),await(async e=>{try{console.log("=== ADD CANDIDATE DEBUG START ==="),console.log("Input candidate data:",e);const t=Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return void 0!==n}));console.log("Cleaned candidate data for Firestore:",t);const n=(0,Oe.A)((0,Oe.A)({},t),{},{createdAt:ss.Timestamp.now(),updatedAt:ss.Timestamp.now()});console.log("Final document data for Firestore:",n);const r=await(0,ss.addDoc)(As,n);console.log("addDoc successful! Document ID:",r.id);const s=(0,Oe.A)((0,Oe.A)({id:r.id},e),{},{createdAt:new Date,updatedAt:new Date});return console.log("Candidate added successfully:",s),console.log("=== ADD CANDIDATE DEBUG END ==="),s}catch(t){throw console.error("=== ADD CANDIDATE ERROR ==="),console.error("Error adding candidate to Firestore:",t),t}})((0,Oe.A)((0,Oe.A)({},e),{},{userId:t.uid})),console.log("Candidate creation successful"));const n=await Ps(t.uid);i(n),b(!1),w(null)}catch(n){console.error("Error saving candidate:",n);const e=n instanceof Error?n.message:"Unknown error occurred";alert("Failed to save candidate: ".concat(e,". Please try again."))}else console.error("No current user found")},candidate:y,jobs:a}),k&&E&&(0,gs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,gs.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,gs.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsxs)("h2",{className:"text-2xl font-bold text-slate-900",children:["Candidate Details: ",E.firstName," ",E.lastName]}),(0,gs.jsx)("button",{onClick:()=>S(!1),className:"text-slate-400 hover:text-slate-600 transition-colors",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,gs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Name"}),(0,gs.jsxs)("p",{className:"text-lg text-slate-900",children:[E.firstName," ",E.lastName]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Email"}),(0,gs.jsx)("a",{href:"mailto:".concat(E.email),className:"text-lg text-blue-600 hover:text-blue-800 hover:underline transition-colors",children:E.email})]}),E.phone&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Phone"}),(0,gs.jsx)("p",{className:"text-lg text-slate-900",children:E.phone})]}),E.type&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Type"}),(0,gs.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat("permanent"===E.type?"bg-blue-500":"bg-green-500"," text-white"),children:E.type.charAt(0).toUpperCase()+E.type.slice(1)})]})]}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.expectedSalary&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Expected Salary"}),(0,gs.jsx)("p",{className:"text-lg text-slate-900",children:n(E.expectedSalary)})]}),E.skills&&E.skills.length>0&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Skills"}),(0,gs.jsx)("div",{className:"flex flex-wrap gap-2",children:E.skills.map((e,t)=>(0,gs.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800",children:e},t))})]})]}),E.assignedJobId&&(0,gs.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Job Assignment"}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-blue-800 mb-1",children:"Assigned Job"}),(0,gs.jsx)("p",{className:"text-blue-900",children:(null===(e=a.find(e=>e.id===E.assignedJobId))||void 0===e?void 0:e.title)||"Job not found"})]}),E.candidateStage&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-blue-800 mb-1",children:"Stage"}),(0,gs.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ".concat("placed"===E.candidateStage?"bg-green-500":"offered"===E.candidateStage?"bg-purple-500":"interview"===E.candidateStage?"bg-orange-500":"rejected"===E.candidateStage?"bg-red-500":"bg-gray-500"," text-white"),children:E.candidateStage.charAt(0).toUpperCase()+E.candidateStage.slice(1)})]})]})]}),E.cv&&(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"CV"}),(0,gs.jsx)("div",{className:"bg-slate-50 rounded-xl p-4 max-h-64 overflow-y-auto",children:(0,gs.jsx)("p",{className:"text-slate-900 whitespace-pre-wrap",children:E.cv})})]}),(0,gs.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-slate-200",children:[(0,gs.jsx)("button",{onClick:()=>S(!1),className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200",children:"Close"}),(0,gs.jsx)("button",{onClick:()=>{S(!1),w(E),b(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200",children:"Edit Candidate"})]})]})]})})]})},mi=e=>{let{task:t,contacts:n,onSubmit:r,onCancel:i,isOpen:a}=e;const[o,l]=(0,s.useState)({title:"",description:"",dueDate:new Date(Date.now()+864e5).toISOString().split("T")[0],priority:"medium",completed:!1}),[c,u]=(0,s.useState)(""),[d,h]=(0,s.useState)({}),[f,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{var e;t?(l({title:t.title,description:t.description||"",dueDate:t.dueDate?t.dueDate.toISOString().split("T")[0]:"",priority:t.priority,completed:t.completed}),u("contact"===(null===(e=t.relatedTo)||void 0===e?void 0:e.type)?t.relatedTo.id:"")):(l({title:"",description:"",dueDate:new Date(Date.now()+864e5).toISOString().split("T")[0],priority:"medium",completed:!1}),u(""));h({})},[t]);if(!a)return null;const p=!!t,g=p?"Edit Task":"Add New Task",x=p?"Update Task":"Create Task";return(0,gs.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-[70]",children:(0,gs.jsxs)("div",{className:"relative top-20 mx-auto p-6 border w-full max-w-lg shadow-xl rounded-xl bg-white",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,gs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,gs.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:(0,gs.jsx)("span",{className:"text-primary-600 text-xl",children:"\u2705"})}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:g}),(0,gs.jsx)("p",{className:"text-sm text-gray-500",children:p?"Update task details":"Create a new task to stay organized"})]})]}),(0,gs.jsx)("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,gs.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,gs.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return o.title.trim()||(e.title="Task title is required"),o.dueDate&&new Date(o.dueDate)<new Date&&(e.dueDate="Due date cannot be in the past"),h(e),0===Object.keys(e).length})()){m(!0);try{const e={title:o.title.trim(),description:o.description.trim()||void 0,dueDate:o.dueDate?new Date(o.dueDate):void 0,priority:o.priority,completed:o.completed,relatedTo:c?{type:"contact",id:c}:void 0};await r(e)}catch(t){console.error("Form submission error:",t)}finally{m(!1)}}},className:"space-y-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title *"}),(0,gs.jsx)("input",{type:"text",value:o.title,onChange:e=>l(t=>(0,Oe.A)((0,Oe.A)({},t),{},{title:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors ".concat(d.title?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"),placeholder:"What needs to be done?"}),d.title&&(0,gs.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.title})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,gs.jsx)("textarea",{value:o.description,onChange:e=>l(t=>(0,Oe.A)((0,Oe.A)({},t),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors min-h-[100px] resize-none",placeholder:"Add more details about this task..."})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),(0,gs.jsx)("input",{type:"date",value:o.dueDate,onChange:e=>l(t=>(0,Oe.A)((0,Oe.A)({},t),{},{dueDate:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors ".concat(d.dueDate?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300")}),d.dueDate&&(0,gs.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.dueDate})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,gs.jsxs)("select",{value:o.priority,onChange:e=>l(t=>(0,Oe.A)((0,Oe.A)({},t),{},{priority:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",children:[(0,gs.jsx)("option",{value:"low",children:"\ud83d\udfe2 Low"}),(0,gs.jsx)("option",{value:"medium",children:"\ud83d\udfe1 Medium"}),(0,gs.jsx)("option",{value:"high",children:"\ud83d\udd34 High"})]})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link to Contact (Optional)"}),(0,gs.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",children:[(0,gs.jsx)("option",{value:"",children:"No contact linked"}),n.map(e=>(0,gs.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName,e.company&&" - ".concat(e.company)]},e.id))]})]}),p&&(0,gs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,gs.jsx)("input",{type:"checkbox",id:"completed",checked:o.completed,onChange:e=>l(t=>(0,Oe.A)((0,Oe.A)({},t),{},{completed:e.target.checked})),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500 focus:ring-2"}),(0,gs.jsx)("label",{htmlFor:"completed",className:"text-sm font-medium text-gray-700",children:"Mark as completed"})]}),(0,gs.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,gs.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors font-medium",disabled:f,children:"Cancel"}),(0,gs.jsx)("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?(0,gs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gs.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,gs.jsx)("span",{children:"Processing..."})]}):x})]})]})]})})},pi=()=>{const{currentUser:e}=vs(),{tasks:t,setTasks:n,addTask:r,updateTask:i,deleteTask:a}=Ws(),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)(!0),[d,h]=(0,s.useState)(!1),[f,m]=(0,s.useState)(null),[p,g]=(0,s.useState)(""),[x,v]=(0,s.useState)("all"),[b,y]=(0,s.useState)("dueDate"),[w,N]=(0,s.useState)("asc");(0,s.useEffect)(()=>{if(e){(async()=>{try{u(!0);const t=await Fs(e.uid);n(t)}catch(t){console.error("Error loading tasks:",t)}finally{u(!1)}})()}},[e,n]),(0,s.useEffect)(()=>{if(e){(async()=>{try{const t=await Ds(e.uid);l(t)}catch(t){console.error("Error loading contacts for tasks:",t)}})()}},[e]);const j=e=>{if(e.relatedTo&&"contact"===e.relatedTo.type){const t=o.find(t=>t.id===e.relatedTo.id);return t?"".concat(t.firstName," ").concat(t.lastName):"Unknown Contact"}return"No Contact"},k=(0,s.useMemo)(()=>{const e=t.filter(e=>!e.completed),n=e.filter(e=>e.dueDate&&new Date(e.dueDate)<new Date),r=t.filter(e=>e.completed);return{open:{count:e.length,value:e.length},overdue:{count:n.length,value:n.length},completed:{count:r.length,value:r.length}}},[t]),S=(0,s.useMemo)(()=>{let e=t;if(p&&(e=e.filter(e=>e.title.toLowerCase().includes(p.toLowerCase())||e.description&&e.description.toLowerCase().includes(p.toLowerCase())||j(e).toLowerCase().includes(p.toLowerCase()))),"all"!==x)switch(x){case"open":e=e.filter(e=>!e.completed);break;case"overdue":e=e.filter(e=>!e.completed&&e.dueDate&&new Date(e.dueDate)<new Date);break;case"completed":e=e.filter(e=>e.completed)}return e.sort((e,t)=>{let n,r;switch(b){case"title":n=e.title.toLowerCase(),r=t.title.toLowerCase();break;case"dueDate":n=e.dueDate?new Date(e.dueDate).getTime():0,r=t.dueDate?new Date(t.dueDate).getTime():0;break;case"priority":const s={high:3,medium:2,low:1};n=s[e.priority]||0,r=s[t.priority]||0;break;case"contact":n=j(e).toLowerCase(),r=j(t).toLowerCase();break;case"createdAt":n=e.createdAt?new Date(e.createdAt).getTime():0,r=t.createdAt?new Date(t.createdAt).getTime():0;break;default:return 0}return"asc"===w?n>r?1:-1:n<r?1:-1}),e},[t,p,x,b,w,o]),E=async e=>{try{await(async e=>{const t=(0,ss.H9)(ps,"tasks",e);await(0,ss.kd)(t)})(e)}catch(t){console.error("Error deleting task:",t),alert("Failed to delete task. Please try again.")}},C=e=>{if(!e)return"No date";let t=e;return e&&"object"===typeof e&&"toDate"in e?t=e.toDate():e&&"string"===typeof e&&(t=new Date(e)),t instanceof Date?t.toLocaleDateString():"Invalid date"},_=e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},T=e=>e.completed?"bg-green-100 text-green-800 border-green-200":e.dueDate&&new Date(e.dueDate)<new Date?"bg-red-100 text-red-800 border-red-200":"bg-blue-100 text-blue-800 border-blue-200",I=e=>e.completed?"Completed":e.dueDate&&new Date(e.dueDate)<new Date?"Overdue":"Open";return(0,gs.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:(0,gs.jsxs)("div",{className:"max-w-none mx-auto px-8 sm:px-12 lg:px-16 py-8 space-y-8",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gs.jsxs)("div",{className:"space-y-2",children:[(0,gs.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 bg-clip-text text-transparent",children:"Tasks"}),(0,gs.jsx)("p",{className:"text-lg text-slate-600 font-medium",children:"Manage your tasks and follow-up reminders"})]}),(0,gs.jsxs)("button",{onClick:()=>h(!0),className:"group inline-flex items-center px-6 py-3 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-sm font-semibold rounded-xl hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Task"]})]}),c?(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-12 text-center",children:[(0,gs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-slate-600 mx-auto mb-6"}),(0,gs.jsx)("p",{className:"text-lg text-slate-600 font-medium",children:"Loading tasks..."})]}):t.length>0?(0,gs.jsxs)(gs.Fragment,{children:[(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:(0,gs.jsxs)("div",{className:"flex items-center",children:[(0,gs.jsx)("div",{className:"p-3 rounded-xl bg-blue-100 text-blue-600 mr-4",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Open Tasks"}),(0,gs.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:k.open.count})]})]})}),(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:(0,gs.jsxs)("div",{className:"flex items-center",children:[(0,gs.jsx)("div",{className:"p-3 rounded-xl bg-red-100 text-red-600 mr-4",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Overdue Tasks"}),(0,gs.jsx)("p",{className:"text-2xl font-bold text-red-600",children:k.overdue.count})]})]})}),(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:(0,gs.jsxs)("div",{className:"flex items-center",children:[(0,gs.jsx)("div",{className:"p-3 rounded-xl bg-green-100 text-green-600 mr-4",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Completed Tasks"}),(0,gs.jsx)("p",{className:"text-2xl font-bold text-green-600",children:k.completed.count})]})]})})]}),(0,gs.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:(0,gs.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,gs.jsx)("div",{className:"flex-1",children:(0,gs.jsx)("input",{type:"text",placeholder:"Search tasks...",value:p,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})}),(0,gs.jsx)("div",{className:"w-full md:w-48",children:(0,gs.jsxs)("select",{value:x,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[(0,gs.jsx)("option",{value:"all",children:"All Statuses"}),(0,gs.jsx)("option",{value:"open",children:"Open"}),(0,gs.jsx)("option",{value:"overdue",children:"Overdue"}),(0,gs.jsx)("option",{value:"completed",children:"Completed"})]})}),(0,gs.jsx)("div",{className:"w-full md:w-48",children:(0,gs.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[(0,gs.jsx)("option",{value:"dueDate",children:"Sort by Due Date"}),(0,gs.jsx)("option",{value:"title",children:"Sort by Title"}),(0,gs.jsx)("option",{value:"priority",children:"Sort by Priority"}),(0,gs.jsx)("option",{value:"contact",children:"Sort by Contact"}),(0,gs.jsx)("option",{value:"createdAt",children:"Sort by Created"})]})}),(0,gs.jsx)("div",{className:"w-full md:w-32",children:(0,gs.jsx)("button",{onClick:()=>N("asc"===w?"desc":"asc"),className:"w-full px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 flex items-center justify-center",children:"asc"===w?"\u2191":"\u2193"})})]})}),(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden",children:[(0,gs.jsx)("div",{className:"overflow-x-auto",children:(0,gs.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,gs.jsx)("thead",{className:"bg-slate-50",children:(0,gs.jsxs)("tr",{children:[(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Task"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Contact"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Due Date"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Priority"}),(0,gs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),(0,gs.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:S.map(e=>(0,gs.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors duration-200",children:[(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ".concat(T(e)),children:I(e)})}),(0,gs.jsx)("td",{className:"px-6 py-4",children:(0,gs.jsxs)("div",{className:"flex items-center",children:[(0,gs.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>(async e=>{const n=t.find(t=>t.id===e);if(n)try{await Ms(e,{completed:!n.completed})}catch(r){console.error("Error updating task:",r),alert("Failed to update task. Please try again.")}})(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded mr-3"}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("div",{className:"text-sm font-medium text-slate-900",children:e.completed?(0,gs.jsx)("span",{className:"line-through",children:e.title}):e.title}),e.description&&(0,gs.jsx)("div",{className:"text-sm text-slate-500",children:e.completed?(0,gs.jsx)("span",{className:"line-through",children:e.description}):e.description})]})]})}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:j(e)}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:e.dueDate?C(e.dueDate):"No due date"}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gs.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ".concat(_(e.priority)),children:e.priority})}),(0,gs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,gs.jsxs)("div",{className:"flex space-x-2",children:[(0,gs.jsx)("button",{onClick:()=>{m(e),h(!0)},className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-100 rounded transition-colors duration-200",title:"Edit task",children:(0,gs.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,gs.jsx)("button",{onClick:()=>E(e.id),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-100 rounded transition-colors duration-200",title:"Delete task",children:(0,gs.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.id))})]})}),0===S.length&&(0,gs.jsxs)("div",{className:"text-center py-12",children:[(0,gs.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd0d"}),(0,gs.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No tasks found"}),(0,gs.jsx)("p",{className:"text-slate-600",children:"Try adjusting your search or filter criteria."})]})]})]}):(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-12 text-center",children:[(0,gs.jsx)("div",{className:"text-6xl mb-4",children:"\u2705"}),(0,gs.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-3",children:"No tasks yet"}),(0,gs.jsx)("p",{className:"text-slate-600 mb-6 text-lg",children:"Start organizing your work by adding your first task."}),(0,gs.jsxs)("button",{onClick:()=>h(!0),className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-lg font-semibold rounded-xl hover:from-slate-700 hover:to-blue-700 focus:ring-4 focus:ring-blue-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,gs.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Your First Task"]})]}),(0,gs.jsx)(mi,{task:f,contacts:o,onSubmit:f?async e=>{if(f)try{await Ms(f.id,e),h(!1),m(null)}catch(t){console.error("Error updating task:",t),alert("Failed to update task. Please try again.")}}:async t=>{if(e)try{await(async e=>{try{console.log("=== ADD TASK DEBUG START ==="),console.log("Input task data:",e),console.log("Current user context - checking if we have access to db:",!!ps),console.log("Tasks collection reference:",Os);const t=Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return void 0!==n}));console.log("Cleaned task data for Firestore:",t);const n=(0,Oe.A)((0,Oe.A)({},t),{},{createdAt:ss.Timestamp.now(),updatedAt:ss.Timestamp.now()});console.log("Final document data for Firestore:",n),console.log("Data types:",Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e;return[t,typeof n]}))),console.log("About to call addDoc...");const r=await(0,ss.addDoc)(Os,n);console.log("addDoc successful! Document ID:",r.id);const s=(0,Oe.A)((0,Oe.A)({id:r.id},e),{},{createdAt:new Date,updatedAt:new Date});return console.log("Task added successfully:",s),console.log("=== ADD TASK DEBUG END ==="),s}catch(t){throw console.error("=== ADD TASK ERROR ==="),console.error("Error adding task to Firestore:",t),console.error("Error details:",{code:null===t||void 0===t?void 0:t.code,message:null===t||void 0===t?void 0:t.message,stack:null===t||void 0===t?void 0:t.stack}),console.error("=== END ERROR ==="),t}})((0,Oe.A)((0,Oe.A)({},t),{},{userId:e.uid}));h(!1)}catch(n){console.error("Error adding task:",n),alert("Failed to add task. Please try again.")}},onCancel:()=>{h(!1),m(null)},isOpen:d})]})})},gi=[{code:"USD",symbol:"$",name:"US Dollar",locale:"en-US"},{code:"EUR",symbol:"\u20ac",name:"Euro",locale:"de-DE"},{code:"GBP",symbol:"\xa3",name:"British Pound",locale:"en-GB"},{code:"CAD",symbol:"C$",name:"Canadian Dollar",locale:"en-CA"},{code:"AUD",symbol:"A$",name:"Australian Dollar",locale:"en-AU"},{code:"JPY",symbol:"\xa5",name:"Japanese Yen",locale:"ja-JP"},{code:"CHF",symbol:"CHF",name:"Swiss Franc",locale:"de-CH"},{code:"SEK",symbol:"kr",name:"Swedish Krona",locale:"sv-SE"},{code:"NOK",symbol:"kr",name:"Norwegian Krone",locale:"nb-NO"},{code:"DKK",symbol:"kr",name:"Danish Krone",locale:"da-DK"}],xi=[{code:"US",prefix:"+1",name:"United States",example:"+1 (555) 123-4567"},{code:"UK",prefix:"+44",name:"United Kingdom",example:"+44 20 7946 0958"},{code:"CA",prefix:"+1",name:"Canada",example:"+1 (416) 555-0123"},{code:"AU",prefix:"+61",name:"Australia",example:"+61 2 8765 4321"},{code:"DE",prefix:"+49",name:"Germany",example:"+49 30 12345678"},{code:"FR",prefix:"+33",name:"France",example:"+33 1 42 86 12 34"},{code:"IT",prefix:"+39",name:"Italy",example:"+39 06 1234 5678"},{code:"ES",prefix:"+34",name:"Spain",example:"+34 91 123 45 67"},{code:"NL",prefix:"+31",name:"Netherlands",example:"+31 20 123 4567"},{code:"SE",prefix:"+46",name:"Sweden",example:"+46 8 123 456 78"},{code:"NO",prefix:"+47",name:"Norway",example:"+47 22 12 34 56"},{code:"DK",prefix:"+45",name:"Denmark",example:"+45 33 12 34 56"}],vi=()=>{var e,t;const{currentUser:n}=vs(),[r,i]=(0,s.useState)(!1),[a,o]=(0,s.useState)((null===n||void 0===n?void 0:n.displayName)||""),[l,c]=(0,s.useState)((null===n||void 0===n?void 0:n.email)||"");return(0,gs.jsxs)("div",{className:"space-y-6",children:[(0,gs.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,gs.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-600 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg",children:(0,gs.jsx)("span",{className:"text-white font-bold text-2xl",children:(null===n||void 0===n||null===(e=n.displayName)||void 0===e?void 0:e[0])||(null===n||void 0===n||null===(t=n.email)||void 0===t?void 0:t[0])||"U"})}),(0,gs.jsxs)("div",{className:"flex-1",children:[(0,gs.jsx)("h4",{className:"text-xl font-semibold text-slate-900 mb-1",children:(null===n||void 0===n?void 0:n.displayName)||"User Profile"}),(0,gs.jsx)("p",{className:"text-slate-600",children:null===n||void 0===n?void 0:n.email}),(0,gs.jsxs)("p",{className:"text-sm text-slate-500",children:["Member since ",null!==n&&void 0!==n&&n.emailVerified?"Verified":"Pending verification"]})]}),(0,gs.jsx)("button",{onClick:()=>i(!r),className:"px-4 py-2 bg-gradient-to-r from-slate-600 to-blue-600 text-white text-sm font-medium rounded-lg hover:from-slate-700 hover:to-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200",children:r?"Cancel":"Edit Profile"})]}),r?(0,gs.jsxs)("div",{className:"space-y-4",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Display Name"}),(0,gs.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter your display name"})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),(0,gs.jsx)("input",{type:"email",value:l,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter your email"})]}),(0,gs.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,gs.jsx)("button",{onClick:async()=>{try{i(!1)}catch(e){console.error("Error updating profile:",e)}},className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white text-sm font-medium rounded-lg hover:from-green-600 hover:to-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200",children:"Save Changes"}),(0,gs.jsx)("button",{onClick:()=>{o((null===n||void 0===n?void 0:n.displayName)||""),c((null===n||void 0===n?void 0:n.email)||""),i(!1)},className:"px-6 py-2 bg-gradient-to-r from-slate-500 to-slate-600 text-white text-sm font-medium rounded-lg hover:from-slate-600 hover:to-slate-700 focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 transition-all duration-200",children:"Cancel"})]})]}):(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gs.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-6 border border-slate-200/50",children:[(0,gs.jsx)("h5",{className:"text-sm font-medium text-slate-600 mb-2",children:"Account Status"}),(0,gs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gs.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,gs.jsx)("span",{className:"text-sm font-medium text-slate-900",children:"Active"})]}),(0,gs.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Your account is in good standing"})]}),(0,gs.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-6 border border-slate-200/50",children:[(0,gs.jsx)("h5",{className:"text-sm font-medium text-slate-600 mb-2",children:"Email Verification"}),(0,gs.jsx)("div",{className:"flex items-center space-x-2",children:null!==n&&void 0!==n&&n.emailVerified?(0,gs.jsxs)(gs.Fragment,{children:[(0,gs.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,gs.jsx)("span",{className:"text-sm font-medium text-slate-900",children:"Verified"})]}):(0,gs.jsxs)(gs.Fragment,{children:[(0,gs.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,gs.jsx)("span",{className:"text-sm font-medium text-slate-900",children:"Pending"})]})}),(0,gs.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:null!==n&&void 0!==n&&n.emailVerified?"Your email is verified":"Please verify your email address"})]})]})]})},bi=()=>{const{currentUser:e}=vs(),[t,n]=(0,s.useState)(null),[r,i]=(0,s.useState)(!0),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{if(e)try{const t=await Xs(e.uid);n(t)}catch(t){console.error("Error loading subscription:",t)}finally{i(!1)}})()},[e]);if(r)return(0,gs.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,gs.jsxs)("div",{className:"animate-pulse",children:[(0,gs.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,gs.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-2"}),(0,gs.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})});if(!t)return(0,gs.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Subscription Status"}),(0,gs.jsx)("p",{className:"text-gray-600 mb-4",children:"No active subscription found."}),(0,gs.jsx)("a",{href:"/",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"View Plans"})]});console.log("Subscription data in SubscriptionStatus:",t),console.log("Current period dates:",{start:t.currentPeriodStart,end:t.currentPeriodEnd,startType:typeof t.currentPeriodStart,endType:typeof t.currentPeriodEnd});const u=e=>{if(e){if(e instanceof Date)return e;if(e&&"object"===typeof e&&e.toDate)return e.toDate();if("number"===typeof e){const t=new Date(e);return isNaN(t.getTime())?void 0:t}if("string"===typeof e){const t=new Date(e);return isNaN(t.getTime())?void 0:t}}},d=u(t.currentPeriodStart),h=u(t.currentPeriodEnd),f=u(t.trialStart),m=u(t.trialEnd),p=e=>!e||isNaN(e.getTime())||e.getFullYear()<2020?"Not available":new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"long",year:"numeric"}).format(e),g="trialing"===t.status&&m&&new Date<m,x=m?Math.ceil((m.getTime()-(new Date).getTime())/864e5):0;return(0,gs.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,gs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Subscription Status"}),(0,gs.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"active":case"trialing":return"text-green-600 bg-green-100";case"past_due":case"unpaid":return"text-red-600 bg-red-100";case"canceled":return"text-gray-600 bg-gray-100";default:return"text-yellow-600 bg-yellow-100"}})(t.status)),children:(e=>{switch(e){case"active":return"Active";case"trialing":return"Trial";case"past_due":return"Past Due";case"unpaid":return"Unpaid";case"canceled":return"Canceled";case"incomplete":return"Incomplete";case"incomplete_expired":return"Expired";default:return e}})(t.status)})]}),(0,gs.jsxs)("div",{className:"space-y-4",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Plan"}),(0,gs.jsx)("p",{className:"text-gray-900",children:t.planName})]}),g&&(0,gs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,gs.jsxs)("div",{className:"flex items-center",children:[(0,gs.jsx)("div",{className:"flex-shrink-0",children:(0,gs.jsx)("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,gs.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,gs.jsxs)("div",{className:"ml-3",children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Free Trial Active"}),(0,gs.jsxs)("p",{className:"text-sm text-blue-700",children:[x," day",1!==x?"s":""," remaining in your trial"]})]})]})}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Current Period Start"}),(0,gs.jsx)("p",{className:"text-gray-900",children:p(d)})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Current Period End"}),(0,gs.jsx)("p",{className:"text-gray-900",children:p(h)})]})]}),f&&m&&(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Trial Start"}),(0,gs.jsx)("p",{className:"text-gray-900",children:p(f)})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Trial End"}),(0,gs.jsx)("p",{className:"text-gray-900",children:p(m)})]})]}),t.cancelAtPeriodEnd&&(0,gs.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,gs.jsxs)("div",{className:"flex items-center",children:[(0,gs.jsx)("div",{className:"flex-shrink-0",children:(0,gs.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,gs.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,gs.jsxs)("div",{className:"ml-3",children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"Subscription Ending"}),(0,gs.jsxs)("p",{className:"text-sm text-yellow-700",children:["Your subscription will end on ",p(h)]})]})]})})]}),(0,gs.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[l&&(0,gs.jsx)("div",{className:"mb-4 p-3 rounded-md text-sm ".concat(l.includes("successfully")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:l}),"active"===t.status||"trialing"===t.status?(0,gs.jsx)("button",{onClick:async()=>{if(null!==t&&void 0!==t&&t.stripeSubscriptionId){if(window.confirm("Are you sure you want to cancel your subscription? You will lose access to Pebble CRM at the end of your current billing period.")){o(!0),c("");try{const r=await fetch("https://pebble-crm.vercel.app/api/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:t.stripeSubscriptionId,customerId:t.stripeCustomerId})}),s=await r.json();if(s.success){if(c("Subscription cancelled successfully. You will have access until the end of your current billing period."),e){const t=await Xs(e.uid);n(t)}}else c("Failed to cancel subscription: ".concat(s.error))}catch(r){console.error("Error cancelling subscription:",r),c("An error occurred while cancelling your subscription. Please try again or contact support.")}finally{o(!1)}}}else c("No subscription ID found. Please contact support.")},disabled:a,className:"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,gs.jsxs)(gs.Fragment,{children:[(0,gs.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-red-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,gs.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,gs.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelling..."]}):(0,gs.jsxs)(gs.Fragment,{children:[(0,gs.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel Subscription"]})}):(0,gs.jsx)("p",{className:"text-sm text-gray-500",children:"canceled"===t.status?"Subscription has been cancelled.":"Subscription management not available."})]})]})},yi=()=>{const{logout:e}=vs(),{settings:t,updateCurrency:n,updatePhoneFormat:r}=Qs();return(0,gs.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:(0,gs.jsxs)("div",{className:"max-w-none mx-auto px-8 sm:px-12 lg:px-16 py-8 space-y-8",children:[(0,gs.jsxs)("div",{className:"space-y-2",children:[(0,gs.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 bg-clip-text text-transparent",children:"Settings"}),(0,gs.jsx)("p",{className:"text-lg text-slate-600 font-medium",children:"Manage your account and preferences."})]}),(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8",children:[(0,gs.jsxs)("div",{className:"flex items-center mb-6",children:[(0,gs.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-slate-100 to-blue-100 text-slate-600 mr-4",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,gs.jsx)("h3",{className:"text-2xl font-bold text-slate-900",children:"User Profile"})]}),(0,gs.jsx)(vi,{})]}),(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8",children:[(0,gs.jsxs)("div",{className:"flex items-center mb-8",children:[(0,gs.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-purple-100 to-blue-100 text-purple-600 mr-4",children:(0,gs.jsxs)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,gs.jsx)("h3",{className:"text-2xl font-bold text-slate-900",children:"Application Settings"})]}),(0,gs.jsxs)("div",{className:"mb-8",children:[(0,gs.jsx)("h4",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Currency & Formatting"}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Default Currency"}),(0,gs.jsx)("select",{value:t.currency.code,onChange:e=>{const t=gi.find(t=>t.code===e.target.value);t&&n(t)},className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",children:gi.map(e=>(0,gs.jsxs)("option",{value:e.code,children:[e.symbol," ",e.name," (",e.code,")"]},e.code))})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Phone Number Format"}),(0,gs.jsx)("select",{value:t.phoneFormat.code,onChange:e=>{const t=xi.find(t=>t.code===e.target.value);t&&r(t)},className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",children:xi.map(e=>(0,gs.jsxs)("option",{value:e.code,children:[e.prefix," ",e.name]},e.code))})]})]})]}),(0,gs.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-6 border border-slate-200/50",children:[(0,gs.jsx)("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Settings Preview"}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gs.jsxs)("div",{children:[(0,gs.jsx)("h5",{className:"text-sm font-medium text-slate-600 mb-2",children:"Currency Example"}),(0,gs.jsx)("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:(0,gs.jsxs)("span",{className:"text-lg font-semibold text-slate-900",children:[t.currency.symbol,"1,234.56"]})})]}),(0,gs.jsxs)("div",{children:[(0,gs.jsx)("h5",{className:"text-sm font-medium text-slate-600 mb-2",children:"Phone Number Example"}),(0,gs.jsx)("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:(0,gs.jsxs)("span",{className:"text-lg font-semibold text-slate-900",children:[t.phoneFormat.prefix,"123 456 7890"]})})]})]})]})]}),(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8",children:[(0,gs.jsxs)("div",{className:"flex items-center mb-6",children:[(0,gs.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-green-100 to-emerald-100 text-green-600 mr-4",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,gs.jsx)("h3",{className:"text-2xl font-bold text-slate-900",children:"Subscription & Billing"})]}),(0,gs.jsx)(bi,{})]}),(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8",children:[(0,gs.jsxs)("div",{className:"flex items-center mb-6",children:[(0,gs.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-amber-100 to-orange-100 text-amber-600 mr-4",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,gs.jsx)("h3",{className:"text-2xl font-bold text-slate-900",children:"Account Actions"})]}),(0,gs.jsx)("div",{className:"space-y-4",children:(0,gs.jsxs)("button",{onClick:async()=>{try{await e()}catch(t){console.error("Error logging out:",t)}},className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white text-sm font-semibold rounded-xl hover:from-red-600 hover:to-red-700 focus:ring-4 focus:ring-red-500/20 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,gs.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]}),(0,gs.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-8",children:[(0,gs.jsxs)("div",{className:"flex items-center mb-6",children:[(0,gs.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-100 to-indigo-100 text-blue-600 mr-4",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,gs.jsx)("h3",{className:"text-2xl font-bold text-slate-900",children:"About Pebble"})]}),(0,gs.jsxs)("div",{className:"space-y-4 text-slate-600",children:[(0,gs.jsx)("p",{className:"text-lg",children:"Pebble is a modern, lightweight CRM designed for Solo Recruiters & small firms. Built with simplicity and efficiency in mind, it helps you manage your business relationships, track opportunities, and stay organised."}),(0,gs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4",children:[(0,gs.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl border border-slate-200/50",children:[(0,gs.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\ude80"}),(0,gs.jsx)("h4",{className:"font-semibold text-slate-900 mb-1",children:"Fast & Lightweight"}),(0,gs.jsx)("p",{className:"text-sm text-slate-600",children:"Optimised for speed and performance"})]}),(0,gs.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl border border-slate-200/50",children:[(0,gs.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udcf1"}),(0,gs.jsx)("h4",{className:"font-semibold text-slate-900 mb-1",children:"Mobile First"}),(0,gs.jsx)("p",{className:"text-sm text-slate-600",children:"Responsive design for all devices"})]}),(0,gs.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl border border-slate-200/50",children:[(0,gs.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udd12"}),(0,gs.jsx)("h4",{className:"font-semibold text-slate-900 mb-1",children:"Secure"}),(0,gs.jsx)("p",{className:"text-sm text-slate-600",children:"Your data is protected and private"})]})]})]})]})]})})},wi=()=>{var e,t;const{currentUser:n,logout:r}=vs(),{sidebarOpen:s,setSidebarOpen:i}=Ws(),a=ee(),o=ne(),l=[{name:"KPI Dashboard",href:"/dashboard",icon:(0,gs.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{name:"Clients",href:"/contacts",icon:(0,gs.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{name:"Jobs",href:"/jobs",icon:(0,gs.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M9 11h.01"})})},{name:"Candidates",href:"/candidates",icon:(0,gs.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{name:"Settings",href:"/settings",icon:(0,gs.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}],c=e=>a.pathname===e;return(0,gs.jsxs)(gs.Fragment,{children:[s&&(0,gs.jsx)("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-40 lg:hidden",onClick:()=>i(!1)}),(0,gs.jsxs)("div",{className:"\n        fixed inset-y-0 left-0 z-50 w-64 bg-white/95 backdrop-blur-md shadow-2xl border-r border-slate-200/50 transform transition-transform duration-300 ease-in-out lg:sticky lg:top-16 lg:h-screen lg:translate-x-0\n        ".concat(s?"translate-x-0":"-translate-x-full","\n      "),children:[(0,gs.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-slate-200/50 bg-gradient-to-r from-slate-50 to-blue-50/30",children:[(0,gs.jsxs)("button",{onClick:()=>{o("/"),window.scrollTo(0,0)},className:"flex items-center space-x-3 hover:opacity-80 transition-opacity duration-200 cursor-pointer",children:[(0,gs.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-slate-700 to-blue-600 rounded-lg flex items-center justify-center shadow-lg",children:(0,gs.jsx)("span",{className:"text-white font-bold text-lg",children:"P"})}),(0,gs.jsx)("div",{className:"flex items-center space-x-2",children:(0,gs.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-slate-700 to-blue-600 bg-clip-text text-transparent",children:"Pebble"})})]}),(0,gs.jsx)("button",{onClick:()=>i(!1),className:"lg:hidden p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-all duration-200",children:(0,gs.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,gs.jsx)("nav",{className:"mt-6 px-3",children:(0,gs.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,gs.jsxs)(De,{to:e.href,onClick:()=>i(!1),className:"\n                  group flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200\n                  ".concat(c(e.href)?"bg-gradient-to-r from-slate-100 to-blue-50 text-slate-700 border-r-2 border-blue-500 shadow-sm":"text-slate-600 hover:bg-slate-50 hover:text-slate-800 hover:shadow-sm","\n                "),children:[(0,gs.jsx)("span",{className:"mr-3 transition-all duration-200 ".concat(c(e.href)?"text-blue-600":"text-slate-500 group-hover:text-slate-600"),children:e.icon}),e.name]},e.name))})}),(0,gs.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-200/50 bg-gradient-to-r from-slate-50 to-blue-50/30",children:(0,gs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,gs.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-slate-600 to-blue-500 rounded-lg flex items-center justify-center shadow-md",children:(0,gs.jsx)("span",{className:"text-white font-medium text-sm",children:(null===n||void 0===n||null===(e=n.displayName)||void 0===e?void 0:e[0])||(null===n||void 0===n||null===(t=n.email)||void 0===t?void 0:t[0])||"U"})}),(0,gs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,gs.jsx)("p",{className:"text-sm font-medium text-slate-800 truncate",children:(null===n||void 0===n?void 0:n.displayName)||"User"}),(0,gs.jsx)("p",{className:"text-xs text-slate-500 truncate",children:null===n||void 0===n?void 0:n.email})]}),(0,gs.jsx)("button",{onClick:async()=>{try{await r()}catch(e){console.error("Failed to log out:",e)}},className:"p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-all duration-200",title:"Logout",children:(0,gs.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})})]})]})},Ni=()=>{const{setSidebarOpen:e}=Ws();return(0,gs.jsx)("header",{className:"fixed top-0 left-0 right-0 z-40 bg-white/95 backdrop-blur-md border-b border-slate-200/50 shadow-sm",children:(0,gs.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 lg:px-6",children:[(0,gs.jsx)("div",{className:"flex items-center lg:hidden",children:(0,gs.jsx)("button",{onClick:()=>e(!0),className:"p-2 rounded-lg text-slate-600 hover:text-slate-800 hover:bg-slate-100 transition-all duration-200",children:(0,gs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),(0,gs.jsx)("div",{className:"flex items-center lg:hidden",children:(0,gs.jsxs)("button",{onClick:()=>{window.location.href="/",window.scrollTo(0,0)},className:"flex items-center space-x-3 hover:opacity-80 transition-opacity duration-200 cursor-pointer",children:[(0,gs.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-slate-700 to-blue-600 rounded-lg flex items-center justify-center shadow-lg",children:(0,gs.jsx)("span",{className:"text-white font-bold text-lg",children:"P"})}),(0,gs.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-slate-700 to-blue-600 bg-clip-text text-transparent",children:"Pebble"})]})}),(0,gs.jsx)("div",{className:"flex items-center space-x-4"})]})})},ji=()=>{const{currentUser:e}=vs(),{loadUserData:t}=Ws();return(0,s.useEffect)(()=>{e&&t(e.uid)},[e,t]),null},ki=()=>(0,gs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,gs.jsx)(ji,{}),(0,gs.jsx)(Ni,{}),(0,gs.jsxs)("div",{className:"flex pt-16",children:[" ",(0,gs.jsx)(wi,{}),(0,gs.jsx)("main",{className:"flex-1 min-h-screen bg-gray-50",children:(0,gs.jsx)("div",{className:"p-6",children:(0,gs.jsx)(be,{})})})]})]}),Si=e=>{let{children:t}=e;const{currentUser:n,loading:r}=vs();return r?(0,gs.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,gs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n?(0,gs.jsx)(gs.Fragment,{children:t}):(0,gs.jsx)(ve,{to:"/login"})},Ei=e=>{let{children:t}=e;const{currentUser:n}=vs(),r=ne(),[i,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)(0);if((0,s.useEffect)(()=>{const e=async()=>{if(n)try{const e=await Xs(n.uid);if(a(e),!e||!["active","trialing"].includes(e.status))return void r("/upgrade",{replace:!0})}catch(t){return console.error("Error checking subscription:",t),t&&"object"===typeof t&&"message"in t&&"string"===typeof t.message&&t.message.includes("User document not found")&&c<3?(console.log("User document not found, retry ".concat(c+1,"/3, waiting for creation...")),u(e=>e+1),void setTimeout(()=>{e()},1e3)):void r("/upgrade",{replace:!0})}finally{l(!1)}else l(!1)};e()},[n,r]),o)return(0,gs.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,gs.jsxs)("div",{className:"text-center",children:[(0,gs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,gs.jsx)("p",{className:"text-slate-600",children:"Checking subscription..."})]})});if(!i||!["active","trialing"].includes(i.status))return null;try{return(0,gs.jsx)(gs.Fragment,{children:t})}catch(d){return console.error("Error rendering protected content:",d),(0,gs.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,gs.jsxs)("div",{className:"text-center",children:[(0,gs.jsx)("div",{className:"text-red-600 text-xl mb-4",children:"\u26a0\ufe0f Error Loading CRM"}),(0,gs.jsx)("p",{className:"text-slate-600 mb-4",children:"There was an error loading the dashboard."}),(0,gs.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Reload Page"})]})})}};const Ci=function(){return(0,gs.jsx)(Te,{children:(0,gs.jsx)(bs,{children:(0,gs.jsx)(Hs,{children:(0,gs.jsx)(Js,{children:(0,gs.jsxs)(Ne,{children:[(0,gs.jsx)(ye,{path:"/",element:(0,gs.jsx)(ei,{})}),(0,gs.jsx)(ye,{path:"/signup",element:(0,gs.jsx)(Zs,{})}),(0,gs.jsx)(ye,{path:"/privacy",element:(0,gs.jsx)(ti,{})}),(0,gs.jsx)(ye,{path:"/terms",element:(0,gs.jsx)(ni,{})}),(0,gs.jsx)(ye,{path:"/upgrade",element:(0,gs.jsx)(ri,{})}),(0,gs.jsx)(ye,{path:"/payment-success",element:(0,gs.jsx)(si,{})}),(0,gs.jsx)(ye,{path:"/login",element:(0,gs.jsx)(Ys,{})}),(0,gs.jsx)(ye,{path:"/dashboard",element:(0,gs.jsx)(Si,{children:(0,gs.jsx)(Ei,{children:(0,gs.jsx)(ki,{})})}),children:(0,gs.jsx)(ye,{index:!0,element:(0,gs.jsx)(ii,{})})}),(0,gs.jsx)(ye,{path:"/contacts",element:(0,gs.jsx)(Si,{children:(0,gs.jsx)(Ei,{children:(0,gs.jsx)(ki,{})})}),children:(0,gs.jsx)(ye,{index:!0,element:(0,gs.jsx)(ci,{})})}),(0,gs.jsx)(ye,{path:"/jobs",element:(0,gs.jsx)(Si,{children:(0,gs.jsx)(Ei,{children:(0,gs.jsx)(ki,{})})}),children:(0,gs.jsx)(ye,{index:!0,element:(0,gs.jsx)(di,{})})}),(0,gs.jsx)(ye,{path:"/candidates",element:(0,gs.jsx)(Si,{children:(0,gs.jsx)(Ei,{children:(0,gs.jsx)(ki,{})})}),children:(0,gs.jsx)(ye,{index:!0,element:(0,gs.jsx)(fi,{})})}),(0,gs.jsx)(ye,{path:"/tasks",element:(0,gs.jsx)(Si,{children:(0,gs.jsx)(Ei,{children:(0,gs.jsx)(ki,{})})}),children:(0,gs.jsx)(ye,{index:!0,element:(0,gs.jsx)(pi,{})})}),(0,gs.jsx)(ye,{path:"/settings",element:(0,gs.jsx)(Si,{children:(0,gs.jsx)(Ei,{children:(0,gs.jsx)(ki,{})})}),children:(0,gs.jsx)(ye,{index:!0,element:(0,gs.jsx)(yi,{})})})]})})})})})};a.createRoot(document.getElementById("root")).render((0,gs.jsx)(s.StrictMode,{children:(0,gs.jsx)(Ci,{})}))})();
//# sourceMappingURL=main.d9ac8058.js.map